(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[9758],{77320:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return _}});var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"MonHocToan"},[n("raw-loader",{attrs:{mytxt:r(64767).Z}}),n("div",[n("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSaveModal.apply(null,arguments)}}},[n("b-modal",{ref:"my-modal",attrs:{size:"lg","no-close-on-backdrop":!0,"hide-footer":"",title:0==t.sel2[t.pri]?"form Add":"form Edit"}},[n("div",{staticClass:"d-block"},[n("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSaveModal.apply(null,arguments)}}},[n("div",{},[t._l(t.sel2,(function(e,r){return n("div",{key:r,staticClass:"form-group row"},[r==t.pri?[n("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Id")]),n("div",{staticClass:"col-sm-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sel2[r],expression:"sel2[k]"}],class:{"form-control":!0,"ko-hop-le":t.errors.has(r)},attrs:{readonly:!0,name:r,type:"text"},domProps:{value:t.sel2[r]},on:{input:function(e){e.target.composing||t.$set(t.sel2,r,e.target.value)}}})])]:t._e(),"TenLop"==r?[n("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Tên Lớp")]),n("div",{staticClass:"col-sm-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sel2[r],expression:"sel2[k]"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"ko-hop-le":t.errors.has(r)},attrs:{name:r,autocomplete:"off",type:"text"},domProps:{value:t.sel2[r]},on:{input:function(e){e.target.composing||t.$set(t.sel2,r,e.target.value)}}})])]:t._e()],2)})),n("div",[n("hoc-sinh-tbl-sub-com",{ref:"sub",attrs:{LopHocId:t.sel2[this.pri]}})],1),n("div",{staticClass:"text-right"},[n("button",{staticClass:"btn mr-1",attrs:{type:"submit"}},[t._v("Save")]),n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return t.hideModal()}}},[t._v("Cancel")])])],2)])])]),n("b-table",{ref:"mytable",attrs:{"thead-class":"myTable",items:t.myProvider,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,stacked:"sm","show-empty":"",small:"",fixed:"",outlined:"",bordered:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell()",fn:function(e){var r=e.value,n=e.item;e.field.key;return[[0!=n[t.pri]?[(t.pri,[t._v(" "+t._s(r)+" ")])]:t._e()]]}},{key:"cell(cmd)",fn:function(e){return[0==e.item[t.pri]?[n("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(r){return t.onSave(e.item)}}},[n("b-icon-hand-thumbs-up")],1),n("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(r){return t.OnCancel(e.item)}}},[n("b-icon-file-x")],1)]:[t.sel[t.pri]!=e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{disabled:1==t.adding||1==t.isEditing(),variant:"outline",size:"sm"},on:{click:function(r){return t.OnEdit(e.item)}}},[n("b-icon-pencil-square")],1):t._e(),t.sel[t.pri]!=e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{disabled:1==t.adding||1==t.isEditing(),variant:"outline",size:"sm"},on:{click:function(r){return t.OnDel(e.item)}}},[n("b-icon-trash")],1):t._e(),t.sel[t.pri]==e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return t.onSave(e.item)}}},[n("b-icon-hand-thumbs-up")],1):t._e(),t.sel[t.pri]==e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return t.OnCancel(e.item)}}},[n("b-icon-file-x")],1):t._e()]]}},{key:"bottom-row",fn:function(e){return[n("td",{attrs:{colspan:e.columns}},[n("b-row",[n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Tìm kiếm","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),n("b-input-group-append",[n("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Số dòng","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm"}},[n("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),n("b-col",{staticClass:"my-1 text-right",attrs:{sm:"6"}},[n("span",[t._v("page : "+t._s(t.currentPage)+" / "+t._s(t.last_page)+" of "+t._s(t.totalRows)+" ")]),n("b-button",{staticClass:"mr-1 mb-1",attrs:{disabled:1==t.adding||1==t.isEditing(),size:"sm"},on:{click:t.OnAdd}},[n("b",[t._v("Add")])])],1),n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-pagination",{ref:"mypage",attrs:{disabled:1==t.adding||1==t.isEditing(),"total-rows":t.totalRows,"per-page":t.perPage,size:"sm",align:"fill","first-text":"First","prev-text":"Prev","next-text":"Next","last-text":"Last"},on:{change:t.onChangePage,input:t.onPagingInput},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)]}},{key:"row-details",fn:function(e){return[n("b-card",[n("ul",t._l(e.item,(function(e,r){return n("li",{key:r},[t._v(t._s(r)+": "+t._s(e))])})),0)])]}}])})],1),n("b-modal",{attrs:{id:t.infoModal.id,title:t.infoModal.title,"ok-only":""},on:{hide:t.resetInfoModal}},[n("pre",[t._v(t._s(t.infoModal.content))])])],1)],1)},i=[],s=r(77673),a=r(16198),o=(r(41539),r(38862),r(92222),r(57327),r(54747),r(47941),r(60086),r(34553),r(40561),r(12954)),l=r(20144),c=r(85890),u=r(96486),d=r(70790),f=r(53009),p=r(30381),m=r.n(p),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSave.apply(null,arguments)}}},[r("b-table",{ref:"mytable",attrs:{items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,stacked:"md",striped:"","show-empty":"",small:"",fixed:"",outlined:"",bordered:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell()",fn:function(e){var n=e.value,i=e.item,s=e.field.key;return[t.sel[t.pri]!=i[t.pri]?[0!=i[t.pri]?[s==t.pri?[t._v(" "+t._s(n)+" ")]:t._e(),"TenHocSinh"==s?[t._v(" "+t._s(n)+" ")]:t._e(),"NamSinh"==s?[t._v(" "+t._s(n)+" ")]:t._e(),"LopHocId"==s?[t._v(" "+t._s(n)+" ")]:t._e()]:t._e()]:t._e(),t.sel[t.pri]==i[t.pri]||0==i[t.pri]?[s==t.pri?[r("span",[t._v(t._s(n))])]:t._e(),"TenHocSinh"==s?[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"ko-hop-le":t.errors.has(s),"text-right":!1},attrs:{autocomplete:"off",name:s,placeholder:""},model:{value:i[s],callback:function(e){t.$set(i,s,e)},expression:"item[key]"}})]:t._e(),"NamSinh"==s?[r("b-form-datepicker",{attrs:{"date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:"vi"},model:{value:i[s],callback:function(e){t.$set(i,s,e)},expression:"item[key]"}})]:t._e(),"LopHocId"==s?[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"ko-hop-le":t.errors.has(s),"text-center":!0},attrs:{autocomplete:"off",name:s,placeholder:""},model:{value:i[s],callback:function(e){t.$set(i,s,e)},expression:"item[key]"}})]:t._e()]:t._e()]}},{key:"cell(cmd)",fn:function(e){return[0==e.item[t.pri]?[r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return t.onSave(e.item)}}},[r("b-icon-hand-thumbs-up")],1),r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return t.OnCancel(e.item)}}},[r("b-icon-file-x")],1)]:[t.sel[t.pri]!=e.item[t.pri]?r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",disabled:1==t.isAdded(),size:"sm"},on:{click:function(r){return t.OnEdit(e.item)}}},[r("b-icon-pencil-square")],1):t._e(),t.sel[t.pri]!=e.item[t.pri]?r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",disabled:1==t.isAdded(),size:"sm"},on:{click:function(r){return t.OnDel(e.item)}}},[r("b-icon-trash")],1):t._e(),t.sel[t.pri]==e.item[t.pri]?r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return t.onSave(e.item)}}},[r("b-icon-hand-thumbs-up")],1):t._e(),t.sel[t.pri]==e.item[t.pri]?r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return t.OnCancel(e.item)}}},[r("b-icon-file-x")],1):t._e()]]}},{key:"bottom-row",fn:function(e){return[r("td",{attrs:{colspan:e.columns}},[r("b-row",[r("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[r("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[r("b-input-group",{attrs:{size:"sm"}},[r("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),r("b-input-group-append",[r("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),r("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[r("b-form-group",{staticClass:"mb-0",attrs:{label:"Per page","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm"}},[r("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),r("b-col",{staticClass:"my-1 text-right",attrs:{sm:"6"}},[t._v(" page :"+t._s(t.currentPage)+" / "+t._s(t.getLastPage(t.totalRows))+" of "+t._s(t.totalRows)+" "),r("b-button",{attrs:{disabled:1==t.adding||1==t.isEditing(),size:"sm"},on:{click:t.OnAdd}},[r("b",[t._v("Add")])])],1),r("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[r("b-pagination",{staticClass:"my-0",attrs:{disabled:1==t.adding||1==t.isEditing(),"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)]}}])})],1),r("b-modal",{attrs:{id:t.infoModal.id,title:t.infoModal.title,"ok-only":""},on:{hide:t.resetInfoModal}},[r("pre",[t._v(t._s(t.infoModal.content))])])],1)},b=[],g=(r(39714),r(21249),r(19938)),v=r.n(g),y=r(11678);l["default"].use(o.ZP,{classes:!0,fieldsBagName:"veeFields"}),l["default"].component("v-select",v());var w={props:["LopHocId"],mixins:[y.Z],data:function(){return{items:[],fields:[{key:"Id",formatter:function(t,e,r){var n=t.toString();return n.length<4?n:n.substring(0,4)+"..."},sortable:!0,thClass:"text-center",tdClass:"text-center align-middle",thStyle:{width:"10%"}},{key:"TenHocSinh",sortable:!0,thClass:"text-center",tdClass:"align-middle",thStyle:{width:"45%"}},{key:"NamSinh",formatter:function(t,e,r){return m()(t).format("DD/MM/YYYY")},sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"20%"}},{key:"LopHocId",sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"10%"}},{key:"cmd",class:"text-center",thClass:"text-center",tdClass:"align-middle",thStyle:{width:"15%"}}],totalRows:1,currentPage:1,perPage:3,pageOptions:[3,5,10,15,{value:100,text:"Show a lot"}],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},sel:{},pri:"Id",adding:!1,lastPage:0,ds:[],Mons:[]}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},mounted:function(){this.GetListById(this.LopHocId)},methods:{UpdateRow:function(t,e,r,n){t.SoLg=0,t.Tien=0},onSoLgChange:function(t){var e=t.SoLg*t.DonGia;t.Tien=e},onMonChange:function(t){var e=t.MonId,r=this.Mons.findIndex((function(t){return t.id==e}));if(r>=0){var n=this.Mons[r].price,i=t.SoLg,s=i*n;t.DonGia=n,t.Tien=s}},onSave1:function(){var t=this.Lds();this.UpdateList(t)},onSave:function(t){var e=this;this.$validator.validateAll().then((function(r){if(r){var n=JSON.parse(JSON.stringify(t));if(0==n[e.pri]){var i=e.items.findIndex((function(t){return t[e.pri]==n[e.pri]}));n[e.pri]=e.createId(),e.Add(n),e.$set(e.items,i,n),e.adding=!1,e.$refs.mytable.refresh()}else{e.Update(n);var s=e.items.findIndex((function(t){return t[e.pri]==n[e.pri]}));e.$set(e.items,s,n),e.sel={}}}else e.toast("Không hợp lệ")}))},OnDel:function(t){this.delRow(t),this.Del(t)},delRow:function(t){var e=this,r=t[this.pri],n=this.items.findIndex((function(t){return t[e.pri]==r}));this.items.splice(n,1),this.totalRows=this.items.length,this.lastPage=this.getLastPage(this.totalRows)},doCancel:function(t){for(var e in t)t[e]!=this.sel[e]&&(t[e]=this.sel[e])},isAdded:function(){var t=this,e=!1;return this.items.forEach((function(r){0==r[t.pri]&&(e=!0)})),e},OnEdit:function(t){"{}"==JSON.stringify(this.sel)&&(this.sel=JSON.parse(JSON.stringify(t)))},OnCancel:function(t){var e=this;if(0==t[this.pri]){var r=this.items.findIndex((function(r){return r[e.pri]==t[e.pri]}));this.items.splice(r,1),this.adding=!1,this.$refs.mytable.refresh()}else this.doCancel(t),this.sel={}},OnAdd:function(){var t={Id:0,TenHocSinh:"Thức",NamSinh:new Date,LopHocId:0};this.items.unshift(t),this.adding=!0,this.currentPage=1,this.totalRows=this.items.length,this.$refs.mytable.refresh()},isEditing:function(){return"{}"!=JSON.stringify(this.sel)},getLastPage:function(t){var e=this.perPage,r=t%e;return 0==r?t/e:(t-r)/e+1},info:function(t,e,r){this.infoModal.title="Row index: ".concat(e),this.infoModal.content=JSON.stringify(t,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,r)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},toast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$bvToast.toast(t,{title:"Information",variant:e,solid:!0})},GetAll:function(){var t=this;return(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.Z.get("/api/HocSinh4/GetAll").then((function(e){var r=e.data.list;t.SetPri(t.pri),t.SetDs(r),t.items=r,t.totalRows=t.items.length,t.lastPage=t.getLastPage(t.totalRows),t.LdsMon()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},GetListById:function(t){var e=this;return(0,a.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d.Z.get("/api/HocSinh4/GetListById?LopHocId=".concat(t)).then((function(t){var r=t.data;e.SetPri(e.pri),e.SetDs(r),e.items=r,e.totalRows=e.items.length,e.lastPage=e.getLastPage(e.totalRows)})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},LdsMon:function(){var t=this;return(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Z)("/api/Mon2/ListMonComboPrice").then((function(e){t.Mons=e.data.list})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},UpdateList:function(t){var e=this;return(0,a.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d.Z.post("/api/BanChiTiet2/UpdateBanChiTietNote",t).then((function(t){e.GetAll()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()}}},x=w,k=r(1001),S=(0,k.Z)(x,h,b,!1,null,null,null),C=S.exports;l["default"].use(o.ZP,{classes:!0,fieldsBagName:"veeFields"});var P={components:{VueTypeaheadBootstrap:c.Z,HocSinhTblSubCom:C},data:function(){return{items:[],fields:[{key:"Id",formatter:function(t,e,r){return t},sortable:!0,thClass:"text-center",tdClass:"text-center align-middle",thStyle:{width:"8%"}},{key:"TenLop",sortable:!0,thClass:"text-center",tdClass:"align-middle",thStyle:{width:"80%"}},{key:"cmd",class:"text-center",thClass:"text-center",tdClass:"align-middle",thStyle:{width:"12%"}}],totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15,{value:100,text:"Show a lot"}],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},sel:{},sel2:{},pri:"Id",last_page:0,adding:!1,ListAuto:[],title:"hello title"}},watch:{last_page:function(t,e){},currentPage:function(t){},totalRows:function(t,e){}},computed:{},mounted:function(){},methods:{OnSearch:(0,u.debounce)((function(t){var e=this;fetch("/api/Ban/AutoComplete?q=".concat(t)).then((function(t){return t.json()})).then((function(t){console.log(JSON.stringify(t)),e.ListAuto=t.items}))}),500),onPagingInput:function(){},myProvider:function(t){var e=this,r=t.currentPage,n=t.perPage,i=t.sortBy,s=t.sortDesc,a=this,o="/api/LopHoc4/GetPage2";if(o="".concat(o,"?page=").concat(r,"&size=").concat(n,"&sortBy=").concat(i,"&sortDesc=").concat(s),t.filter){var l=t.filter;o="".concat(o,"&filter=").concat(l)}return d.Z.get(o).then((function(t){if(a.last_page=t.data.last_page,a.totalRows=t.data.rowCount,a.items=t.data.data,1==e.adding){var r={};r[e.pri]=0,r["TenKhach"]="xxx",r["Ngay"]=new Date,t.data.data.unshift(r)}return a.mapData(t.data.data)})).catch((function(t){f.Z.XuLyErr(t)}))},mapData:function(t){var e=[];return t.forEach((function(t){var r={};Object.keys(t).forEach((function(e){var n=e;r[n]=t[e]})),e.push(r)})),e},onChangePage:function(){this.sel={},this.adding=!1},OnAdd:function(){this.sel2={Id:0,TenLop:"sfsfsf"},this.showModal()},OnEdit:function(t){"{}"==JSON.stringify(this.sel)&&1!=this.adding&&this.getById(t[this.pri])},onSaveModal:function(){var t=this;this.$validator.validateAll().then((function(e){if(e){var r=JSON.parse(JSON.stringify(t.sel2)),n=t.$refs.sub.Lds(),i={Id:r.Id,TenLop:r.TenLop,Sub:n};0==r[t.pri]?t.AddSub(i):t.UpdateSub(i)}else t.toast("Không hợp lệ")}))},onSave:function(t){var e=this;this.$validator.validateAll().then((function(r){if(r){var n=JSON.parse(JSON.stringify(t));0==n[e.pri]?e.Add(n).then((function(t){"ok"==t.data.kq&&(e.toast("".concat(t.data.msg)),e.adding=!1,e.$refs.mytable.refresh())})):e.Update(n).then((function(t){e.toast("".concat(t.data.msg)),e.adding=!1,e.sel={},e.$refs.mytable.refresh()}))}else e.toast("Không hợp lệ")}))},OnCancel:function(t){0!=t[this.pri]?(this.doCancel(t),this.sel={}):(this.adding=!1,this.$refs.mytable.refresh())},OnDel:function(t){var e=this;this.Del(t[this.pri]).then((function(t){if("nook"!=t.data.kq){e.toast("".concat(t.data.msg));var r=e.getLastPage(e.totalRows-1);r<e.currentPage&&(e.currentPage=r),e.$refs.mytable.refresh()}else e.toast("".concat(t.data.msg))}))},delRow:function(t){var e=t.id,r=this.items.findIndex((function(t){return t.id==e}));this.items.splice(r,1)},isEditing:function(){return"{}"!=JSON.stringify(this.sel)},isAdded:function(){var t=!1;return this.items.forEach((function(e){0==e.id&&(t=!0)})),t},doCancel:function(t){for(var e in t)t[e]!=this.sel[e]&&(t[e]=this.sel[e])},getLastPage:function(t){var e=this.perPage,r=t%e;return 0==r?t/e:(t-r)/e+1},gotoPage:function(t){this.currentPage=t,this.$refs.mytable.refresh()},toast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$bvToast.toast(t,{title:"Information",variant:e,solid:!0})},Add:function(t){var e=this;return(0,a.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d.Z.post("/api/LopHoc4/Add",t).then((function(t){e.toast("".concat(t.data.msg)),e.hideModal(),e.$refs.mytable.refresh()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},AddSub:function(t){var e=this;return(0,a.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d.Z.post("/api/LopHoc4/AddSub",t).then((function(t){e.toast("".concat(JSON.stringify(t.data.msg))),e.hideModal(),e.$refs.mytable.refresh()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},Update:function(t){var e=this;return(0,a.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d.Z.post("/api/LopHoc4/Update",t).then((function(t){e.hideModal(),e.toast("".concat(t.data.msg)),e.$refs.mytable.refresh()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},UpdateSub:function(t){var e=this;return(0,a.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d.Z.post("/api/LopHoc4/UpdateSub",t).then((function(t){e.hideModal(),e.toast("".concat(JSON.stringify(t.data.msg))),e.$refs.mytable.refresh()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},Del:function(t){var e=this;return(0,a.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d.Z.get("/api/LopHoc4/Delete?id=".concat(t)).then((function(t){e.toast("".concat(t.data.msg)),e.$refs.mytable.refresh()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},getById:function(t){var e=this;return(0,a.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d.Z.get("/api/LopHoc4/GetById?id=".concat(t)).then((function(t){e.sel2=t.data,e.showModal()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},info:function(t,e,r){this.infoModal.title="Row index: ".concat(e),this.infoModal.content=JSON.stringify(t,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,r)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},showModal:function(){this.$refs["my-modal"].show()},hideModal:function(){this.$refs["my-modal"].hide()}}},L=P,O=(0,k.Z)(L,n,i,!1,null,null,null),_=O.exports},14230:function(t,e,r){var n=r(1702),i=r(84488),s=r(41340),a=/"/g,o=n("".replace);t.exports=function(t,e,r,n){var l=s(i(t)),c="<"+e;return""!==r&&(c+=" "+r+'="'+o(s(n),a,"&quot;")+'"'),c+">"+l+"</"+e+">"}},67066:function(t,e,r){"use strict";var n=r(19670);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},34706:function(t,e,r){var n=r(46916),i=r(92597),s=r(47976),a=r(67066),o=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in o||i(t,"flags")||!s(o,t)?e:n(a,t)}},43429:function(t,e,r){var n=r(47293);t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},92222:function(t,e,r){"use strict";var n=r(82109),i=r(17854),s=r(47293),a=r(43157),o=r(70111),l=r(47908),c=r(26244),u=r(86135),d=r(65417),f=r(81194),p=r(5112),m=r(7392),h=p("isConcatSpreadable"),b=9007199254740991,g="Maximum allowed index exceeded",v=i.TypeError,y=m>=51||!s((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),w=f("concat"),x=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:a(t)},k=!y||!w;n({target:"Array",proto:!0,arity:1,forced:k},{concat:function(t){var e,r,n,i,s,a=l(this),o=d(a,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(s=-1===e?a:arguments[e],x(s)){if(i=c(s),f+i>b)throw v(g);for(r=0;r<i;r++,f++)r in s&&u(o,f,s[r])}else{if(f>=b)throw v(g);u(o,f++,s)}return o.length=f,o}})},21249:function(t,e,r){"use strict";var n=r(82109),i=r(42092).map,s=r(81194),a=s("map");n({target:"Array",proto:!0,forced:!a},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},47941:function(t,e,r){var n=r(82109),i=r(47908),s=r(81956),a=r(47293),o=a((function(){s(1)}));n({target:"Object",stat:!0,forced:o},{keys:function(t){return s(i(t))}})},39714:function(t,e,r){"use strict";var n=r(76530).PROPER,i=r(98052),s=r(19670),a=r(41340),o=r(47293),l=r(34706),c="toString",u=RegExp.prototype,d=u[c],f=o((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),p=n&&d.name!=c;(f||p)&&i(RegExp.prototype,c,(function(){var t=s(this),e=a(t.source),r=a(l(t));return"/"+e+"/"+r}),{unsafe:!0})},60086:function(t,e,r){"use strict";var n=r(82109),i=r(14230),s=r(43429);n({target:"String",proto:!0,forced:s("sub")},{sub:function(){return i(this,"sub","","")}})},64767:function(t,e){"use strict";e["Z"]='<template>\r\n    <div class="MonHocToan">\r\n        <raw-loader :mytxt="require(\'!raw-loader!./LopHocSub.vue\').default"></raw-loader>\r\n\r\n        <div>\r\n            \x3c!-- User Interface controls --\x3e\r\n            \x3c!-- Main table element --\x3e\r\n            <form @submit.stop.prevent="onSaveModal">\r\n                <b-modal ref="my-modal" size="lg" :no-close-on-backdrop="true" hide-footer\r\n                    :title="(sel2[pri] == 0) ? \'form Add\' : \'form Edit\'">\r\n                    <div class="d-block">\r\n                        <form @submit.stop.prevent="onSaveModal">\r\n                            <div class="">\r\n                                <div class="form-group row" v-for="(v, k) in sel2" :key="k">\r\n\r\n                                    <template v-if="(k == pri)">\r\n                                        <label class="col-sm-4 col-form-label">Id</label>\r\n                                        <div class="col-sm-8">\r\n                                            <input :readonly="true" :name="k" v-model="sel2[k]" :class="{\r\n                                                \'form-control\': true,\r\n                                                \'ko-hop-le\': errors.has(k),\r\n                                            }" type="text" />\r\n                                        </div>\r\n                                    </template>\r\n                                    <template v-if="k == \'TenLop\'">\r\n                                        <label class="col-sm-4 col-form-label">Tên Lớp</label>\r\n                                        <div class="col-sm-8">\r\n                                            <input :name="k" v-model="sel2[k]" autocomplete="off" :class="{\r\n                                                \'form-control\': true,\r\n                                                \'ko-hop-le\': errors.has(k),\r\n                                            }" type="text" v-validate="\'required\'" />\r\n                                        </div>\r\n                                    </template>\r\n\r\n                                </div>\r\n                                <div>\r\n                                    <hoc-sinh-tbl-sub-com ref="sub" :LopHocId="sel2[this.pri]"></hoc-sinh-tbl-sub-com>\r\n                                </div>\r\n                                <div class="text-right">\r\n                                    <button type="submit" class="btn mr-1">Save</button>\r\n                                    <button type="button" class="btn" @click="hideModal()">Cancel</button>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </b-modal>\r\n                <b-table thead-class="myTable" ref="mytable" :items="myProvider" :fields="fields"\r\n                    :current-page="currentPage" :per-page="perPage" :filter="filter" :filter-included-fields="filterOn"\r\n                    :sort-by.sync="sortBy" :sort-desc.sync="sortDesc" :sort-direction="sortDirection" stacked="sm"\r\n                    show-empty small fixed outlined bordered @filtered="onFiltered">\r\n                    <template v-slot:cell()="{ value, item, field: { key } }">\r\n                        <template>\r\n                            <template v-if="item[pri] != 0">\r\n                                <template v-if="key == pri">\r\n                                    {{ value }}\r\n                                </template>\r\n                                <template v-else>\r\n                                    {{ value }}\r\n                                </template>\r\n                            </template>\r\n                        </template>\r\n                    </template>\r\n                    <template #cell(cmd)="row">\r\n                        <template v-if="row.item[pri] == 0">\r\n                            <b-button class="mr-1" size="sm" @click="onSave(row.item)">\r\n                                <b-icon-hand-thumbs-up></b-icon-hand-thumbs-up>\r\n                            </b-button>\r\n                            <b-button class="mr-1" size="sm" @click="OnCancel(row.item)">\r\n                                <b-icon-file-x></b-icon-file-x>\r\n                            </b-button>\r\n                        </template>\r\n                        <template v-else>\r\n                            <b-button :disabled="adding == true || isEditing() == true" variant="outline" class="mr-1"\r\n                                v-if="sel[pri] != row.item[pri]" size="sm" @click="OnEdit(row.item)">\r\n                                <b-icon-pencil-square></b-icon-pencil-square>\r\n                            </b-button>\r\n                            <b-button :disabled="adding == true || isEditing() == true" variant="outline" class="mr-1"\r\n                                v-if="sel[pri] != row.item[pri]" size="sm" @click="OnDel(row.item)">\r\n                                <b-icon-trash></b-icon-trash>\r\n                            </b-button>\r\n                            <b-button variant="outline" class="mr-1" v-if="sel[pri] == row.item[pri]" size="sm"\r\n                                @click="onSave(row.item)">\r\n                                <b-icon-hand-thumbs-up></b-icon-hand-thumbs-up>\r\n                            </b-button>\r\n                            <b-button variant="outline" class="mr-1" v-if="sel[pri] == row.item[pri]" size="sm"\r\n                                @click="OnCancel(row.item)">\r\n                                <b-icon-file-x></b-icon-file-x>\r\n                            </b-button>\r\n                        </template>\r\n                    </template>\r\n                    <template #bottom-row="data">\r\n                        <td :colspan="data.columns">\r\n                            <b-row>\r\n                                <b-col sm="6" class="my-1">\r\n                                    <b-form-group label="Tìm kiếm" label-for="filter-input" label-cols-sm="3"\r\n                                        label-align-sm="right" label-size="sm" class="mb-0">\r\n                                        <b-input-group size="sm">\r\n                                            <b-form-input id="filter-input" v-model="filter" type="search"\r\n                                                placeholder="Type to Search">\r\n                                            </b-form-input>\r\n\r\n                                            <b-input-group-append>\r\n                                                <b-button :disabled="!filter" @click="filter = \'\'">Clear</b-button>\r\n                                            </b-input-group-append>\r\n                                        </b-input-group>\r\n                                    </b-form-group>\r\n                                </b-col>\r\n                                <b-col sm="6" class="my-1">\r\n                                    <b-form-group label="Số dòng" label-for="per-page-select" label-cols-sm="6"\r\n                                        label-cols-md="4" label-cols-lg="3" label-align-sm="right" label-size="sm"\r\n                                        class="mb-0">\r\n                                        <b-form-select id="per-page-select" v-model="perPage" :options="pageOptions"\r\n                                            size="sm">\r\n                                        </b-form-select>\r\n                                    </b-form-group>\r\n                                </b-col>\r\n\r\n                                <b-col sm="6" class="my-1 text-right">\r\n                                    <span>page : {{ currentPage }} / {{ last_page }} of {{ totalRows }} </span>\r\n                                    <b-button :disabled="adding == true || isEditing() == true" class="mr-1 mb-1" size="sm"\r\n                                        @click="OnAdd">\r\n                                        <b>Add</b></b-button>\r\n                                </b-col>\r\n                                <b-col sm="6" class="my-1">\r\n                                    <b-pagination :disabled="adding == true || isEditing() == true" ref="mypage"\r\n                                        v-model="currentPage" :total-rows="totalRows" :per-page="perPage" size="sm"\r\n                                        align="fill" @change="onChangePage" @input="onPagingInput" first-text="First"\r\n                                        prev-text="Prev" next-text="Next" last-text="Last">\r\n                                    </b-pagination>\r\n                                </b-col>\r\n                            </b-row>\r\n\r\n                        </td>\r\n                    </template>\r\n\r\n                    <template #row-details="row">\r\n                        <b-card>\r\n                            <ul>\r\n                                <li v-for="(value, key) in row.item" :key="key">{{ key }}: {{ value }}</li>\r\n                            </ul>\r\n                        </b-card>\r\n                    </template>\r\n                </b-table>\r\n\r\n            </form>\r\n            \x3c!-- Info modal --\x3e\r\n            <b-modal :id="infoModal.id" :title="infoModal.title" ok-only @hide="resetInfoModal">\r\n                <pre>{{ infoModal.content }}</pre>\r\n            </b-modal>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n\r\nimport VeeValidate from "vee-validate";\r\nimport Vue from "vue";\r\nVue.use(VeeValidate, {\r\n    classes: true,\r\n    fieldsBagName: \'veeFields\'\r\n});\r\n\r\nimport VueTypeaheadBootstrap from "vue-typeahead-bootstrap";\r\nimport { debounce } from "lodash";\r\n\r\nimport fetchClient from "@/fetchClient";\r\nimport TumLum from "@/TumLum";\r\n\r\nimport moment from "moment"\r\n\r\nimport HocSinhTblSubCom from \'@/views/LopHoc2/HocSinhTblSubCom.vue\';\r\n\r\nexport default {\r\n    components: {\r\n        VueTypeaheadBootstrap,\r\n        HocSinhTblSubCom\r\n    },\r\n    data() {\r\n        return {\r\n            items: [\r\n            ],\r\n            fields: [\r\n                {\r\n                    key: \'Id\',\r\n                    formatter: (value, key, item) => {\r\n                        return value;\r\n                    },\r\n                    sortable: true,\r\n                    thClass: \'text-center\',\r\n                    tdClass: \'text-center align-middle\',\r\n                    thStyle: { width: "8%" },\r\n                },\r\n                { key: \'TenLop\', sortable: true, thClass: \'text-center\', tdClass: \'align-middle\', thStyle: { width: "80%" }, },\r\n                {\r\n                    key: \'cmd\',\r\n                    class: \'text-center\',\r\n                    thClass: \'text-center\',\r\n                    tdClass: \'align-middle\',\r\n                    thStyle: { width: "12%" }\r\n                }\r\n            ],\r\n            totalRows: 1,\r\n            currentPage: 1,\r\n            perPage: 5,\r\n            pageOptions: [5, 10, 15, { value: 100, text: "Show a lot" }],\r\n            sortBy: \'\',\r\n            sortDesc: false,\r\n            sortDirection: \'asc\',\r\n            filter: null,\r\n            filterOn: [],\r\n            infoModal: {\r\n                id: \'info-modal\',\r\n                title: \'\',\r\n                content: \'\'\r\n            },\r\n            sel: {},\r\n            sel2: {},\r\n            pri: "Id",\r\n            last_page: 0,\r\n            adding: false,\r\n            ListAuto: [],\r\n\r\n            title: "hello title"\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        last_page: function (newValue, oldValue) {\r\n        },\r\n        currentPage: function (val) {\r\n        },\r\n        totalRows: function (newValue, oldValue) {\r\n        }\r\n    },\r\n    computed: {\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n\r\n        OnSearch: debounce(function (query) {\r\n            fetch(`/api/Ban/AutoComplete?q=${query}`)\r\n                .then((response) => {\r\n                    return response.json();\r\n                })\r\n                .then((data) => {\r\n                    console.log(JSON.stringify(data))\r\n                    this.ListAuto = data.items;\r\n                });\r\n        }, 500),\r\n        onPagingInput() {\r\n        },\r\n        myProvider(ctx) {\r\n            let currentPage = ctx.currentPage;\r\n            let perPage = ctx.perPage;\r\n            let sortBy = ctx.sortBy;\r\n            let sortDesc = ctx.sortDesc;\r\n            let vm = this;\r\n            let url = `/api/LopHoc4/GetPage2`;\r\n            url = `${url}?page=${currentPage}&size=${perPage}&sortBy=${sortBy}&sortDesc=${sortDesc}`;\r\n            if (ctx.filter) {\r\n                let filter = ctx.filter;\r\n                url = `${url}&filter=${filter}`;\r\n            }\r\n            return fetchClient.get(url)\r\n                .then(res => {\r\n                    vm.last_page = res.data.last_page;\r\n                    vm.totalRows = res.data.rowCount;\r\n                    vm.items = res.data.data;\r\n                    if (this.adding == true) {\r\n                        let r = {};\r\n                        r[this.pri] = 0;\r\n                        r["TenKhach"] = "xxx";\r\n                        r["Ngay"] = new Date();\r\n                        res.data.data.unshift(r);\r\n                    }\r\n                    return vm.mapData(res.data.data); //res.data.data;\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n\r\n\r\n\r\n        },\r\n        mapData(data) {\r\n            let kq = [];\r\n            data.forEach(obj => {\r\n                let x = {};\r\n                Object.keys(obj).forEach(key => {\r\n                    let k = key;\r\n                    x[k] = obj[key];\r\n                });\r\n                kq.push(x);\r\n            })\r\n            return kq;\r\n        },\r\n        onChangePage() {\r\n            this.sel = {};\r\n            this.adding = false;\r\n        },\r\n        OnAdd() {\r\n            this.sel2 = {\r\n                Id: 0,\r\n                TenLop: "sfsfsf"\r\n            }\r\n            this.showModal();\r\n        },\r\n        OnEdit(item) {\r\n            if (JSON.stringify(this.sel) != "{}" || this.adding == true) {\r\n                return;\r\n            }\r\n            /*\r\n            this.sel2 = JSON.parse(JSON.stringify(item));\r\n            this.showModal();\r\n            */\r\n            this.getById(item[this.pri]);\r\n        },\r\n        onSaveModal() {\r\n            this.$validator.validateAll().then((result) => {\r\n                if (!result) {\r\n                    this.toast("Không hợp lệ");\r\n                    return;\r\n                }\r\n                let r = JSON.parse(JSON.stringify(this.sel2));\r\n                let List = this.$refs.sub.Lds();\r\n                let model = {\r\n                    Id: r.Id,\r\n                    TenLop: r.TenLop,\r\n                    Sub: List\r\n                }\r\n                if (r[this.pri] == 0) {\r\n                    //this.Add(r);\r\n                    this.AddSub(model);\r\n                } else {\r\n                    //this.Update(r);\r\n                    this.UpdateSub(model);\r\n                }\r\n            });\r\n        },\r\n        onSave(item) {\r\n            this.$validator.validateAll().then((result) => {\r\n                if (!result) {\r\n                    this.toast("Không hợp lệ");\r\n                    return;\r\n                }\r\n                let r = JSON.parse(JSON.stringify(item));\r\n                if (r[this.pri] == 0) {\r\n                    this.Add(r).then(res => {\r\n                        if (res.data.kq == \'ok\') {\r\n                            this.toast(`${res.data.msg}`);\r\n                            this.adding = false;\r\n                            this.$refs.mytable.refresh();\r\n                        }\r\n                    })\r\n                } else {\r\n                    //tien hanh sua\r\n                    this.Update(r).then(res => {\r\n                        this.toast(`${res.data.msg}`);\r\n                        this.adding = false;\r\n                        this.sel = {};\r\n                        this.$refs.mytable.refresh();\r\n                    })\r\n                }\r\n            });\r\n        },\r\n        OnCancel(item) {\r\n            if (item[this.pri] != 0) {\r\n                this.doCancel(item);\r\n                this.sel = {};\r\n            } else {\r\n                this.adding = false;\r\n                this.$refs.mytable.refresh();\r\n            }\r\n        },\r\n        OnDel(item) {\r\n            this.Del(item[this.pri]).then(res => {\r\n                if (res.data.kq == \'nook\') {\r\n                    this.toast(`${res.data.msg}`);\r\n                    return;\r\n                }\r\n                this.toast(`${res.data.msg}`);\r\n                let lastPage = this.getLastPage(this.totalRows - 1);\r\n                if (lastPage < this.currentPage) this.currentPage = lastPage;\r\n                this.$refs.mytable.refresh();\r\n            })\r\n        },\r\n        delRow(item) {\r\n            let id = item.id;\r\n            let index = this.items.findIndex(x => x.id == id);\r\n            this.items.splice(index, 1);\r\n        },\r\n        isEditing() {\r\n            return JSON.stringify(this.sel) != "{}"\r\n        },\r\n        isAdded() {\r\n            let kq = false;\r\n            this.items.forEach(x => {\r\n                if (x.id == 0) kq = true;\r\n            })\r\n            return kq;\r\n        },\r\n        doCancel(item) {\r\n            for (let key in item) {\r\n                if (item[key] != this.sel[key]) {\r\n                    item[key] = this.sel[key]\r\n                }\r\n            }\r\n        },\r\n        getLastPage(count) {\r\n            let pageSize = this.perPage;//this.tabulator.getPageSize();\r\n            let du = count % pageSize;\r\n            return du == 0 ? count / pageSize : (count - du) / pageSize + 1;\r\n        },\r\n        gotoPage(page) {\r\n            this.currentPage = page;\r\n            this.$refs.mytable.refresh();\r\n        },\r\n        toast(msg, variant = null) {\r\n            this.$bvToast.toast(msg, {\r\n                title: `Information`,\r\n                variant: variant,\r\n                solid: true,\r\n            });\r\n        },\r\n        async Add(r) {\r\n            return await fetchClient.post(`/api/LopHoc4/Add`, r)\r\n                .then(res => {\r\n                    this.toast(`${res.data.msg}`);\r\n                    this.hideModal();\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async AddSub(r) {\r\n            return await fetchClient.post(`/api/LopHoc4/AddSub`, r)\r\n                .then(res => {\r\n                    this.toast(`${JSON.stringify(res.data.msg)}`);\r\n                    this.hideModal();\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async Update(r) {\r\n            return await fetchClient.post(`/api/LopHoc4/Update`, r)\r\n                .then(res => {\r\n                    this.hideModal();\r\n                    this.toast(`${res.data.msg}`)\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async UpdateSub(r) {\r\n            return await fetchClient.post(`/api/LopHoc4/UpdateSub`, r)\r\n                .then(res => {\r\n                    this.hideModal();\r\n                    this.toast(`${JSON.stringify(res.data.msg)}`)\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async Del(id) {\r\n            return await fetchClient.get(`/api/LopHoc4/Delete?id=${id}`)\r\n                .then(res => {\r\n                    this.toast(`${res.data.msg}`)\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async getById(id) {\r\n            return await fetchClient.get(`/api/LopHoc4/GetById?id=${id}`)\r\n                .then(res => {\r\n                    this.sel2 = res.data;\r\n                    this.showModal();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        info(item, index, button) {\r\n            this.infoModal.title = `Row index: ${index}`\r\n            this.infoModal.content = JSON.stringify(item, null, 2)\r\n            this.$root.$emit(\'bv::show::modal\', this.infoModal.id, button)\r\n        },\r\n        resetInfoModal() {\r\n            this.infoModal.title = \'\'\r\n            this.infoModal.content = \'\'\r\n        },\r\n        onFiltered(filteredItems) {\r\n            this.totalRows = filteredItems.length\r\n            this.currentPage = 1\r\n        },\r\n        showModal() {\r\n            this.$refs["my-modal"].show();\r\n        },\r\n        hideModal() {\r\n            this.$refs["my-modal"].hide();\r\n        },\r\n    }\r\n}\r\n<\/script>\r\n  \r\n  '},11678:function(t,e,r){"use strict";r(41539),r(54747),r(38862),r(34553),r(47941),r(40561);e["Z"]={data:function(){return{pri:"Id",ds1:[]}},created:function(){},methods:{SetPri:function(t){this.pri=t},SetDs:function(t){var e=this;this.ds1=[],t.forEach((function(t){var r=JSON.parse(JSON.stringify(t));r.Note="",e.ds1.push(r)}))},Lds:function(){return this.ds1},createId:function(){var t=this,e=0;return this.ds1.forEach((function(r){r[t.pri]>e&&(e=r[t.pri])})),e+1},Add:function(t){var e=JSON.parse(JSON.stringify(t));e.Note="new",this.ds1.push(e)},Find:function(t){var e=this,r=this.ds1.findIndex((function(r){return r[e.pri]==t}));return r>=0?this.ds1[r]:null},Update:function(t){var e=this,r=this.Find(t[this.pri]);if(null!=r){var n=JSON.parse(JSON.stringify(r)),i=Object.keys(t);i.forEach((function(e){n[e]=t[e]})),""==n.Note&&(n.Note="edit");var s=this.ds1.findIndex((function(t){return t[e.pri]==n[e.pri]}));this.ds1[s]=n}},Del:function(t){var e=this,r=t[this.pri],n=this.Find(r);if(null!=n){var i=this.ds1.findIndex((function(t){return t[e.pri]==r}));"new"==n.Note?this.ds1.splice(i,1):(n.Note="del",this.ds1[i]=n)}}}}},53009:function(t,e,r){"use strict";r(38862);e["Z"]={XuLyErr:function(t){var e=JSON.parse(JSON.stringify(t)).status;if(400==e){var r=JSON.parse(JSON.stringify(t.response)).data.message;alert(r)}else t.response?401==t.response.status?alert("Chưa đăng nhập hoặc token hết hạn"):403==t.response.status&&alert("Bạn ko có quyền"):t.request?alert(JSON.stringify(t.request)):t.message&&alert(JSON.stringify(t.message))}}},70790:function(t,e,r){"use strict";var n=r(9669),i=r.n(n),s=function(){var t={baseURL:"",method:"get",headers:{"Content-Type":"application/json;charset=utf-8"}},e=i().create(t);return e.interceptors.request.use((function(t){var e=localStorage.getItem("token");return t.headers.Authorization=e?"Bearer ".concat(e):"",t})),e};e["Z"]=s()}}]);
//# sourceMappingURL=9758-legacy.ce5272d2.js.map