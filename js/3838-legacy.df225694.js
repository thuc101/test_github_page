"use strict";(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[3838],{3838:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var n,i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("raw-loader",{attrs:{mytxt:r(63790).Z}}),n("h5",[e._v("This is BTable Simple")]),n("div",[e._v(e._s(e.sel))]),n("button",{on:{click:e.OnAdd}},[e._v("Add")]),n("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.onSave.apply(null,arguments)}}},[n("b-table",{ref:"mytable",attrs:{small:"",items:e.myProvider,fields:e.fields},scopedSlots:e._u([{key:"cell()",fn:function(t){var r=t.value,i=t.item,a=t.field.key;return[e.sel[e.pri]!=i[e.pri]?[0!=i[e.pri]?[a==e.pri?[e._v(" "+e._s(r)+" ")]:e._e(),"TenHocSinh"==a?[e._v(" "+e._s(r)+" ")]:e._e(),"NamSinh"==a?[e._v(" "+e._s(r)+" ")]:e._e(),"LopHocId"==a?[e._v(" "+e._s(r)+" ")]:e._e()]:e._e()]:e._e(),e.sel[e.pri]==i[e.pri]||0==i[e.pri]?[a==e.pri?[n("span",[e._v(e._s(r))])]:e._e(),"TenHocSinh"==a?[n("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"ko-hop-le":e.errors.has(a)},attrs:{autocomplete:"off",name:a,placeholder:""},model:{value:i[a],callback:function(t){e.$set(i,a,t)},expression:"item[key]"}})]:e._e(),"NamSinh"==a?[n("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"ko-hop-le":e.errors.has(a)},attrs:{autocomplete:"off",name:a,placeholder:""},model:{value:i[a],callback:function(t){e.$set(i,a,t)},expression:"item[key]"}})]:e._e(),"LopHocId"==a?[n("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"ko-hop-le":e.errors.has(a)},attrs:{autocomplete:"off",name:a,placeholder:""},model:{value:i[a],callback:function(t){e.$set(i,a,t)},expression:"item[key]"}})]:e._e()]:e._e()]}},{key:"cell(cmd)",fn:function(t){return[0==t.item[e.pri]?[n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnSave(t.item)}}},[n("b-icon-hand-thumbs-up")],1),n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnCancel(t.item)}}},[n("b-icon-file-x")],1)]:[e.sel[e.pri]!=t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnEdit(t.item)}}},[n("b-icon-pencil-square")],1):e._e(),e.sel[e.pri]!=t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnDel(t.item)}}},[n("b-icon-trash")],1):e._e(),e.sel[e.pri]==t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnSave(t.item)}}},[n("b-icon-hand-thumbs-up")],1):e._e(),e.sel[e.pri]==t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnCancel(t.item)}}},[n("b-icon-file-x")],1):e._e()]]}}])})],1)],1)},a=[],s=r(23796),l=r(77673),o=r(16198),u=(r(34553),r(40561),r(38862),r(92222),r(12954)),c=r(20144),d=r(19938),m=r.n(d),h=r(53009),f=r(70790);c["default"].use(u.ZP,{classes:!0,fieldsBagName:"veeFields"}),c["default"].component("v-select",m());var p=(n={props:["ds1"],components:{},mounted:function(){},data:function(){return{pri:"Id",sel:{},adding:!1,url:"/api/HocSinh4",items:[{Id:1,Ten:"thuc 101"},{Id:2,Ten:"thuc 102"},{Id:3,Ten:"thuc 103"},{Id:4,Ten:"thuc 104"}],fields:[{key:"Id",sortable:!0,thClass:"text-center",tdClass:"align-middle",thStyle:{width:"8%"}},{key:"TenHocSinh",sortable:!0,thClass:"text-left",tdClass:"align-middle",thStyle:{width:"50%"}},{key:"NamSinh",sortable:!0,thClass:"text-left",tdClass:"align-middle",thStyle:{width:"20%"}},{key:"LopHocId",sortable:!0,thClass:"text-left",tdClass:"align-middle",thStyle:{width:"10%"}},{key:"Cmd",sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"12%"}}]}}},(0,s.Z)(n,"mounted",(function(){})),(0,s.Z)(n,"methods",{myProvider:function(){var e=this,t="".concat(this.url,"/GetAll");return f.Z.get(t).then((function(t){if(1==e.adding){var r={};r[e.pri]=0,r["TenHocSinh"]="thuc",r["NamSinh"]=new Date,r["LopHocId"]=1,t.data.list.unshift(r)}return t.data.list}))},OnAdd:function(){this.adding=!0,this.$refs.mytable.refresh()},doCancel:function(e){for(var t in e)e[t]!=this.sel[t]&&(e[t]=this.sel[t])},OnCancel:function(e){var t=this;if(0==e[this.pri]){var r=this.items.findIndex((function(r){return r[t.pri]==e[t.pri]}));this.items.splice(r,1),this.adding=!1,this.$refs.mytable.refresh()}else this.doCancel(e),this.sel={}},OnEdit:function(e){this.sel=JSON.parse(JSON.stringify(e))},OnDel:function(e){this.Del(e[this.pri])},OnSave:function(e){var t=this;this.$validator.validateAll().then((function(r){if(r){var n=JSON.parse(JSON.stringify(e));0==n[t.pri]?t.Add(n):t.Update(n)}else t.toast("Không hợp lệ")}))},toast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$bvToast.toast(e,{title:"Information",variant:t,solid:!0})},Add:function(e){var t=this;return(0,o.Z)((0,l.Z)().mark((function r(){return(0,l.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,f.Z.post("".concat(t.url,"/Add"),e).then((function(e){t.toast("".concat(e.data.msg)),t.adding=!1,t.$refs.mytable.refresh()})).catch((function(e){h.Z.XuLyErr(e)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},Update:function(e){var t=this;return(0,o.Z)((0,l.Z)().mark((function r(){return(0,l.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,f.Z.post("".concat(t.url,"/Update"),e).then((function(e){alert(JSON.stringify(e)),t.sel={},t.$refs.mytable.refresh()})).catch((function(e){h.Z.XuLyErr(e)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},Del:function(e){var t=this;return(0,o.Z)((0,l.Z)().mark((function r(){return(0,l.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,f.Z.get("".concat(t.url,"/Delete?id=").concat(e)).then((function(e){t.$refs.mytable.refresh()})).catch((function(e){h.Z.XuLyErr(e)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},getById:function(e){var t=this;return(0,o.Z)((0,l.Z)().mark((function r(){return(0,l.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,f.Z.get("".concat(t.url,"/GetById?id=").concat(e)).then((function(e){alert(JSON.stringify(e))})).catch((function(e){h.Z.XuLyErr(e)}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()}}),n),v=p,b=r(1001),y=(0,b.Z)(v,i,a,!1,null,null,null),g=y.exports},92222:function(e,t,r){var n=r(82109),i=r(17854),a=r(47293),s=r(43157),l=r(70111),o=r(47908),u=r(26244),c=r(86135),d=r(65417),m=r(81194),h=r(5112),f=r(7392),p=h("isConcatSpreadable"),v=9007199254740991,b="Maximum allowed index exceeded",y=i.TypeError,g=f>=51||!a((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),k=m("concat"),S=function(e){if(!l(e))return!1;var t=e[p];return void 0!==t?!!t:s(e)},w=!g||!k;n({target:"Array",proto:!0,arity:1,forced:w},{concat:function(e){var t,r,n,i,a,s=o(this),l=d(s,0),m=0;for(t=-1,n=arguments.length;t<n;t++)if(a=-1===t?s:arguments[t],S(a)){if(i=u(a),m+i>v)throw y(b);for(r=0;r<i;r++,m++)r in a&&c(l,m,a[r])}else{if(m>=v)throw y(b);c(l,m++,a)}return l.length=m,l}})},34553:function(e,t,r){var n=r(82109),i=r(42092).findIndex,a=r(51223),s="findIndex",l=!0;s in[]&&Array(1)[s]((function(){l=!1})),n({target:"Array",proto:!0,forced:l},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a(s)},40561:function(e,t,r){var n=r(82109),i=r(17854),a=r(51400),s=r(19303),l=r(26244),o=r(47908),u=r(65417),c=r(86135),d=r(81194),m=d("splice"),h=i.TypeError,f=Math.max,p=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var r,n,i,d,m,y,g=o(this),k=l(g),S=a(e,k),w=arguments.length;if(0===w?r=n=0:1===w?(r=0,n=k-S):(r=w-2,n=p(f(s(t),0),k-S)),k+r-n>v)throw h(b);for(i=u(g,n),d=0;d<n;d++)m=S+d,m in g&&c(i,d,g[m]);if(i.length=n,r<n){for(d=S;d<k-n;d++)m=d+n,y=d+r,m in g?g[y]=g[m]:delete g[y];for(d=k;d>k-n+r;d--)delete g[d-1]}else if(r>n)for(d=k-n;d>S;d--)m=d+n-1,y=d+r-1,m in g?g[y]=g[m]:delete g[y];for(d=0;d<r;d++)g[d+S]=arguments[d+2];return g.length=k-n+r,i}})},63790:function(e,t){t["Z"]='<template>\r\n    <div>\r\n        <raw-loader :mytxt="require(\'!raw-loader!./HocSinhTblEditNoPaging.vue\').default"></raw-loader>\r\n        <h5>This is BTable Simple</h5>\r\n        <div>{{ sel }}</div>\r\n        <button @click="OnAdd">Add</button>\r\n        <form @submit.stop.prevent="onSave">\r\n            <b-table ref="mytable" small :items="myProvider" :fields="fields">\r\n                <template v-slot:cell()="{ value, item, field: { key } }">\r\n\r\n                    <template v-if="sel[pri] != item[pri]">\r\n                        <template v-if="item[pri] != 0">\r\n                            <template v-if="key == pri">\r\n                                {{ value }}\r\n                            </template>\r\n                            <template v-if="key == \'TenHocSinh\'">\r\n                                {{ value }}\r\n                            </template>\r\n                            <template v-if="key == \'NamSinh\'">\r\n                                {{ value }}\r\n                            </template>\r\n                            <template v-if="key == \'LopHocId\'">\r\n                                {{ value }}\r\n                            </template>\r\n\r\n\r\n                        </template>\r\n                    </template>\r\n                    <template v-if="(sel[pri] == item[pri] || item[pri] == 0)">\r\n                        <template v-if="key == pri">\r\n                            <span>{{ value }}</span>\r\n                        </template>\r\n                        <template v-if="key == \'TenHocSinh\'">\r\n                            <b-form-input autocomplete="off" v-model="item[key]" :name="key" v-validate="\'required\'"\r\n                                placeholder="" :class="{ \'ko-hop-le\': errors.has(key) }">\r\n                            </b-form-input>\r\n                        </template>\r\n                        <template v-if="key == \'NamSinh\'">\r\n                            <b-form-input autocomplete="off" v-model="item[key]" :name="key" v-validate="\'required\'"\r\n                                placeholder="" :class="{ \'ko-hop-le\': errors.has(key) }">\r\n                            </b-form-input>\r\n                        </template>\r\n                        <template v-if="key == \'LopHocId\'">\r\n                            <b-form-input autocomplete="off" v-model="item[key]" :name="key" v-validate="\'required\'"\r\n                                placeholder="" :class="{ \'ko-hop-le\': errors.has(key) }">\r\n                            </b-form-input>\r\n                        </template>\r\n                    </template>\r\n                </template>\r\n                <template #cell(cmd)="row">\r\n                    <template v-if="row.item[pri] == 0">\r\n                        <b-button variant="outline" class="mr-1" size="sm" @click="OnSave(row.item)">\r\n                            <b-icon-hand-thumbs-up></b-icon-hand-thumbs-up>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" size="sm" @click="OnCancel(row.item)">\r\n                            <b-icon-file-x></b-icon-file-x>\r\n                        </b-button>\r\n                    </template>\r\n\r\n                    <template v-else>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] != row.item[pri]" size="sm"\r\n                            @click="OnEdit(row.item)">\r\n                            <b-icon-pencil-square></b-icon-pencil-square>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] != row.item[pri]" size="sm"\r\n                            @click="OnDel(row.item)">\r\n                            <b-icon-trash></b-icon-trash>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] == row.item[pri]" size="sm"\r\n                            @click="OnSave(row.item)">\r\n                            <b-icon-hand-thumbs-up></b-icon-hand-thumbs-up>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] == row.item[pri]" size="sm"\r\n                            @click="OnCancel(row.item)">\r\n                            <b-icon-file-x></b-icon-file-x>\r\n                        </b-button>\r\n                    </template>\r\n                </template>\r\n            </b-table>\r\n        </form>\r\n    </div>\r\n</template>\r\n<script>\r\n\r\nimport VeeValidate from "vee-validate";\r\nimport Vue from "vue";\r\nVue.use(VeeValidate, {\r\n    classes: true,\r\n    fieldsBagName: \'veeFields\'\r\n});\r\nimport vSelect from "vue-select";\r\nVue.component("v-select", vSelect);\r\n\r\n\r\nimport TumLum from \'@/TumLum\';\r\nimport fetchClient from \'@/fetchClient\';\r\n\r\n\r\nexport default {\r\n    props: ["ds1"],\r\n    components: {\r\n    },\r\n    mounted() {\r\n    },\r\n    data() {\r\n        return {\r\n            pri: "Id",\r\n            sel: {},\r\n            adding: false,\r\n            url: `/api/HocSinh4`,\r\n            items: [\r\n                { Id: 1, Ten: "thuc 101" },\r\n                { Id: 2, Ten: "thuc 102" },\r\n                { Id: 3, Ten: "thuc 103" },\r\n                { Id: 4, Ten: "thuc 104" },\r\n            ],\r\n            fields: [\r\n                { key: \'Id\', sortable: true, thClass: \'text-center\', tdClass: \'align-middle\', thStyle: { width: "8%" } },\r\n                //{ key: \'ClaimType\', sortable: true, thClass: \'text-left\', tdClass: \'align-middle\', thStyle: { width: "80%" } },\r\n                { key: \'TenHocSinh\', sortable: true, thClass: \'text-left\', tdClass: \'align-middle\', thStyle: { width: "50%" } },\r\n                { key: \'NamSinh\', sortable: true, thClass: \'text-left\', tdClass: \'align-middle\', thStyle: { width: "20%" } },\r\n                { key: \'LopHocId\', sortable: true, thClass: \'text-left\', tdClass: \'align-middle\', thStyle: { width: "10%" } },\r\n                { key: \'Cmd\', sortable: true, thClass: \'text-center\', tdClass: \'align-middle text-center\', thStyle: { width: "12%" } },\r\n            ]\r\n        }\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n        myProvider() {\r\n            let vm = this;\r\n            let url = `${this.url}/GetAll`;\r\n            return fetchClient.get(url)\r\n                .then(res => {\r\n\r\n                    if (this.adding == true) {\r\n                        let r = {};\r\n                        r[this.pri] = 0;\r\n                        r["TenHocSinh"] = "thuc";\r\n                        r["NamSinh"] = new Date();\r\n                        r["LopHocId"] = 1;\r\n                        res.data.list.unshift(r);\r\n                    }\r\n                    return res.data.list;\r\n                })\r\n        },\r\n        OnAdd() {\r\n            this.adding = true;\r\n            this.$refs.mytable.refresh();\r\n        },\r\n        doCancel(item) {\r\n            for (let key in item) {\r\n                if (item[key] != this.sel[key]) {\r\n                    item[key] = this.sel[key]\r\n                }\r\n            }\r\n        },\r\n        OnCancel(item) {\r\n            if (item[this.pri] == 0) {\r\n                let index = this.items.findIndex(x => x[this.pri] == item[this.pri]);\r\n                this.items.splice(index, 1);\r\n                this.adding = false;\r\n                this.$refs.mytable.refresh();\r\n            } else {\r\n                this.doCancel(item);\r\n                this.sel = {};\r\n            }\r\n        },\r\n        OnEdit(item) {\r\n            this.sel = JSON.parse(JSON.stringify(item));\r\n        },\r\n        OnDel(item) {\r\n            this.Del(item[this.pri]);\r\n        },\r\n        OnSave(item) {\r\n            this.$validator.validateAll().then((result) => {\r\n                if (!result) {\r\n                    this.toast("Không hợp lệ");\r\n                    return;\r\n                }\r\n                let r = JSON.parse(JSON.stringify(item));\r\n                if (r[this.pri] == 0) {\r\n                    this.Add(r);\r\n                } else {\r\n                    this.Update(r);\r\n                }\r\n            });\r\n        },\r\n        toast(msg, variant = null) {\r\n            this.$bvToast.toast(msg, {\r\n                title: `Information`,\r\n                variant: variant,\r\n                solid: true,\r\n            });\r\n        },\r\n        async Add(r) {\r\n            return await fetchClient.post(`${this.url}/Add`, r)\r\n                .then(res => {\r\n                    this.toast(`${res.data.msg}`);\r\n                    this.adding = false;\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async Update(r) {\r\n            return await fetchClient.post(`${this.url}/Update`, r)\r\n                .then(res => {\r\n                    alert(JSON.stringify(res));\r\n                    this.sel = {};\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async Del(id) {\r\n            return await fetchClient.get(`${this.url}/Delete?id=${id}`)\r\n                .then(res => {\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async getById(id) {\r\n            return await fetchClient.get(`${this.url}/GetById?id=${id}`)\r\n                .then(res => {\r\n                    alert(JSON.stringify(res));\r\n\r\n                    //this.sel=res.data\r\n                    //alert(JSON.stringify(res));\r\n\r\n                    //{"data":{"Id":1003,"TenHocSinh":"Võ Tòng","NamSinh":"2023-02-26T00:00:00","LopHocId":1029},"statu\r\n                    //this.sel = JSON.parse(JSON.stringify(item));\r\n\r\n                    // this.sel2 = res.data;\r\n                    // this.showModal();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n\r\n\r\n\r\n    }\r\n}\r\n<\/script>\r\n  '},53009:function(e,t,r){r(38862);t["Z"]={XuLyErr:function(e){var t=JSON.parse(JSON.stringify(e)).status;if(400==t){var r=JSON.parse(JSON.stringify(e.response)).data.message;alert(r)}else e.response?401==e.response.status?alert("Chưa đăng nhập hoặc token hết hạn"):403==e.response.status&&alert("Bạn ko có quyền"):e.request?alert(JSON.stringify(e.request)):e.message&&alert(JSON.stringify(e.message))}}},70790:function(e,t,r){var n=r(9669),i=r.n(n),a=function(){var e={baseURL:"",method:"get",headers:{"Content-Type":"application/json;charset=utf-8"}},t=i().create(e);return t.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.Authorization=t?"Bearer ".concat(t):"",e})),t};t["Z"]=a()},23796:function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return n}})}}]);
//# sourceMappingURL=3838-legacy.df225694.js.map