(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[5644],{35644:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return f}});var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{fluid:""}},[s("raw-loader",{attrs:{mytxt:n(63535).Z}}),s("b-table",{attrs:{items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,stacked:"md","show-empty":"",small:"",fixed:"",outlined:"",bordered:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(cmd)",fn:function(e){return[s("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.OnEditModal(e.item)}}},[s("b-icon-pencil-square")],1),s("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.OnDel(e.item)}}},[s("b-icon-trash")],1)]}},{key:"bottom-row",fn:function(e){return[s("td",{attrs:{colspan:e.columns}},[s("b-row",[s("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[s("b-input-group",{attrs:{size:"sm"}},[s("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),s("b-input-group-append",[s("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Per page","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm"}},[s("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),s("b-col",{staticClass:"my-1 text-right",attrs:{sm:"6"}},[t._v(" page :"+t._s(t.currentPage)+" / "+t._s(t.getLastPage(t.totalRows))+" of "+t._s(t.totalRows)+" "),s("b-button",{attrs:{size:"sm"},on:{click:t.OnAddModal}},[s("b",[t._v("Add")])])],1),s("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)]}}])}),s("b-modal",{ref:"my-modal",attrs:{size:"sm","no-close-on-backdrop":!0,"hide-footer":"",title:0==t.sel[t.pri]?"form Add":"form Edit"}},[s("div",{staticClass:"d-block"},[s("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSaveModal.apply(null,arguments)}}},[s("div",{staticClass:"text-right"},[t._l(t.sel,(function(e,n){return s("div",{key:n,staticClass:"form-group row"},[n==t.pri?[s("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Id")]),s("div",{staticClass:"col-sm-8"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sel[n],expression:"sel[k]"}],class:{"form-control":!0,"ko-hop-le":t.errors.has(n)},attrs:{readonly:!0,name:n,type:"text"},domProps:{value:t.sel[n]},on:{input:function(e){e.target.composing||t.$set(t.sel,n,e.target.value)}}})])]:t._e(),"name"==n?[s("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Name")]),s("div",{staticClass:"col-sm-8"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sel[n],expression:"sel[k]"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"ko-hop-le":t.errors.has(n)},attrs:{name:n,autocomplete:"off",type:"text"},domProps:{value:t.sel[n]},on:{input:function(e){e.target.composing||t.$set(t.sel,n,e.target.value)}}})])]:t._e()],2)})),s("button",{staticClass:"btn mr-1",attrs:{type:"submit"}},[t._v("Save")]),s("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return t.hideModal()}}},[t._v("Cancel")])],2)])])])],1)},i=[],l=(n(41539),n(39714),n(21249),n(57327),n(54747),n(34553),n(40561),n(38862),n(12954)),o=n(20144),a=(n(30381),n(19938)),r=n.n(a);o["default"].use(l.ZP,{classes:!0,fieldsBagName:"veeFields"}),o["default"].component("v-select",r());var c={data:function(){return{items:[],fields:[{key:"id",formatter:function(t,e,n){var s=t.toString();return s.length<4?s:s.substring(0,4)+"..."},sortable:!0,thClass:"text-center",tdClass:"text-center align-middle",thStyle:{width:"10%"}},{key:"name",sortable:!0,thClass:"text-center",tdClass:"align-middle",thStyle:{width:"80%"}},{key:"cmd",class:"text-center",thClass:"text-center",tdClass:"align-middle",thStyle:{width:"10%"}}],totalRows:1,currentPage:1,perPage:3,pageOptions:[3,5,10,15,{value:100,text:"Show a lot"}],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},sel:{},pri:"id",title:"Hi modal"}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},mounted:function(){for(var t=[],e=1;e<5;e++)t.push({id:e,name:"thuc ".concat(e)});this.items=t,this.totalRows=this.items.length},methods:{createId:function(){var t=this,e=0;return this.items.forEach((function(n){n[t.pri]>e&&(e=n[t.pri])})),e+1},OnDel:function(t){this.delRow(t)},delRow:function(t){var e=this,n=t[this.pri],s=this.items.findIndex((function(t){return t[e.pri]==n}));this.items.splice(s,1),this.totalRows=this.items.length,this.lastPage=this.getLastPage(this.totalRows)},OnEditModal:function(t){this.sel=JSON.parse(JSON.stringify(t)),this.showModal()},onSaveModal:function(){var t=this;this.$validator.validateAll().then((function(e){if(e){var n=JSON.parse(JSON.stringify(t.sel));if(0==n[t.pri])n[t.pri]=t.createId(),t.items.push(n),t.totalRows=t.items.length;else{var s=t.items.findIndex((function(e){return e[t.pri]==n[t.pri]}));t.$set(t.items,s,n)}t.hideModal()}else t.toast("Không hợp lệ")}))},OnAddModal:function(){this.sel={id:0,name:"Thức"},this.showModal()},getLastPage:function(t){var e=this.perPage,n=t%e;return 0==n?t/e:(t-n)/e+1},info:function(t,e,n){this.infoModal.title="Row index: ".concat(e),this.infoModal.content=JSON.stringify(t,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,n)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},showModal:function(){this.$refs["my-modal"].show()},hideModal:function(){this.$refs["my-modal"].hide()}}},d=c,u=n(1001),m=(0,u.Z)(d,s,i,!1,null,null,null),f=m.exports},18533:function(t,e,n){"use strict";var s=n(42092).forEach,i=n(9341),l=i("forEach");t.exports=l?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},9341:function(t,e,n){"use strict";var s=n(47293);t.exports=function(t,e){var n=[][t];return!!n&&s((function(){n.call(null,e||function(){return 1},1)}))}},86135:function(t,e,n){"use strict";var s=n(34948),i=n(3070),l=n(79114);t.exports=function(t,e,n){var o=s(e);o in t?i.f(t,o,l(0,n)):t[o]=n}},67066:function(t,e,n){"use strict";var s=n(19670);t.exports=function(){var t=s(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},34706:function(t,e,n){var s=n(46916),i=n(92597),l=n(47976),o=n(67066),a=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in a||i(t,"flags")||!l(a,t)?e:s(o,t)}},21249:function(t,e,n){"use strict";var s=n(82109),i=n(42092).map,l=n(81194),o=l("map");s({target:"Array",proto:!0,forced:!o},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},40561:function(t,e,n){"use strict";var s=n(82109),i=n(17854),l=n(51400),o=n(19303),a=n(26244),r=n(47908),c=n(65417),d=n(86135),u=n(81194),m=u("splice"),f=i.TypeError,p=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!m},{splice:function(t,e){var n,s,i,u,m,v,y=r(this),x=a(y),w=l(t,x),k=arguments.length;if(0===k?n=s=0:1===k?(n=0,s=x-w):(n=k-2,s=h(p(o(e),0),x-w)),x+n-s>b)throw f(g);for(i=c(y,s),u=0;u<s;u++)m=w+u,m in y&&d(i,u,y[m]);if(i.length=s,n<s){for(u=w;u<x-s;u++)m=u+s,v=u+n,m in y?y[v]=y[m]:delete y[v];for(u=x;u>x-s+n;u--)delete y[u-1]}else if(n>s)for(u=x-s;u>w;u--)m=u+s-1,v=u+n-1,m in y?y[v]=y[m]:delete y[v];for(u=0;u<n;u++)y[u+w]=arguments[u+2];return y.length=x-s+n,i}})},39714:function(t,e,n){"use strict";var s=n(76530).PROPER,i=n(98052),l=n(19670),o=n(41340),a=n(47293),r=n(34706),c="toString",d=RegExp.prototype,u=d[c],m=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=s&&u.name!=c;(m||f)&&i(RegExp.prototype,c,(function(){var t=l(this),e=o(t.source),n=o(r(t));return"/"+e+"/"+n}),{unsafe:!0})},54747:function(t,e,n){var s=n(17854),i=n(48324),l=n(98509),o=n(18533),a=n(68880),r=function(t){if(t&&t.forEach!==o)try{a(t,"forEach",o)}catch(e){t.forEach=o}};for(var c in i)i[c]&&r(s[c]&&s[c].prototype);r(l)},63535:function(t,e){"use strict";e["Z"]='<template>\n  <b-container fluid>\n    <raw-loader :mytxt="require(\'!raw-loader!./BasicBsModal.vue\').default"></raw-loader>\n    <b-table :items="items" :fields="fields" :current-page="currentPage" :per-page="perPage" :filter="filter"\n      :filter-included-fields="filterOn" :sort-by.sync="sortBy" :sort-desc.sync="sortDesc"\n      :sort-direction="sortDirection" stacked="md" show-empty small fixed outlined bordered @filtered="onFiltered">\n      <template #cell(cmd)="row">\n        <b-button variant="outline" class="mr-1" size="sm" @click="OnEditModal(row.item)">\n          <b-icon-pencil-square></b-icon-pencil-square>\n        </b-button>\n        <b-button variant="outline" class="mr-1" size="sm" @click="OnDel(row.item)">\n          <b-icon-trash></b-icon-trash>\n        </b-button>\n      </template>\n      <template #bottom-row="data">\n        <td :colspan="data.columns">\n          <b-row>\n            <b-col sm="6" class="my-1">\n              <b-form-group label="Filter" label-for="filter-input" label-cols-sm="3" label-align-sm="right"\n                label-size="sm" class="mb-0">\n                <b-input-group size="sm">\n                  <b-form-input id="filter-input" v-model="filter" type="search"\n                    placeholder="Type to Search"></b-form-input>\n\n                  <b-input-group-append>\n                    <b-button :disabled="!filter" @click="filter = \'\'">Clear</b-button>\n                  </b-input-group-append>\n                </b-input-group>\n              </b-form-group>\n            </b-col>\n            <b-col sm="6" class="my-1">\n              <b-form-group label="Per page" label-for="per-page-select" label-cols-sm="6" label-cols-md="4"\n                label-cols-lg="3" label-align-sm="right" label-size="sm" class="mb-0">\n                <b-form-select id="per-page-select" v-model="perPage" :options="pageOptions" size="sm"></b-form-select>\n              </b-form-group>\n\n            </b-col>\n            <b-col sm="6" class="my-1 text-right">\n              page :{{ currentPage }} / {{ getLastPage(totalRows) }} of {{ totalRows }}\n              <b-button @click="OnAddModal" size="sm"><b>Add</b></b-button>\n            </b-col>\n            <b-col sm="6" class="my-1">\n              <b-pagination v-model="currentPage" :total-rows="totalRows" :per-page="perPage" align="fill" size="sm"\n                class="my-0"></b-pagination>\n            </b-col>\n          </b-row>\n\n        </td>\n      </template>\n\n    </b-table>\n    \x3c!-- Info modal --\x3e\n    <b-modal ref="my-modal" size="sm" :no-close-on-backdrop="true" hide-footer\n      :title="(sel[pri] == 0) ? \'form Add\' : \'form Edit\'">\n      <div class="d-block">\n        <form @submit.stop.prevent="onSaveModal">\n          <div class="text-right">\n            <div class="form-group row" v-for="(v, k) in sel" :key="k">\n              <template v-if="(k == pri)">\n                <label class="col-sm-4 col-form-label">Id</label>\n                <div class="col-sm-8">\n                  <input :readonly="true" :name="k" v-model="sel[k]" :class="{\n                    \'form-control\': true,\n                    \'ko-hop-le\': errors.has(k),\n                  }" type="text" />\n                </div>\n              </template>\n              <template v-if="k == \'name\'">\n                <label class="col-sm-4 col-form-label">Name</label>\n                <div class="col-sm-8">\n                  <input :name="k" v-model="sel[k]" autocomplete="off" :class="{\n                    \'form-control\': true,\n                    \'ko-hop-le\': errors.has(k),\n                  }" type="text" v-validate="\'required\'" />\n                </div>\n              </template>\n            </div>\n            <button type="submit" class="btn mr-1">Save</button>\n            <button type="button" class="btn" @click="hideModal()">Cancel</button>\n          </div>\n        </form>\n      </div>\n    </b-modal>\n  </b-container>\n</template>\n<script>\n\nimport VeeValidate from "vee-validate";\nimport Vue from "vue";\nVue.use(VeeValidate, {\n  classes: true,\n  fieldsBagName: \'veeFields\'\n});\n\nimport moment from "moment";\n\nimport vSelect from "vue-select";\nVue.component("v-select", vSelect);\n//import "vue-select/dist/vue-select.css";\n\nexport default {\n  data() {\n    return {\n      items: [\n      ],\n      fields: [\n        {\n          key: \'id\',\n          formatter: (value, key, item) => {\n            let text = value.toString();\n            return (text.length < 4) ? text : text.substring(0, 4) + "...";\n          },\n          sortable: true,\n          thClass: \'text-center\',\n          tdClass: \'text-center align-middle\',\n          //tdClass: \'align-middle\'\n          thStyle: { width: "10%" },\n        },\n        { key: \'name\', sortable: true, thClass: \'text-center\', tdClass: \'align-middle\', thStyle: { width: "80%" } },\n        {\n          key: \'cmd\',\n          class: \'text-center\',\n          thClass: \'text-center\',\n          tdClass: \'align-middle\',\n          thStyle: { width: "10%" }\n        }\n      ],\n\n      totalRows: 1,\n      currentPage: 1,\n      perPage: 3,\n      pageOptions: [3, 5, 10, 15, { value: 100, text: "Show a lot" }],\n      sortBy: \'\',\n      sortDesc: false,\n      sortDirection: \'asc\',\n      filter: null,\n      filterOn: [],\n      infoModal: {\n        id: \'info-modal\',\n        title: \'\',\n        content: \'\'\n      },\n\n      sel: {},\n      pri: \'id\',\n      title: "Hi modal"\n\n    }\n  },\n  computed: {\n    sortOptions() {\n      // Create an options list from our fields\n      return this.fields\n        .filter(f => f.sortable)\n        .map(f => {\n          return { text: f.label, value: f.key }\n        })\n    }\n  },\n  mounted() {\n    let items = [\n    ];\n    for (var i = 1; i < 5; i++) {\n      items.push({\n        id: i,\n        name: `thuc ${i}`\n      })\n    }\n    this.items = items;\n    this.totalRows = this.items.length;\n  },\n  methods: {\n    createId(){\n      let max=0;\n      this.items.forEach(x=>{\n        if(x[this.pri] > max){\n          max=x[this.pri];\n        }\n      })\n      return max+1;\n    },\n    OnDel(item) {\n      this.delRow(item);\n    },\n    delRow(item) {\n      let id = item[this.pri];\n      let index = this.items.findIndex(x => x[this.pri] == id);\n      this.items.splice(index, 1);\n      this.totalRows = this.items.length;\n      this.lastPage = this.getLastPage(this.totalRows);\n    },\n    OnEditModal(item) {\n      this.sel = JSON.parse(JSON.stringify(item));\n      this.showModal();\n    },\n    onSaveModal() {\n      this.$validator.validateAll().then((result) => {\n        if (!result) {\n          this.toast("Không hợp lệ");\n          return;\n        }\n        let r = JSON.parse(JSON.stringify(this.sel));\n        if (r[this.pri] == 0) {\n          r[this.pri] = this.createId();//new Date().getTime();\n          this.items.push(r);\n          this.totalRows=this.items.length;\n        } else {\n          let index = this.items.findIndex(x => x[this.pri] == r[this.pri]);\n          this.$set(this.items, index, r);\n        }\n        this.hideModal();\n      });\n    },\n    OnAddModal(){\n      this.sel={\n        id: 0,\n        name: \'Thức\',\n      }\n      this.showModal();\n    },    \n    getLastPage(count) {\n      let pageSize = this.perPage;//this.tabulator.getPageSize();\n      let du = count % pageSize;\n      return du == 0 ? count / pageSize : (count - du) / pageSize + 1;\n    },\n    info(item, index, button) {\n      this.infoModal.title = `Row index: ${index}`\n      this.infoModal.content = JSON.stringify(item, null, 2)\n      this.$root.$emit(\'bv::show::modal\', this.infoModal.id, button)\n    },\n    resetInfoModal() {\n      this.infoModal.title = \'\'\n      this.infoModal.content = \'\'\n    },\n    onFiltered(filteredItems) {\n      // Trigger pagination to update the number of buttons/pages due to filtering\n      this.totalRows = filteredItems.length\n      this.currentPage = 1\n    },\n    showModal() {\n      this.$refs["my-modal"].show();\n    },\n    hideModal() {\n      this.$refs["my-modal"].hide();\n    },\n  }\n}\n<\/script>'}}]);
//# sourceMappingURL=5644-legacy.307b035b.js.map