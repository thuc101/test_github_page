(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[4598],{11099:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return v}});var a,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"MonHocToan"},[a("raw-loader",{attrs:{mytxt:n(8076).Z}}),a("h1",[t._v("Upload file page")]),a("a",{attrs:{href:"https://www.itsolutionstuff.com/post/file-upload-using-vue-js-axios-phpexample.html",target:"_blank"}},[t._v(" https://www.itsolutionstuff.com/post/file-upload-using-vue-js-axios-phpexample.html ")]),a("b-row",{staticClass:"mb-2 border-bottom mb-3"},t._l(t.ds,(function(e){return a("b-col",{key:e,attrs:{md:"1"}},[a("div",{staticClass:"border mb-2 position-relative bg-dark text-light",staticStyle:{height:"50px"}},[a("img",{attrs:{width:"100%",height:"50px",src:"/api/FileUpload/GetImage/"+e,alt:"Image 1"}}),a("span",{staticClass:"position-absolute",staticStyle:{right:"1px"}},[t._v("one")]),a("span",{staticClass:"position-absolute",staticStyle:{bottom:"1px",right:"1px"}},[a("button",{on:{click:function(n){return t.onDel(e)}}},[t._v("Del")])]),a("span",{staticClass:"position-absolute",staticStyle:{bottom:"1px",left:"1px"}}),a("span",{staticClass:"position-absolute",staticStyle:{top:"1px",left:"1px"}},[t._v("four")])])])})),1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 border-right"},[a("div",[t._v(t._s(t.listInfo))]),a("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onUpload.apply(null,arguments)}}},[a("img",{ref:"output",staticClass:"mb-1",attrs:{id:"output",width:"200",height:"110"}}),a("input",{ref:"file",staticClass:"m-1",attrs:{type:"file",id:"file"},on:{change:t.onFileChange}}),a("br"),null!=t.files&&t.files.length>0?a("div",[a("button",{staticClass:"mr-1",attrs:{type:"submit"}},[t._v("Upload")]),a("button",{staticClass:"mr-1",on:{click:t.onRemove}},[t._v("Remove")])]):t._e()])]),a("div",{staticClass:"col-sm-6 border-right bg-primary"},[a("ul",t._l(t.ds,(function(e){return a("li",{key:e},[t._v(" "+t._s(e)+" "),a("button",{on:{click:function(n){return t.onView(e)}}},[t._v("View img")])])})),0)]),a("div",{staticClass:"col-sm-2"},[a("div",[t._v(t._s(t.ds[0]))]),a("b-img",{attrs:{thumbnail:"",src:t.src,alt:"Image 1"}})],1)])],1)},s=[],r=n(23796),o=n(77673),l=n(16198),u=(n(68309),n(34553),n(41539),n(19755)),c=n.n(u),f=n(9669),p=n.n(f),d=(n(30381),{name:"Tpl",components:{},data:function(){return{files:null,listInfo:[],ds:[],src:""}},mounted:function(){var t=this;this.getListImg().then((function(e){t.ds=e.data}))},methods:(a={getListInfo:function(t){for(var e=[],n=0;n<t.length;n++){var a={name:t[n].name,lastModified:t[n].lastModified,size:t[n].size,type:t[n].type};e.push(a)}return e},onFileChange:function(){var t=this,e=["image/jpg","image/gif","image/png","image/jpeg"],n=this.$refs.file.files,a=e.findIndex((function(t){return t==n[0].type}));a>=0?alert("file hợp lệ"):alert("file khong hop le"),this.files=this.$refs.file.files,this.listInfo=this.getListInfo(this.$refs.file.files),this.getReadAsDataURL(this.files[0]).then((function(e){c()(t.$refs.output).attr("src",e)}))},onDel:function(t){var e=this;this.Del(t).then((function(t){e.loadListImg()}))},onView:function(t){var e=this;this.ReadImage(t).then((function(t){e.src="data:image/jpg;base64,".concat(t.data)}))},getReadAsDataURL:function(t){return new Promise((function(e,n){var a=new FileReader;a.onload=function(){e(a.result)},a.onerror=n,a.readAsDataURL(t)}))},onRemove:function(t){t.preventDefault(),c()(this.$refs.file).val(""),this.files=null,c()(this.$refs.output).attr("src","")},onUpload:function(){if(void 0!==window.FormData){var t=c()("#file").get(0),e=t.files;if(0==e.length)return void alert("thieu file");var n=new FormData;console.log(e[0]),n.append(e[0].name,e[0]),n.append("test","thuc 101");var a=this;c().ajax({url:"/api/FileUpload/Upload",type:"POST",contentType:!1,processData:!1,data:n,success:function(t){a.loadListImg(),a.files=null,c()("#output").attr("src","")},error:function(t){alert(t.statusText)}})}else alert("FormData is not supported.")},loadListImg:function(){var t=this;this.getListImg().then((function(e){t.ds=e.data}))},getListImg:function(){return(0,l.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p().get("/api/FileUpload/GetListFile").catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},ReadImage:function(t){return(0,l.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p().get("/api/FileUpload/ReadImage/".concat(t)).catch((function(t){console.log(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},GetImage:function(t){return(0,l.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p().get("/api/FileUpload/GetImage/".concat(t)).catch((function(t){console.log(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}},(0,r.Z)(a,"ReadImage",(function(t){return(0,l.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p().get("/api/FileUpload/ReadImage/".concat(t)).catch((function(t){console.log(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()})),(0,r.Z)(a,"Del",(function(t){return(0,l.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p().get("/api/FileUpload/Del/".concat(t)).catch((function(t){console.log(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()})),a)}),m=d,h=n(1001),g=(0,h.Z)(m,i,s,!1,null,null,null),v=g.exports},38862:function(t,e,n){var a=n(82109),i=n(35005),s=n(22104),r=n(46916),o=n(1702),l=n(47293),u=n(43157),c=n(60614),f=n(70111),p=n(52190),d=n(50206),m=n(30133),h=i("JSON","stringify"),g=o(/./.exec),v=o("".charAt),b=o("".charCodeAt),x=o("".replace),w=o(1..toString),y=/[\uD800-\uDFFF]/g,I=/^[\uD800-\uDBFF]$/,D=/^[\uDC00-\uDFFF]$/,F=!m||l((function(){var t=i("Symbol")();return"[null]"!=h([t])||"{}"!=h({a:t})||"{}"!=h(Object(t))})),U=l((function(){return'"\\udf06\\ud834"'!==h("\udf06\ud834")||'"\\udead"'!==h("\udead")})),$=function(t,e){var n=d(arguments),a=e;if((f(e)||void 0!==t)&&!p(t))return u(e)||(e=function(t,e){if(c(a)&&(e=r(a,this,t,e)),!p(e))return e}),n[1]=e,s(h,null,n)},R=function(t,e,n){var a=v(n,e-1),i=v(n,e+1);return g(I,t)&&!g(D,i)||g(D,t)&&!g(I,a)?"\\u"+w(b(t,0),16):t};h&&a({target:"JSON",stat:!0,arity:3,forced:F||U},{stringify:function(t,e,n){var a=d(arguments),i=s(F?$:h,null,a);return U&&"string"==typeof i?x(i,y,R):i}})},8076:function(t,e){"use strict";e["Z"]='<template>\n  <div class="MonHocToan">\n    <raw-loader\n      :mytxt="require(\'!raw-loader!./BasicUpload.vue\').default"\n    ></raw-loader>\n    <h1>Upload file page</h1>\n    <a href="https://www.itsolutionstuff.com/post/file-upload-using-vue-js-axios-phpexample.html" target="_blank">\n      https://www.itsolutionstuff.com/post/file-upload-using-vue-js-axios-phpexample.html\n    </a>\n\n    <b-row class="mb-2 border-bottom mb-3">\n      <b-col md="1" v-for="x in ds" :key="x">\n        <div class="border mb-2 position-relative bg-dark text-light" style="height:50px;">\n          <img\n            width="100%"\n            height="50px"\n            :src="`/api/FileUpload/GetImage/${x}`"\n            alt="Image 1"\n          />\n          <span class="position-absolute" style="right:1px;">one</span>\n          <span class="position-absolute" style="bottom:1px;right:1px;">\n            <button @click="onDel(x)">Del</button>\n          </span>\n          <span class="position-absolute" style="bottom:1px;left:1px;">\n          </span>\n          <span class="position-absolute" style="top:1px;left:1px;">four</span>\n        </div>\n      </b-col>\n    </b-row>\n\n    <div class="row">\n      <div class="col-sm-4 border-right">\n        <div>{{listInfo}}</div>\n        <form enctype="multipart/form-data" @submit.stop.prevent="onUpload">\n          <img id="output" ref="output" width="200" height="110" class="mb-1" />\n          <input type="file" id="file" ref="file" class="m-1" @change="onFileChange" /><br>\n          <div v-if=" files!=null && files.length> 0 " >\n            <button type="submit" class="mr-1">Upload</button>\n            <button @click="onRemove" class="mr-1">Remove</button>\n          </div>\n        </form>\n      </div>\n\n      <div class="col-sm-6 border-right bg-primary" >\n        <ul>\n          <li v-for="x in ds" :key="x">\n            {{ x }}\n            <button @click="onView(x)">View img</button>\n          </li>\n        </ul>\n      </div>\n      <div class="col-sm-2">\n        <div>{{ds[0]}}</div>        \n        <b-img thumbnail :src="src" alt="Image 1"></b-img>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport $ from "jquery";\nimport axios from "axios";\nimport moment from "moment";\nexport default {\n  name: "Tpl",\n  components: {},\n  data() {\n    return {\n      files:null,\n      listInfo:[],\n      ds: [],\n      src: "",\n    };\n  },\n  mounted() {\n    let that = this;\n    this.getListImg().then((res) => {\n      this.ds = res.data;\n    });\n  },\n  methods: {\n    getListInfo(files){\n      let ar=[];\n      for(var i=0;i<files.length;i++){\n        let info={\n          name:files[i].name,\n          lastModified:files[i].lastModified,\n          size:files[i].size,\n          type:files[i].type\n        }\n        ar.push(info);\n      }\n      return ar;\n    },\n    onFileChange(){\n      var supportedFormats = [\'image/jpg\',\'image/gif\',\'image/png\',\'image/jpeg\'];\n      let files=this.$refs.file.files;\n      let index=supportedFormats.findIndex( x => x==files[0].type );\n      if(index >= 0){\n        alert(\'file hợp lệ\');\n      }else{\n        alert(\'file khong hop le\');\n      }\n      this.files=this.$refs.file.files;\n      this.listInfo=this.getListInfo(this.$refs.file.files);\n      this.getReadAsDataURL(this.files[0]).then((res) => {\n        $(this.$refs.output).attr("src", res);\n      });\n    },      \n    onDel(x){\n      this.Del(x).then(res=>{\n        this.loadListImg();\n      })\n    },\n    onView(x) {\n      this.ReadImage(x).then((res) => {\n        this.src = `data:image/jpg;base64,${res.data}`;\n      });\n    },\n    getReadAsDataURL(file) {\n      return new Promise((resolve, reject) => {\n        let reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result);\n        };\n        reader.onerror = reject;\n        reader.readAsDataURL(file);\n      });\n    },\n    onRemove(e){\n      e.preventDefault();\n      $(this.$refs.file).val("");\n      this.files=null;\n      $(this.$refs.output).attr(\'src\',\'\');\n    },\n    onUpload() {\n      if (window.FormData !== undefined) {\n        var fileUpload = $("#file").get(0); //$("#FileUpload1").get(0).files\n        var files = fileUpload.files;\n        if(files.length==0){\n          alert(\'thieu file\');\n          return;\n        }\n        var formData = new FormData();\n        console.log(files[0]);\n        formData.append(files[0].name, files[0]);\n        formData.append("test","thuc 101");\n        let that = this;\n        $.ajax({\n          url: "/api/FileUpload/Upload", ///Home/UploadFiles\n          type: "POST",\n          contentType: false, // Not to set any content header\n          processData: false, // Not to process data\n          data: formData,\n          success: function (result) {\n            that.loadListImg();\n            that.files=null;\n            $("#output").attr("src", \'\');\n          },\n          error: function (err) {\n            alert(err.statusText);\n          },\n        });\n      } else {\n        alert("FormData is not supported.");\n      }\n    },\n    loadListImg() {\n      this.getListImg().then((res) => {\n        this.ds = res.data;\n      });\n    },\n    async getListImg() {\n      return await axios.get(`/api/FileUpload/GetListFile`).catch((err) => {\n        console.log(err);\n      });\n    },\n    async ReadImage(fileName) {\n      return await axios\n        .get(`/api/FileUpload/ReadImage/${fileName}`)\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    async GetImage(fileName) {//asDataUrl\n      return await axios\n        .get(`/api/FileUpload/GetImage/${fileName}`)\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    async ReadImage(fileName) {//asByte\n      return await axios\n        .get(`/api/FileUpload/ReadImage/${fileName}`)\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    async Del(fileName) {\n      return await axios\n        .get(`/api/FileUpload/Del/${fileName}`)\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n\n  },\n};\n<\/script>\n'},23796:function(t,e,n){"use strict";function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return a}})}}]);
//# sourceMappingURL=4598-legacy.f889fdf1.js.map