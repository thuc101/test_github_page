"use strict";(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[2168],{12168:function(e,t,r){r.r(t),r.d(t,{default:function(){return k}});var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("raw-loader",{attrs:{mytxt:r(87158).Z}}),s("h1",[e._v("This is Role claim3")]),s("b-row",[s("b-col",{attrs:{md:"5"}},[s("b-img",{attrs:{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTZMFvrF7BTAIoBIYRHAf41FagYDpQQ3MUA1w&usqp=CAU","fluid-grow":"",alt:"Responsive image"}})],1),s("b-col",{attrs:{md:"7"}},e._l(e.listRoles,(function(t,r){return s("div",{key:r},[s("h5",{staticClass:"border-bottom"},[e._v(e._s(t))]),s("mycom",{attrs:{role:t}})],1)})),0)],1)],1)},i=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("button",{on:{click:e.OnAdd}},[e._v("Add")]),r("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.onSave.apply(null,arguments)}}},[r("b-table",{ref:"mytable",attrs:{small:"",items:e.myProvider,fields:e.fields},scopedSlots:e._u([{key:"cell()",fn:function(t){var s=t.value,i=t.item,a=t.field.key;return[e.sel[e.pri]!=i[e.pri]?[0!=i[e.pri]?[a==e.pri?[e._v(" "+e._s(s)+" ")]:e._e(),"Role"==a?[e._v(" "+e._s(s)+" ")]:e._e(),"ClaimType"==a?[e._v(" "+e._s(s)+" ")]:e._e(),"ClaimName"==a?[e._v(" "+e._s(s)+" ")]:e._e(),"Act"==a?[r("b-form-checkbox",{staticClass:"my-checkbox",attrs:{disabled:!0,name:a,value:"true","unchecked-value":"false"},model:{value:i[a],callback:function(t){e.$set(i,a,t)},expression:"item[key]"}})]:e._e()]:e._e()]:e._e(),e.sel[e.pri]==i[e.pri]||0==i[e.pri]?[a==e.pri?[r("span",[e._v(e._s(s))])]:e._e(),"Role"==a?[r("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"ko-hop-le":e.errors.has(a)},attrs:{autocomplete:"off",name:a,placeholder:""},model:{value:i[a],callback:function(t){e.$set(i,a,t)},expression:"item[key]"}})]:e._e(),"ClaimType"==a?[r("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{danger:e.errors.has(a)},attrs:{name:a,reduce:function(e){return e.id},options:e.ClaimTypes,"has-error":e.errors.has(a)},model:{value:i[a],callback:function(t){e.$set(i,a,t)},expression:"item[key]"}})]:e._e(),"ClaimName"==a?[r("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{danger:e.errors.has(a)},attrs:{name:a,reduce:function(e){return e.id},options:e.ClaimNames,"has-error":e.errors.has(a)},model:{value:i[a],callback:function(t){e.$set(i,a,t)},expression:"item[key]"}})]:e._e(),"Act"==a?[r("b-form-checkbox",{staticClass:"my-checkbox",attrs:{name:a,value:"true","unchecked-value":"false"},model:{value:i[a],callback:function(t){e.$set(i,a,t)},expression:"item[key]"}})]:e._e()]:e._e()]}},{key:"cell(cmd)",fn:function(t){return[0==t.item[e.pri]?[r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnSave(t.item)}}},[r("b-icon-hand-thumbs-up")],1),r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnCancel(t.item)}}},[r("b-icon-file-x")],1)]:[e.sel[e.pri]!=t.item[e.pri]?r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnEdit(t.item)}}},[r("b-icon-pencil-square")],1):e._e(),e.sel[e.pri]!=t.item[e.pri]?r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnDel(t.item)}}},[r("b-icon-trash")],1):e._e(),e.sel[e.pri]==t.item[e.pri]?r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnSave(t.item)}}},[r("b-icon-hand-thumbs-up")],1):e._e(),e.sel[e.pri]==t.item[e.pri]?r("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnCancel(t.item)}}},[r("b-icon-file-x")],1):e._e()]]}}])})],1)])},n=[],l=r(12954),o=r(20144),c=r(19938),m=r.n(c),u=r(53009),d=r(70790);o["default"].use(l.ZP,{classes:!0,fieldsBagName:"veeFields"}),o["default"].component("v-select",m());var h={props:["role"],components:{},mounted(){},data(){return{pri:"Id",sel:{},adding:!1,ClaimTypes:[],ClaimNames:[],url:"/api/RoleClaim4",items:[{Id:1,Ten:"thuc 101"},{Id:2,Ten:"thuc 102"},{Id:3,Ten:"thuc 103"},{Id:4,Ten:"thuc 104"}],fields:[{key:"Id",sortable:!0,thClass:"text-center",tdClass:"align-middle",thStyle:{width:"8%"}},{key:"ClaimType",sortable:!0,thClass:"text-left",tdClass:"align-middle",thStyle:{width:"30%"}},{key:"ClaimName",sortable:!0,thClass:"text-left",tdClass:"align-middle",thStyle:{width:"30%"}},{key:"Act",sortable:!0,thClass:"text-left",tdClass:"align-middle",thStyle:{width:"10%"}},{key:"Cmd",sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"22%"}}]}},mounted(){},methods:{myProvider(){let e=`${this.url}/GetListByRole?role=${this.role}`;return d.Z.get(e).then((e=>{if(this.GetComboClaimType(),this.GetComboClaimName(),1==this.adding){let t={};t[this.pri]=0,t["Role"]=this.role,t["ClaimType"]=null,t["ClaimName"]=null,t["Act"]=!0,e.data.unshift(t)}return e.data}))},OnAdd(){this.adding=!0,this.$refs.mytable.refresh()},doCancel(e){for(let t in e)e[t]!=this.sel[t]&&(e[t]=this.sel[t])},OnCancel(e){if(0==e[this.pri]){let t=this.items.findIndex((t=>t[this.pri]==e[this.pri]));this.items.splice(t,1),this.adding=!1,this.$refs.mytable.refresh()}else this.doCancel(e),this.sel={}},OnEdit(e){this.sel=JSON.parse(JSON.stringify(e))},OnDel(e){this.Del(e[this.pri])},OnSave(e){this.$validator.validateAll().then((t=>{if(!t)return void this.toast("Không hợp lệ");let r=JSON.parse(JSON.stringify(e));0==r[this.pri]?this.Add(r):this.Update(r)}))},toast(e,t=null){this.$bvToast.toast(e,{title:"Information",variant:t,solid:!0})},async Add(e){return await d.Z.post(`${this.url}/Add`,e).then((e=>{this.toast(`${e.data.msg}`),this.adding=!1,this.$refs.mytable.refresh()})).catch((e=>{u.Z.XuLyErr(e)}))},async Update(e){return await d.Z.post(`${this.url}/Update`,e).then((e=>{this.sel={},this.$refs.mytable.refresh()})).catch((e=>{u.Z.XuLyErr(e)}))},async Del(e){return await d.Z.get(`${this.url}/Delete?id=${e}`).then((e=>{this.$refs.mytable.refresh()})).catch((e=>{u.Z.XuLyErr(e)}))},async getById(e){return await d.Z.get(`${this.url}/GetById?id=${e}`).then((e=>{alert(JSON.stringify(e))})).catch((e=>{u.Z.XuLyErr(e)}))},async GetComboClaimType(){return await d.Z.get("/api/NguoiDung4/GetComboClaimType").then((e=>{this.ClaimTypes=e.data})).catch((e=>{u.Z.XuLyErr(e)}))},async GetComboClaimName(){return await d.Z.get("/api/NguoiDung4/GetComboClaimName").then((e=>{this.ClaimNames=e.data})).catch((e=>{u.Z.XuLyErr(e)}))}}},p=h,f=r(1001),v=(0,f.Z)(p,a,n,!1,null,null,null),y=v.exports,b={components:{mycom:y},mounted(){this.ListRole()},data(){return{listRoles:[],ds:[]}},methods:{getChild(e){},async ListRole(){return await d.Z.get("/api/RoleClaim4/GetListRole").then((e=>{this.listRoles=e.data})).catch((e=>{u.Z.XuLyErr(e)}))}}},C=b,g=(0,f.Z)(C,s,i,!1,null,null,null),k=g.exports},87158:function(e,t){t["Z"]='<template>\r\n    <div class="home">\r\n        <raw-loader :mytxt="require(\'!raw-loader!./RoleClaim.vue\').default"></raw-loader>\r\n        <h1>This is Role claim3</h1>\r\n        <b-row>\r\n            <b-col md="5">\r\n                <b-img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTZMFvrF7BTAIoBIYRHAf41FagYDpQQ3MUA1w&usqp=CAU" fluid-grow alt="Responsive image"></b-img>   \r\n            </b-col>\r\n            <b-col md="7">\r\n                <div v-for="(v,k) in listRoles" :key="k"> \r\n                    <h5 class="border-bottom">{{ v }}</h5>\r\n                    <mycom :role="v"></mycom>\r\n                </div>\r\n            </b-col>\r\n        </b-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport mycom from "@/views/NguoiDung/RoleClaimCom.vue"\r\nimport fetchClient from \'@/fetchClient\'\r\nimport TumLum from \'@/TumLum\'\r\nexport default {\r\n    components: {\r\n        mycom\r\n    },\r\n    mounted(){\r\n        this.ListRole();\r\n    },\r\n    data(){\r\n        return{\r\n            listRoles:[],\r\n            ds:[]\r\n        }\r\n    },\r\n    methods: {\r\n        getChild(Role){\r\n\r\n        },\r\n        async ListRole(){\r\n            return await fetchClient.get(`/api/RoleClaim4/GetListRole`)\r\n            .then(res=>{\r\n                this.listRoles=res.data;\r\n                //alert(JSON.stringify(res));\r\n                //{"data":["Admin","ChuQuan","NhanVien","User","PhaChe","KeToan","Umbala"],"status"\r\n            }).catch(err=>{\r\n                TumLum.XuLyErr(err);\r\n            })\r\n        },\r\n    }\r\n}\r\n<\/script>\r\n  '},53009:function(e,t){t["Z"]={XuLyErr(e){let t=JSON.parse(JSON.stringify(e)).status;if(400==t){let t=JSON.parse(JSON.stringify(e.response)).data.message;alert(t)}else e.response?401==e.response.status?alert("Chưa đăng nhập hoặc token hết hạn"):403==e.response.status&&alert("Bạn ko có quyền"):e.request?alert(JSON.stringify(e.request)):e.message&&alert(JSON.stringify(e.message))}}},70790:function(e,t,r){var s=r(9669),i=r.n(s);const a=()=>{const e={baseURL:"",method:"get",headers:{"Content-Type":"application/json;charset=utf-8"}};let t=i().create(e);return t.interceptors.request.use((function(e){const t=localStorage.getItem("token");return e.headers.Authorization=t?`Bearer ${t}`:"",e})),t};t["Z"]=a()}}]);
//# sourceMappingURL=2168.75d0f07c.js.map