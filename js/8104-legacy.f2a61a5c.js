(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[8104],{67715:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return $}});var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-container",{attrs:{fluid:""}},[i("raw-loader",{attrs:{mytxt:n(24555).Z}}),i("h1",[t._v("BanModal")]),i("b-table",{ref:"mytable",attrs:{items:t.myProvider,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,stacked:"md","show-empty":"",small:"",fixed:"",outlined:"",bordered:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(cmd)",fn:function(e){return[i("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.OnEditModal(e.item)}}},[i("b-icon-pencil-square")],1),i("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.OnDel(e.item)}}},[i("b-icon-trash")],1)]}},{key:"bottom-row",fn:function(e){return[i("td",{attrs:{colspan:e.columns}},[i("b-row",[i("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[i("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[i("b-input-group",{attrs:{size:"sm"}},[i("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),i("b-input-group-append",[i("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),i("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[i("b-form-group",{staticClass:"mb-0",attrs:{label:"Per page","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm"}},[i("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),i("b-col",{staticClass:"my-1 text-right",attrs:{sm:"6"}},[t._v(" page :"+t._s(t.currentPage)+" / "+t._s(t.getLastPage(t.totalRows))+" of "+t._s(t.totalRows)+" "),i("b-button",{attrs:{size:"sm"},on:{click:t.OnAddModal}},[i("b",[t._v("Add")])])],1),i("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[i("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)]}}])}),i("b-modal",{ref:"my-modal",attrs:{size:"lg","no-close-on-backdrop":!0,"hide-footer":"",title:0==t.sel[t.pri]?"form Add":"form Edit"}},[i("div",{staticClass:"d-block"},[i("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSaveModal.apply(null,arguments)}}},[i("div",[t._l(t.sel,(function(e,n){return i("div",{key:n,staticClass:"text-right form-group row"},[n==t.pri?[i("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Id")]),i("div",{staticClass:"col-sm-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.sel[n],expression:"sel[k]"}],class:{"form-control":!0,"ko-hop-le":t.errors.has(n)},attrs:{readonly:!0,name:n,type:"text"},domProps:{value:t.sel[n]},on:{input:function(e){e.target.composing||t.$set(t.sel,n,e.target.value)}}})])]:t._e(),"Name"==n?[i("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Name")]),i("div",{staticClass:"col-sm-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.sel[n],expression:"sel[k]"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"ko-hop-le":t.errors.has(n)},attrs:{name:n,autocomplete:"off",type:"text"},domProps:{value:t.sel[n]},on:{input:function(e){e.target.composing||t.$set(t.sel,n,e.target.value)}}})])]:t._e()],2)})),i("div",[0==t.sel.Id?i("ComBanCTAdd",{ref:"comAdd"}):t._e(),0!=t.sel.Id?i("ComBanCTEdit",{ref:"comEdit",attrs:{BanId:t.sel.Id}}):t._e()],1),i("div",{staticClass:"text-right"},[i("button",{staticClass:"btn mr-1",attrs:{type:"submit"}},[t._v("Save")]),i("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return t.hideModal()}}},[t._v("Cancel")])])],2)])])])],1)},s=[],a=n(77673),r=n(16198),o=(n(21249),n(57327),n(41539),n(92222),n(54747),n(34553),n(40561),n(38862),n(47941),n(12954)),l=n(20144),c=(n(30381),n(19938)),u=n.n(c),d=n(9669),f=n.n(d),m=n(60325),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"MonHocToan"},[n("div",[n("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSave.apply(null,arguments)}}},[n("b-table",{ref:"mytable",attrs:{"thead-class":"myTable",items:t.myProvider,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,stacked:"sm","show-empty":"",small:"",fixed:"",outlined:"",bordered:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell()",fn:function(e){var i=e.value,s=e.item,a=e.field.key;return[t.sel[t.pri]!=s[t.pri]?[0!=s[t.pri]?[a==t.pri?[t._v(" "+t._s(i)+" ")]:t._e(),"MonId"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"DonGia"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"SoLg"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"Tien"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"TrangThai"==a?[t._v(" "+t._s(i)+" ")]:t._e()]:t._e()]:t._e(),t.sel[t.pri]==s[t.pri]||0==s[t.pri]?["Id"==a?[n("span",[t._v(t._s(i))])]:t._e(),"MonId"==a?[n("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{danger:t.errors.has(a)},attrs:{name:a,reduce:function(t){return t.id},options:t.mons,"has-error":t.errors.has(a)},on:{input:function(e){return t.onChangeMonId(s)}},model:{value:s[a],callback:function(e){t.$set(s,a,e)},expression:"item[key]"}})]:t._e(),"DonGia"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"SoLg"==a?[n("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"text-right":!0,"ko-hop-le":t.errors.has(a)},attrs:{name:a,placeholder:""},on:{input:function(e){return t.SoLgChange(s)}},model:{value:s[a],callback:function(e){t.$set(s,a,e)},expression:"item[key]"}})]:t._e(),"Tien"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"TrangThai"==a?[n("b-form-checkbox",{staticClass:"my-checkbox",attrs:{name:a,value:"true","unchecked-value":"false"},model:{value:s[a],callback:function(e){t.$set(s,a,e)},expression:"item[key]"}})]:t._e()]:t._e()]}},{key:"cell(cmd)",fn:function(e){return[0==e.item[t.pri]?[n("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(n){return t.onSave(e.item)}}},[n("b-icon-hand-thumbs-up")],1),n("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(n){return t.OnCancel(e.item)}}},[n("b-icon-file-x")],1)]:[t.sel[t.pri]!=e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.OnEdit(e.item)}}},[n("b-icon-pencil-square")],1):t._e(),t.sel[t.pri]!=e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.OnDel(e.item)}}},[n("b-icon-trash")],1):t._e(),t.sel[t.pri]==e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.onSave(e.item)}}},[n("b-icon-hand-thumbs-up")],1):t._e(),t.sel[t.pri]==e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.OnCancel(e.item)}}},[n("b-icon-file-x")],1):t._e()]]}},{key:"bottom-row",fn:function(e){return[n("td",{attrs:{colspan:e.columns}},[n("b-row",[n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Tìm kiếm","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),n("b-input-group-append",[n("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Số dòng","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm"}},[n("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),n("b-col",{staticClass:"my-1 text-right",attrs:{sm:"6"}},[n("span",[t._v("page : "+t._s(t.currentPage)+" / "+t._s(t.last_page)+" of "+t._s(t.totalRows)+" ")]),n("b-button",{staticClass:"mr-1 mb-1",attrs:{disabled:1==t.adding||1==t.isEditing(),size:"sm"},on:{click:t.OnAdd}},[n("b",[t._v("Add")])])],1),n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-pagination",{ref:"mypage",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,size:"sm",align:"fill","first-text":"First","prev-text":"Prev","next-text":"Next","last-text":"Last"},on:{change:t.onChangePage,input:t.onPagingInput},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)]}},{key:"row-details",fn:function(e){return[n("b-card",[n("ul",t._l(e.item,(function(e,i){return n("li",{key:i},[t._v(t._s(i)+": "+t._s(e))])})),0)])]}}])})],1),n("b-modal",{attrs:{id:t.infoModal.id,title:t.infoModal.title,"ok-only":""},on:{hide:t.resetInfoModal}},[n("pre",[t._v(t._s(t.infoModal.content))])])],1)])},h=[],g=n(85890),b=n(96486);l["default"].use(o.ZP,{classes:!0,fieldsBagName:"veeFields"});var v={props:["BanId"],components:{VueTypeaheadBootstrap:g.Z},data:function(){var t=this;return{items:[],fields:[{key:"Id",formatter:function(t,e,n){return t},sortable:!0,thClass:"text-center",tdClass:"text-center align-middle",thStyle:{width:"10%"}},{key:"MonId",formatter:function(e,n,i){var s="",a=t.mons.findIndex((function(t){return t.id==e}));return a>=0&&(s=t.mons[a].label),s},sortable:!0,thClass:"text-center",tdClass:"align-middle",thStyle:{width:"40%"}},{key:"DonGia",formatter:function(t,e,n){return parseInt(t).toLocaleString()},sortable:!0,thClass:"text-center",tdClass:"align-middle text-right",thStyle:{width:"10%"}},{key:"SoLg",sortable:!0,thClass:"text-center",tdClass:"align-middle text-right",thStyle:{width:"10%"}},{key:"Tien",formatter:function(t,e,n){return parseInt(t).toLocaleString()},sortable:!0,thClass:"text-center",tdClass:"align-middle text-right",thStyle:{width:"10%"}},{key:"TrangThai",sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"10%"}},{key:"cmd",class:"text-center",thClass:"text-center",tdClass:"align-middle",thStyle:{width:"10%"}}],totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15,{value:100,text:"Show a lot"}],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},sel:{},pri:"Id",last_page:0,adding:!1,ListAuto:[],mons:[]}},watch:{last_page:function(t,e){},currentPage:function(t){},totalRows:function(t,e){}},computed:{},mounted:function(){var t=this;this.getMons().then((function(e){t.mons=[],e.data.forEach((function(e){t.mons.push({id:e.Id,label:e.Name,DonGia:e.DonGia})}))}))},methods:{SoLgChange:function(t){var e=t.DonGia,n=t.SoLg,i=e*n;t.Tien=i},onChangeMonId:function(t){var e=this.mons.findIndex((function(e){return e.id==t.MonId})),n=this.mons[e].DonGia,i=t.SoLg,s=n*i;t.Tien=s,t.DonGia=n},OnSearch:(0,b.debounce)((function(t){var e=this;fetch("/api/Ban/AutoComplete?q=".concat(t)).then((function(t){return t.json()})).then((function(t){console.log(JSON.stringify(t.items)),e.ListAuto=t.items}))}),500),onPagingInput:function(){},myProvider:function(t){var e=this,n=t.currentPage,i=t.perPage,s=t.sortBy,a=t.sortDesc,r=this,o="/api/BanChiTiets/GetPage2ByBanId";if(o="".concat(o,"?page=").concat(n,"&size=").concat(i,"&BanId=").concat(this.BanId,"&sortBy=").concat(s,"&sortDesc=").concat(a),t.filter){var l=t.filter;o="".concat(o,"&filter=").concat(l)}return f().get(o).then((function(t){if(r.last_page=t.data.last_page,r.totalRows=t.data.rowCount,1==e.adding){var n={};n[e.pri]=0,n["MonId"]=null,n["DonGia"]=1,n["SoLg"]=1,n["Tien"]=1,n["BanId"]=e.BanId,n["TrangThai"]=!1,t.data.data.unshift(n)}return r.mapData(t.data.data)}))},mapData:function(t){var e=[];return t.forEach((function(t){var n={};Object.keys(t).forEach((function(e){var i=e;n[i]=t[e]})),e.push(n)})),e},onChangePage:function(){this.sel={},this.adding=!1},OnAdd:function(){this.adding=!0,this.$refs.mytable.refresh()},OnEdit:function(t){"{}"==JSON.stringify(this.sel)&&1!=this.adding&&(this.sel=JSON.parse(JSON.stringify(t)))},onSave:function(t){var e=this;this.$validator.validateAll().then((function(n){if(n){var i=JSON.parse(JSON.stringify(t));e.Save(i).then((function(n){"ok"==n.data.kq?(0==t.pri?n.data.kq:e.sel={},e.toast("".concat(n.data.msg)),e.adding=!1,e.$refs.mytable.refresh()):e.toast("".concat(n.data.msg))}))}else e.toast("Không hợp lệ")}))},OnCancel:function(t){0!=t[this.pri]?(this.doCancel(t),this.sel={}):(this.adding=!1,this.$refs.mytable.refresh())},OnDel:function(t){var e=this;this.Del(t[this.pri]).then((function(t){if("nook"!=t.data.kq){e.toast("".concat(t.data.msg));var n=e.getLastPage(e.totalRows-1);n<e.currentPage&&(e.currentPage=n),e.$refs.mytable.refresh()}else e.toast("".concat(t.data.msg))}))},delRow:function(t){var e=t.id,n=this.items.findIndex((function(t){return t.id==e}));this.items.splice(n,1)},isEditing:function(){return"{}"!=JSON.stringify(this.sel)},isAdded:function(){var t=!1;return this.items.forEach((function(e){0==e.id&&(t=!0)})),t},doCancel:function(t){for(var e in t)t[e]!=this.sel[e]&&(t[e]=this.sel[e])},getLastPage:function(t){var e=this.perPage,n=t%e;return 0==n?t/e:(t-n)/e+1},gotoPage:function(t){this.currentPage=t,this.$refs.mytable.refresh()},toast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$bvToast.toast(t,{title:"Information",variant:e,solid:!0})},Save:function(t){return(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.Z.post("/api/BanChiTiets/Save",t).catch((function(t){console.log(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},Del:function(t){return(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.Z.get("/api/BanChiTiets/Delete?id=".concat(t)).catch((function(t){console.log(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},getMons:function(){return(0,r.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.Z.get("/api/Mon/GetAll").catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getById:function(t){return(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.Z.get("/api/Ban/GetById?id=".concat(t)).catch((function(t){console.log(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},GetCombo:function(){return(0,r.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.Z.get("/api/Ban/GetCombo").catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},info:function(t,e,n){this.infoModal.title="Row index: ".concat(e),this.infoModal.content=JSON.stringify(t,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,n)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1}}},y=v,x=n(1001),w=(0,x.Z)(y,p,h,!1,null,null,null),k=w.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" add2 "),n("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSave.apply(null,arguments)}}},[n("b-table",{ref:"mytable",attrs:{items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,stacked:"md","show-empty":"",small:"",fixed:"",outlined:"",bordered:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell()",fn:function(e){var i=e.value,s=e.item,a=e.field.key;return[t.sel[t.pri]!=s[t.pri]?[0!=s[t.pri]?[a==t.pri?[t._v(" "+t._s(i)+" ")]:t._e(),"MonId"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"DonGia"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"SoLg"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"Tien"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"TrangThai"==a?[t._v(" "+t._s(i)+" ")]:t._e()]:t._e()]:t._e(),t.sel[t.pri]==s[t.pri]||0==s[t.pri]?[a==t.pri?[n("span",[t._v(t._s(i))])]:t._e(),"MonId"==a?[n("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{danger:t.errors.has(a)},attrs:{name:a,reduce:function(t){return t.id},options:t.mons,"has-error":t.errors.has(a)},on:{input:function(e){return t.onChangeMonId(s)}},model:{value:s[a],callback:function(e){t.$set(s,a,e)},expression:"item[key]"}})]:t._e(),"DonGia"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"SoLg"==a?[n("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],class:{"text-right":!0,"ko-hop-le":t.errors.has(a)},attrs:{autocomplete:"off",name:a,placeholder:""},on:{input:function(e){return t.SoLgChange(s)}},model:{value:s[a],callback:function(e){t.$set(s,a,e)},expression:"item[key]"}})]:t._e(),"Tien"==a?[t._v(" "+t._s(i)+" ")]:t._e(),"TrangThai"==a?[n("b-form-checkbox",{staticClass:"my-checkbox",attrs:{name:a,value:"true","unchecked-value":"false"},model:{value:s[a],callback:function(e){t.$set(s,a,e)},expression:"item[key]"}})]:t._e()]:t._e()]}},{key:"cell(cmd)",fn:function(e){return[0==e.item[t.pri]?[n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.onSave(e.item)}}},[n("b-icon-hand-thumbs-up")],1),n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.OnCancel(e.item)}}},[n("b-icon-file-x")],1)]:[t.sel[t.pri]!=e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",disabled:1==t.isAdded(),size:"sm"},on:{click:function(n){return t.OnEdit(e.item)}}},[n("b-icon-pencil-square")],1):t._e(),t.sel[t.pri]!=e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",disabled:1==t.isAdded(),size:"sm"},on:{click:function(n){return t.OnDel(e.item)}}},[n("b-icon-trash")],1):t._e(),t.sel[t.pri]==e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.onSave(e.item)}}},[n("b-icon-hand-thumbs-up")],1):t._e(),t.sel[t.pri]==e.item[t.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return t.OnCancel(e.item)}}},[n("b-icon-file-x")],1):t._e()]]}},{key:"bottom-row",fn:function(e){return[n("td",{attrs:{colspan:e.columns}},[n("b-row",[n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),n("b-input-group-append",[n("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Per page","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm"}},[n("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),n("b-col",{staticClass:"my-1 text-right",attrs:{sm:"6"}},[t._v(" page :"+t._s(t.currentPage)+" / "+t._s(t.getLastPage(t.totalRows))+" of "+t._s(t.totalRows)+" "),n("b-button",{attrs:{disabled:1==t.adding||1==t.isEditing(),size:"sm"},on:{click:t.OnAdd}},[n("b",[t._v("Add")])])],1),n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-pagination",{staticClass:"my-0",attrs:{disabled:1==t.adding||1==t.isEditing(),"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)]}}])})],1),n("b-modal",{attrs:{id:t.infoModal.id,title:t.infoModal.title,"ok-only":""},on:{hide:t.resetInfoModal}},[n("pre",[t._v(t._s(t.infoModal.content))])])],1)},_=[];n(39714);l["default"].use(o.ZP,{classes:!0,fieldsBagName:"veeFields"}),l["default"].component("v-select",u());var S={data:function(){var t=this;return{items:[],fields:[{key:"Id",formatter:function(t,e,n){var i=t.toString();return i.length<4?i:i.substring(0,4)+"..."},sortable:!0,thClass:"text-center",tdClass:"text-center align-middle",thStyle:{width:"10%"}},{key:"MonId",formatter:function(e,n,i){var s="",a=t.mons.findIndex((function(t){return t.id==e}));return a>=0&&(s=t.mons[a].label),s},sortable:!0,thClass:"text-center",tdClass:"align-middle",thStyle:{width:"40%"}},{key:"DonGia",formatter:function(t,e,n){return parseFloat(t).toLocaleString()},sortable:!0,thClass:"text-center",tdClass:"align-middle text-right",thStyle:{width:"10%"}},{key:"SoLg",formatter:function(t,e,n){return parseInt(t).toLocaleString()},sortable:!0,thClass:"text-center",tdClass:"align-middle text-right",thStyle:{width:"10%"}},{key:"Tien",formatter:function(t,e,n){return parseFloat(t).toLocaleString()},sortable:!0,thClass:"text-center",tdClass:"align-middle text-right",thStyle:{width:"10%"}},{key:"TrangThai",sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"10%"}},{key:"cmd",class:"text-center",thClass:"text-center",tdClass:"align-middle",thStyle:{width:"10%"}}],totalRows:1,currentPage:1,perPage:3,pageOptions:[3,5,10,15,{value:100,text:"Show a lot"}],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},sel:{},pri:"Id",adding:!1,lastPage:0,mons:[]}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},mounted:function(){var t=this;this.getMons().then((function(e){t.mons=[],e.data.forEach((function(e){t.mons.push({id:e.Id,label:e.Name,DonGia:e.DonGia})}));var n=[];t.items=n,t.totalRows=t.items.length,t.lastPage=t.getLastPage(t.totalRows)}))},methods:{SoLgChange:function(t){var e=t.DonGia,n=t.SoLg,i=e*n;t.Tien=i},onChangeMonId:function(t){var e=this.mons.findIndex((function(e){return e.id==t.MonId})),n=this.mons[e].DonGia,i=t.SoLg,s=n*i;t.Tien=s,t.DonGia=n},createId:function(){var t=this,e=0;return this.items.forEach((function(n){n[t.pri]>e&&(e=n[t.pri])})),e+1},onSave:function(t){var e=this;this.$validator.validateAll().then((function(n){if(n){var i=JSON.parse(JSON.stringify(t));if(0==i[e.pri]){var s=e.items.findIndex((function(t){return t[e.pri]==i[e.pri]}));i[e.pri]=e.createId(),e.$set(e.items,s,i),e.adding=!1,e.$refs.mytable.refresh()}else{var a=e.items.findIndex((function(t){return t[e.pri]==i[e.pri]}));e.$set(e.items,a,i),e.sel={}}}else e.toast("Không hợp lệ")}))},OnDel:function(t){this.delRow(t)},delRow:function(t){var e=this,n=t[this.pri],i=this.items.findIndex((function(t){return t[e.pri]==n}));this.items.splice(i,1),this.totalRows=this.items.length,this.lastPage=this.getLastPage(this.totalRows)},doCancel:function(t){for(var e in t)t[e]!=this.sel[e]&&(t[e]=this.sel[e])},isAdded:function(){var t=this,e=!1;return this.items.forEach((function(n){0==n[t.pri]&&(e=!0)})),e},OnEdit:function(t){"{}"==JSON.stringify(this.sel)&&(this.sel=JSON.parse(JSON.stringify(t)))},OnCancel:function(t){var e=this;if(0==t[this.pri]){var n=this.items.findIndex((function(n){return n[e.pri]==t[e.pri]}));this.items.splice(n,1),this.adding=!1,this.$refs.mytable.refresh()}else this.doCancel(t),this.sel={}},OnAdd:function(){var t={Id:0,MonId:null,DonGia:0,SoLg:1,Tien:1,TrangThai:!1};this.items.unshift(t),this.adding=!0,this.currentPage=1,this.totalRows=this.items.length,this.$refs.mytable.refresh()},isEditing:function(){return"{}"!=JSON.stringify(this.sel)},getLastPage:function(t){var e=this.perPage,n=t%e;return 0==n?t/e:(t-n)/e+1},info:function(t,e,n){this.infoModal.title="Row index: ".concat(e),this.infoModal.content=JSON.stringify(t,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,n)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},toast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$bvToast.toast(t,{title:"Information",variant:e,solid:!0})},getMons:function(){return(0,r.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.Z.get("/api/Mon/GetAll").catch((function(t){console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}}},P=S,M=(0,x.Z)(P,C,_,!1,null,null,null),O=M.exports;l["default"].use(o.ZP,{classes:!0,fieldsBagName:"veeFields"}),l["default"].component("v-select",u());var I={components:{ComBanCTEdit:k,ComBanCTAdd:O},data:function(){return{items:[],fields:[{key:"Id",sortable:!0,thClass:"text-center",tdClass:"text-center align-middle",thStyle:{width:"10%"}},{key:"Name",sortable:!0,thClass:"text-center",tdClass:"align-middle",thStyle:{width:"80%"}},{key:"cmd",class:"text-center",thClass:"text-center",tdClass:"align-middle",thStyle:{width:"10%"}}],totalRows:1,currentPage:1,perPage:3,pageOptions:[3,5,10,15,{value:100,text:"Show a lot"}],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},sel:{},pri:"Id",title:"Hi modal"}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},mounted:function(){},methods:{myProvider:function(t){var e=t.currentPage,n=t.perPage,i=t.sortBy,s=t.sortDesc,a=this,r="/api/Ban/GetPage2";if(r="".concat(r,"?page=").concat(e,"&size=").concat(n,"&sortBy=").concat(i,"&sortDesc=").concat(s),t.filter){var o=t.filter;r="".concat(r,"&filter=").concat(o)}return f().get(r).then((function(t){return a.last_page=t.data.last_page,a.totalRows=t.data.rowCount,t.data.data}))},createId:function(){var t=this,e=0;return this.items.forEach((function(n){n[t.pri]>e&&(e=n[t.pri])})),e+1},OnDel:function(t){var e=this;this.Del(t[this.pri]).then((function(t){"ok"==t.data.kq&&e.$refs.mytable.refresh(),e.toast("".concat(t.data.msg))}))},delRow:function(t){var e=this,n=t[this.pri],i=this.items.findIndex((function(t){return t[e.pri]==n}));this.items.splice(i,1),this.totalRows=this.items.length,this.lastPage=this.getLastPage(this.totalRows)},OnEditModal:function(t){this.sel=JSON.parse(JSON.stringify(t)),this.showModal()},mapData:function(t){var e=[];return t.forEach((function(t){var n={};Object.keys(t).forEach((function(e){var i=e;n[i]=t[e]})),e.push(n)})),e},MoRongData:function(t,e,n){var i=[];return t.forEach((function(t){var s={};Object.keys(t).forEach((function(e){s[e]=t[e]})),s[e]=n,i.push(s)})),i},onSaveModal:function(){var t=this;this.$validator.validateAll().then((function(e){if(e){var n=JSON.parse(JSON.stringify(t.sel));0==n.Id?t.$refs.comAdd.$validator.validateAll().then((function(e){var i=t.$refs.comAdd.items;e&&i.length>0?(n["list"]=i,t.AddBan2(n).then((function(e){t.hideModal(),t.$refs.mytable.refresh()}))):t.toast("Check dữ liệu!")})):t.Save(n).then((function(e){t.hideModal(),t.$refs.mytable.refresh()}))}else t.toast("Không hợp lệ")}))},OnAddModal:function(){this.sel={},this.sel[this.pri]=0,this.sel["Name"]="bàn số xxxx",this.showModal()},getLastPage:function(t){var e=this.perPage,n=t%e;return 0==n?t/e:(t-n)/e+1},info:function(t,e,n){this.infoModal.title="Row index: ".concat(e),this.infoModal.content=JSON.stringify(t,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,n)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},showModal:function(){this.$refs["my-modal"].show()},hideModal:function(){this.$refs["my-modal"].hide()},toast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$bvToast.toast(t,{title:"Information",variant:e,solid:!0})},Save:function(t){return(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.Z.post("/api/Ban/Save",t).catch((function(t){console.log(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},AddList:function(t){return(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.Z.post("/api/BanChiTiets/AddList",t).catch((function(t){console.log(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},AddBan2:function(t){return(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.Z.post("/api/Ban/Add2",t).catch((function(t){console.log(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},Del:function(t){return(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.Z.get("/api/Ban/Delete?id=".concat(t)).catch((function(t){console.log(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}}},D=I,B=(0,x.Z)(D,i,s,!1,null,null,null),$=B.exports},67066:function(t,e,n){"use strict";var i=n(19670);t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},34706:function(t,e,n){var i=n(46916),s=n(92597),a=n(47976),r=n(67066),o=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in o||s(t,"flags")||!a(o,t)?e:i(r,t)}},92222:function(t,e,n){"use strict";var i=n(82109),s=n(17854),a=n(47293),r=n(43157),o=n(70111),l=n(47908),c=n(26244),u=n(86135),d=n(65417),f=n(81194),m=n(5112),p=n(7392),h=m("isConcatSpreadable"),g=9007199254740991,b="Maximum allowed index exceeded",v=s.TypeError,y=p>=51||!a((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),x=f("concat"),w=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:r(t)},k=!y||!x;i({target:"Array",proto:!0,arity:1,forced:k},{concat:function(t){var e,n,i,s,a,r=l(this),o=d(r,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(a=-1===e?r:arguments[e],w(a)){if(s=c(a),f+s>g)throw v(b);for(n=0;n<s;n++,f++)n in a&&u(o,f,a[n])}else{if(f>=g)throw v(b);u(o,f++,a)}return o.length=f,o}})},21249:function(t,e,n){"use strict";var i=n(82109),s=n(42092).map,a=n(81194),r=a("map");i({target:"Array",proto:!0,forced:!r},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},47941:function(t,e,n){var i=n(82109),s=n(47908),a=n(81956),r=n(47293),o=r((function(){a(1)}));i({target:"Object",stat:!0,forced:o},{keys:function(t){return a(s(t))}})},39714:function(t,e,n){"use strict";var i=n(76530).PROPER,s=n(98052),a=n(19670),r=n(41340),o=n(47293),l=n(34706),c="toString",u=RegExp.prototype,d=u[c],f=o((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),m=i&&d.name!=c;(f||m)&&s(RegExp.prototype,c,(function(){var t=a(this),e=r(t.source),n=r(l(t));return"/"+e+"/"+n}),{unsafe:!0})},24555:function(t,e){"use strict";e["Z"]='<template>\n  <b-container fluid>\n    <raw-loader :mytxt="require(\'!raw-loader!./BanModal.vue\').default"></raw-loader>\n    <h1>BanModal</h1>\n    <b-table ref="mytable" :items="myProvider" :fields="fields" :current-page="currentPage" :per-page="perPage" :filter="filter"\n      :filter-included-fields="filterOn" :sort-by.sync="sortBy" :sort-desc.sync="sortDesc"\n      :sort-direction="sortDirection" stacked="md" show-empty small fixed outlined bordered @filtered="onFiltered">\n\n      <template #cell(cmd)="row">\n        <b-button variant="outline" class="mr-1" size="sm" @click="OnEditModal(row.item)">\n          <b-icon-pencil-square></b-icon-pencil-square>\n        </b-button>\n        <b-button variant="outline" class="mr-1" size="sm" @click="OnDel(row.item)">\n          <b-icon-trash></b-icon-trash>\n        </b-button>\n      </template>\n\n      <template #bottom-row="data">\n        <td :colspan="data.columns">\n          <b-row>\n            <b-col sm="6" class="my-1">\n              <b-form-group label="Filter" label-for="filter-input" label-cols-sm="3" label-align-sm="right"\n                label-size="sm" class="mb-0">\n                <b-input-group size="sm">\n                  <b-form-input id="filter-input" v-model="filter" type="search"\n                    placeholder="Type to Search"></b-form-input>\n\n                  <b-input-group-append>\n                    <b-button :disabled="!filter" @click="filter = \'\'">Clear</b-button>\n                  </b-input-group-append>\n                </b-input-group>\n              </b-form-group>\n            </b-col>\n            <b-col sm="6" class="my-1">\n              <b-form-group label="Per page" label-for="per-page-select" label-cols-sm="6" label-cols-md="4"\n                label-cols-lg="3" label-align-sm="right" label-size="sm" class="mb-0">\n                <b-form-select id="per-page-select" v-model="perPage" :options="pageOptions" size="sm"></b-form-select>\n              </b-form-group>\n            </b-col>\n            <b-col sm="6" class="my-1 text-right">\n              page :{{ currentPage }} / {{ getLastPage(totalRows) }} of {{ totalRows }}\n              <b-button @click="OnAddModal" size="sm"><b>Add</b></b-button>\n            </b-col>\n            <b-col sm="6" class="my-1">\n              <b-pagination v-model="currentPage" :total-rows="totalRows" :per-page="perPage" align="fill" size="sm"\n                class="my-0"></b-pagination>\n            </b-col>\n          </b-row>\n\n        </td>\n      </template>\n    </b-table>\n\n    \x3c!-- Info modal --\x3e\n    <b-modal ref="my-modal" size="sm" :no-close-on-backdrop="true" hide-footer\n      :title="(sel[pri] == 0) ? \'form Add\' : \'form Edit\'">\n      <div class="d-block">\n        <form @submit.stop.prevent="onSaveModal">\n          <div class="text-right">\n            <div class="form-group row" v-for="(v, k) in sel" :key="k">\n              <template v-if="(k == pri)">\n                <label class="col-sm-4 col-form-label">Id</label>\n                <div class="col-sm-8">\n                  <input :readonly="true" :name="k" v-model="sel[k]" :class="{\n                    \'form-control\': true,\n                    \'ko-hop-le\': errors.has(k),\n                  }" type="text" />\n                </div>\n              </template>\n              <template v-if="k == \'Name\'">\n                <label class="col-sm-4 col-form-label">Name</label>\n                <div class="col-sm-8">\n                  <input :name="k" v-model="sel[k]" autocomplete="off" :class="{\n                    \'form-control\': true,\n                    \'ko-hop-le\': errors.has(k),\n                  }" type="text" v-validate="\'required\'" />\n                </div>\n              </template>\n            </div>\n            <button type="submit" class="btn mr-1">Save</button>\n            <button type="button" class="btn" @click="hideModal()">Cancel</button>\n          </div>\n        </form>\n      </div>\n    </b-modal>\n  </b-container>\n</template>\n<script>\n\nimport VeeValidate from "vee-validate";\nimport Vue from "vue";\nVue.use(VeeValidate, {\n  classes: true,\n  fieldsBagName: \'veeFields\'\n});\n\nimport moment from "moment";\n\nimport vSelect from "vue-select";\nVue.component("v-select", vSelect);\n//import "vue-select/dist/vue-select.css";\n\nimport axios from "axios";\nimport Repository from "@/Repository";\n\nexport default {\n  data() {\n    return {\n      items: [\n      ],\n\n      fields: [\n        {\n          key: \'Id\',\n          // formatter: (value, key, item) => {\n          //   let text = value.toString();\n          //   return (text.length < 4) ? text : text.substring(0, 4) + "...";\n          // },\n          sortable: true,\n          thClass: \'text-center\',\n          tdClass: \'text-center align-middle\',\n          //tdClass: \'align-middle\'\n          thStyle: { width: "10%" },\n        },\n        { key: \'Name\', sortable: true, thClass: \'text-center\', tdClass: \'align-middle\', thStyle: { width: "80%" } },\n        {\n          key: \'cmd\',\n          class: \'text-center\',\n          thClass: \'text-center\',\n          tdClass: \'align-middle\',\n          thStyle: { width: "10%" }\n        }\n      ],\n      totalRows: 1,\n      currentPage: 1,\n      perPage: 3,\n      pageOptions: [3,5,10,15,{ value: 100, text: "Show a lot" }],\n      sortBy: \'\',\n      sortDesc: false,\n      sortDirection: \'asc\',\n      filter: null,\n      filterOn: [],\n      infoModal: {\n        id: \'info-modal\',\n        title: \'\',\n        content: \'\'\n      },\n\n      sel: {},\n      pri: \'Id\',\n      title: "Hi modal"\n\n\n    }\n  },\n  computed: {\n    sortOptions() {\n      // Create an options list from our fields\n      return this.fields\n        .filter(f => f.sortable)\n        .map(f => {\n          return { text: f.label, value: f.key }\n        })\n    }\n  },\n  mounted() {\n    // let items = [\n    // ];\n    // for (var i = 1; i < 5; i++) {\n    //   items.push({\n    //     id: i,\n    //     name: `thuc ${i}`\n    //   })\n    // }\n    // this.items = items;\n    // this.totalRows = this.items.length;\n  },\n  methods: {\n    myProvider(ctx) {\n      let currentPage = ctx.currentPage;\n      let perPage = ctx.perPage;\n      let sortBy = ctx.sortBy;\n      let sortDesc = ctx.sortDesc;\n      let vm = this;\n      let url = `/api/Ban/GetPage2`;\n      url = `${url}?page=${currentPage}&size=${perPage}&sortBy=${sortBy}&sortDesc=${sortDesc}`;\n      if (ctx.filter) {\n        let filter = ctx.filter;\n        url = `${url}&filter=${filter}`;\n      }\n      return axios.get(url)\n        .then(res => {\n          //alert(JSON.stringify(res));\n          /*{"data":{"last_page":1,"rowCount":3,"data":[{\n            "Id":1284,"Name":"66"},{"Id":1286,"Name":"22"},{"Id":3769,"Name":"11"}]},"status":200,"statusText":"OK","headers":{"content-length":"109","content-type":"application/json; charset=utf-8","date":"Fri, 30 Dec 202          \n          */\n          //return;\n          vm.last_page = res.data.last_page;\n          vm.totalRows = res.data.rowCount;\n          // if (this.adding == true) {\n          //   let r = {};\n          //   r[this.pri] = 0;\n          //   r["Name"] = "";\n          //   res.data.data.unshift(r);\n          //}\n          return res.data.data;\n        })\n    },\n    createId(){\n      let max=0;\n      this.items.forEach(x=>{\n        if(x[this.pri] > max){\n          max=x[this.pri];\n        }\n      })\n      return max+1;\n    },\n    OnDel(item) {\n      // alert(JSON.stringify(item));\n      // return;\n      // this.delRow(item);\n      this.Del(item[this.pri]).then(res=>{\n        //alert(JSON.stringify(res));\n        if(res.data.kq==\'ok\'){\n          this.$refs.mytable.refresh();\n        }else{\n\n        }\n        this.toast(`${res.data.msg}`);\n      })\n    },\n    delRow(item) {\n      let id = item[this.pri];\n      let index = this.items.findIndex(x => x[this.pri] == id);\n      this.items.splice(index, 1);\n      this.totalRows = this.items.length;\n      this.lastPage = this.getLastPage(this.totalRows);\n    },\n    OnEditModal(item) {\n      this.sel = JSON.parse(JSON.stringify(item));\n      this.showModal();\n    },\n    onSaveModal() {\n      this.$validator.validateAll().then((result) => {\n        if (!result) {\n          this.toast("Không hợp lệ");\n          return;\n        }\n        let r = JSON.parse(JSON.stringify(this.sel));\n        this.Save(r).then(res=>{\n          //alert(JSON.stringify(res));\n          if(res.data.kq==\'ok\'){\n            this.hideModal();\n            this.$refs.mytable.refresh();\n          }else{\n            this.toast(`${res.data.msg}`)\n          }\n        })\n      });\n    },\n    OnAddModal(){\n      this.sel={};\n      this.sel[this.pri]=0;\n      this.sel[\'Name\']=\'bàn số xxxx\'\n      this.showModal();\n    },    \n    getLastPage(count) {\n      let pageSize = this.perPage;//this.tabulator.getPageSize();\n      let du = count % pageSize;\n      return du == 0 ? count / pageSize : (count - du) / pageSize + 1;\n    },\n    info(item, index, button) {\n      this.infoModal.title = `Row index: ${index}`\n      this.infoModal.content = JSON.stringify(item, null, 2)\n      this.$root.$emit(\'bv::show::modal\', this.infoModal.id, button)\n    },\n    resetInfoModal() {\n      this.infoModal.title = \'\'\n      this.infoModal.content = \'\'\n    },\n    onFiltered(filteredItems) {\n      // Trigger pagination to update the number of buttons/pages due to filtering\n      this.totalRows = filteredItems.length\n      this.currentPage = 1\n    },\n    showModal() {\n      this.$refs["my-modal"].show();\n    },\n    hideModal() {\n      this.$refs["my-modal"].hide();\n    },\n    toast(msg, variant = null) {\n      this.$bvToast.toast(msg, {\n        title: `Information`,\n        variant: variant,\n        solid: true,\n      });\n    },\n    async Save(r) {\n      return await Repository.post(`/api/Ban/Save`, r).catch((err) => {\n        console.log(err);\n      });\n    },\n    async Del(id) {\n      return await Repository\n        .get(`/api/Ban/Delete?id=${id}`)\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n\n\n  }\n}\n<\/script>'},60325:function(t,e,n){"use strict";var i=n(9669),s=n.n(i),a=localStorage.getItem("token");e["Z"]=s().create({baseURL:"",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json;charset=utf-8"}})}}]);
//# sourceMappingURL=8104-legacy.f2a61a5c.js.map