"use strict";(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[6773],{46773:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MonHocToan"},[a("raw-loader",{attrs:{mytxt:n(59114).Z}}),a("h1",[e._v("UploadBasic2 page")]),a("com-view-imag",{ref:"listImg"}),a("div",[e._l(e.ds,(function(e){return a("img",{key:e.name,staticClass:"m-1",attrs:{src:e.src,width:"60",height:"70"}})})),a("form",{attrs:{id:"form",name:"form",action:"/uploader",enctype:"multipart/form-data",method:"post"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.onUpload.apply(null,arguments)}}},[a("div",{staticClass:"buttons"},[a("div",{staticClass:"upload-button"},[a("div",{staticClass:"label"},[e._v("Click me!")]),a("input",{ref:"myfile",attrs:{id:"filessfsfsf",name:"files11111",type:"file",size:"1",multiple:""},on:{change:e.OnChange}}),e.ds.length>0?a("button",{staticClass:"mr-1",attrs:{type:"submit"}},[e._v("Upload")]):e._e()])])])],2)],1)},i=[],s=n(19755),l=n.n(s),r=n(51878),o={name:"Tpl",components:{ComViewImag:r.Z},data(){return{ds:[]}},methods:{onUpload(){let e=l()(this.$refs.myfile),t=e.get(0).files;for(var n=0;n<t.length;n++){t[n].name,t[n].lastModified,t[n].size,t[n].type}var a=new FormData;for(n=0;n!=t.length;n++)a.append("files",t[n]);let i=this;l().ajax({url:"/api/FileUpload/Upload2",data:a,processData:!1,contentType:!1,type:"POST",success:function(e){alert("Files Uploaded!"),l()(i.$refs.myfile).val(""),i.ds=[],i.$refs.listImg.loadListImg()}})},OnChange(){let e=l()(this.$refs.myfile),t=e.get(0).files;this.ds=[];for(var n=0;n<t.length;n++){let e={name:t[n].name,lastModified:t[n].lastModified,size:t[n].size,type:t[n].type};this.getReadAsDataURL(t[n]).then((t=>{this.ds.push({name:e.name,src:t})}))}},getReadAsDataURL(e){return new Promise(((t,n)=>{let a=new FileReader;a.onload=()=>{t(a.result)},a.onerror=n,a.readAsDataURL(e)}))}}},d=o,m=n(1001),f=(0,m.Z)(d,a,i,!1,null,null,null),p=f.exports},51878:function(e,t,n){n.d(t,{Z:function(){return f}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",[e._v("View images")]),n("b-row",{staticClass:"border-bottom mb-3"},e._l(e.ds,(function(t){return n("b-col",{key:t,attrs:{md:"1"}},[n("div",{staticClass:"border mb-2 position-relative bg-dark text-light",staticStyle:{height:"50px"}},[n("img",{attrs:{width:"100%",height:"50px",src:"/api/FileUpload/GetImage/"+t,alt:"Image 1"}}),n("span",{staticClass:"position-absolute",staticStyle:{bottom:"1px",right:"1px"}},[n("a",{attrs:{href:"#"},on:{click:function(n){return e.onDel(t)}}},[e._v("Del")])])])])})),1)],1)},i=[],s=n(9669),l=n.n(s),r={name:"HelloWorld",props:{msg:String},data(){return{ds:[]}},mounted(){this.loadListImg()},methods:{loadListImg(){this.getListImg().then((e=>{this.ds=e.data}))},async getListImg(){return await l().get("/api/FileUpload/GetListFile").catch((e=>{console.log(e)}))},onDel(e){this.Del(e).then((e=>{this.loadListImg()}))},async Del(e){return await l().get(`/api/FileUpload/Del/${e}`).catch((e=>{console.log(e)}))}}},o=r,d=n(1001),m=(0,d.Z)(o,a,i,!1,null,null,null),f=m.exports},59114:function(e,t){t["Z"]='<template>\n  <div class="MonHocToan">\n    <raw-loader :mytxt="require(\'!raw-loader!./BasicUpload2.vue\').default"></raw-loader>\n    <h1>UploadBasic2 page</h1>\n    <com-view-imag ref="listImg"></com-view-imag>\n    <div>\n      \x3c!-- <div>{{ds}}</div> --\x3e\n      <img class="m-1" v-for="x in ds" :key="x.name" :src="x.src" width="60" height="70" />\n      <form id="form" name="form" action="/uploader" enctype="multipart/form-data" method="post"\n        @submit.stop.prevent="onUpload">\n        <div class="buttons">\n          <div class="upload-button">\n            <div class="label">Click me!</div>\n            <input id="filessfsfsf" name="files11111" ref="myfile" type="file" size="1" multiple @change="OnChange" />\n            <button v-if="ds.length > 0" type="submit" class="mr-1">Upload</button>\n          </div>\n        </div>\n      </form>\n\n\n    </div>\n  </div>\n</template>\n<script>\nimport $ from "jquery"\n//import ComViewImag from "@/views/Upload/ComViewImage.vue"\nimport ComViewImag from "./ComViewImage.vue";\nexport default {\n  name: \'Tpl\',\n  components: {\n    ComViewImag\n  },\n  data() {\n    return {\n      ds: []\n    }\n  },\n  methods: {\n    onUpload() {\n      let $files = $(this.$refs.myfile);\n      let files = $files.get(0).files;\n      for (var i = 0; i < files.length; i++) {\n        let info = {\n          name: files[i].name,\n          lastModified: files[i].lastModified,\n          size: files[i].size,\n          type: files[i].type\n        }\n        //alert(JSON.stringify(info));\n      }\n      var formData = new FormData();\n      for (var i = 0; i != files.length; i++) {\n        formData.append("files", files[i]);//<-------"files" là tham số api\n      }\n      let that = this;\n      $.ajax(\n        {\n          url: "/api/FileUpload/Upload2",\n          data: formData,\n          processData: false,\n          contentType: false,\n          type: "POST",\n          success: function (data) {\n            alert("Files Uploaded!");\n            $(that.$refs.myfile).val(\'\');\n            that.ds = [];\n            that.$refs.listImg.loadListImg();\n          }\n        }\n      );\n\n    },\n    OnChange() {\n      let $files = $(this.$refs.myfile);\n      let files = $files.get(0).files;\n      this.ds = [];\n      for (var i = 0; i < files.length; i++) {\n        let info = {\n          name: files[i].name,\n          lastModified: files[i].lastModified,\n          size: files[i].size,\n          type: files[i].type\n        }\n        this.getReadAsDataURL(files[i]).then(res => {\n          this.ds.push({\n            name: info.name,\n            src: res\n          })\n        })\n      }\n    },\n    getReadAsDataURL(file) {\n      return new Promise((resolve, reject) => {\n        let reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result);\n        };\n        reader.onerror = reject;\n        reader.readAsDataURL(file);\n      });\n    },\n\n\n  }\n}\n<\/script>\n'}}]);
//# sourceMappingURL=6773.54b7fed0.js.map