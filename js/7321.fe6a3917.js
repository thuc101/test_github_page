"use strict";(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[7321],{37321:function(r,n,e){e.r(n),e.d(n,{default:function(){return m}});var t=function(){var r=this,n=r.$createElement,t=r._self._c||n;return t("div",{staticClass:"home"},[t("raw-loader",{attrs:{mytxt:e(61211).Z}}),t("h1",[r._v("Test login")]),t("b-row",[t("b-col",{attrs:{md:"2"}},[t("b-img",{attrs:{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTv7CjqIxz7niAdt1MxlZM_iPsNAgGcnlKinuS-IiT42mwF-49Qi64wvAQLPvn2ecyL5Lw&usqp=CAU",fluid:"",alt:"Fluid image"}})],1),t("b-col",{attrs:{md:"10"}},[t("div",{staticClass:"border-bottom pb-1 "},[t("b-row",[t("b-col",{staticClass:"border-right",attrs:{md:"7"}},[r._v(" "+r._s(r.user)+" ")]),t("b-col",{staticClass:"p-1",attrs:{md:"5"}},[t("div",{class:{border:!1}},[""==r.token?t("div",{staticClass:"text-right pr-4"},[r._v(" username: "),t("input",{directives:[{name:"model",rawName:"v-model",value:r.acc.username,expression:"acc.username"}],staticClass:"mb-1",domProps:{value:r.acc.username},on:{input:function(n){n.target.composing||r.$set(r.acc,"username",n.target.value)}}}),t("br"),r._v(" password: "),t("input",{directives:[{name:"model",rawName:"v-model",value:r.acc.password,expression:"acc.password"}],staticClass:"mb-1",domProps:{value:r.acc.password},on:{input:function(n){n.target.composing||r.$set(r.acc,"password",n.target.value)}}}),t("br"),t("button",{on:{click:r.onLogin}},[r._v("Login")])]):t("div",[t("button",{on:{click:r.onLogout}},[r._v("Logout")])])])])],1)],1)])],1),t("div",{staticClass:"border mt-1"},[t("b-row",[t("b-col",{attrs:{md:"4"}},[t("div",{staticClass:"border-right bg-light p-1"},[t("button",{on:{click:r.TestAdminOnly}},[r._v("TestAdminOnly")]),t("button",{on:{click:r.TestThemHs}},[r._v("TestThemHs")])])]),t("b-col",{attrs:{md:"8"}},[r._v(" Right ")])],1)],1)],1)},s=[],a=e(70790),o=e(53009),i={components:{},data(){return{acc:{username:"admin",password:"admin"},token:"",user:{}}},mounted(){let r=localStorage.getItem("token")?localStorage.getItem("token"):"";this.token=r,this.GetUserInfo()},methods:{onLogout(){localStorage.removeItem("token"),location.reload()},onLogin(){let r={Username:this.acc.username,Password:this.acc.password};this.Login(r)},async Login(r){return await a.Z.post("/api/NguoiDung5/Login",r).then((r=>{alert("Đăng nhập thành công."),this.user.Username=r.data.kq.Username,this.user.Role=r.data.kq.Role;let n=r.data.kq.Token;localStorage.setItem("token",n),location.reload()})).catch((r=>{o.Z.XuLyErr(r)}))},async GetUserInfo(){return await a.Z.get("/api/NguoiDung5/GetUserInfo").then((r=>{this.user={user:r.data.user,maxlevel:r.data.maxlevel,roles:r.data.roles,roles2:r.data.roles2}})).catch((r=>{o.Z.XuLyErr(r)}))},async TestAdminOnly(){return await a.Z.get("/api/NguoiDung5/TestAdminOnly").then((r=>{alert(JSON.stringify(r))})).catch((r=>{o.Z.XuLyErr(r)}))},async TestThemHs(){return await a.Z.get("/api/NguoiDung5/TestThemHs").then((r=>{alert(JSON.stringify(r))})).catch((r=>{o.Z.XuLyErr(r)}))}}},l=i,c=e(1001),u=(0,c.Z)(l,t,s,!1,null,null,null),m=u.exports},61211:function(r,n){n["Z"]='<template>\r\n    <div class="home">\r\n        <raw-loader :mytxt="require(\'!raw-loader!./TestLogin.vue\').default"></raw-loader>\r\n        <h1>Test login</h1>\r\n        <b-row>\r\n            <b-col md="2">\r\n                <b-img\r\n                    src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTv7CjqIxz7niAdt1MxlZM_iPsNAgGcnlKinuS-IiT42mwF-49Qi64wvAQLPvn2ecyL5Lw&usqp=CAU"\r\n                    fluid alt="Fluid image"></b-img>\r\n            </b-col>\r\n            <b-col md="10">\r\n                \x3c!-- {{ token }} --\x3e\r\n                <div class="border-bottom pb-1 ">\r\n                        <b-row>\r\n                            <b-col md="7" class="border-right">\r\n                                {{ user }}\r\n                            </b-col>\r\n                            <b-col md="5" class="p-1">\r\n                                <div :class="{\'border\': false }">\r\n                                    <div class="text-right pr-4" v-if=" token == \'\' ">\r\n                                        username: <input v-model="acc.username" class="mb-1" /><br>\r\n                                        password: <input v-model="acc.password" class="mb-1" /><br>\r\n                                        <button @click="onLogin">Login</button>\r\n                                    </div>\r\n                                    <div v-else>\r\n                                        <button @click="onLogout">Logout</button>\r\n                                    </div>\r\n                                </div>\r\n                            </b-col>\r\n                        </b-row>\r\n                </div>\r\n            </b-col>\r\n        </b-row>\r\n\r\n        <div class="border mt-1"> \r\n            <b-row> \r\n                <b-col md="4" class=""> \r\n                    <div class="border-right bg-light p-1"> \r\n                        <button @click="TestAdminOnly">TestAdminOnly</button>\r\n                        <button @click="TestThemHs">TestThemHs</button>\r\n                    </div>\r\n                </b-col>\r\n                <b-col md="8"> \r\n                    \r\n                    Right \r\n\r\n                </b-col>\r\n            </b-row>\r\n        </div>\r\n\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nimport fetchClient from \'@/fetchClient\';\r\nimport TumLum from \'@/TumLum\';\r\nexport default {\r\n    components: {\r\n    },\r\n    data(){\r\n        return{\r\n            acc:{\r\n                username:\'admin\',\r\n                password:\'admin\'\r\n            },\r\n            token:\'\',\r\n            user:{},\r\n        }\r\n    },\r\n    mounted(){\r\n        let token = (localStorage.getItem("token")) ? localStorage.getItem("token") : \'\';\r\n        this.token = token;\r\n        this.GetUserInfo();\r\n    },\r\n    methods: {\r\n        onLogout() {\r\n            localStorage.removeItem("token");\r\n            location.reload();\r\n        },\r\n        onLogin(){\r\n            let user={\r\n                Username:this.acc.username,\r\n                Password:this.acc.password\r\n            }\r\n            this.Login(user);\r\n        },\r\n        async Login(r){\r\n            return await fetchClient.post(`/api/NguoiDung5/Login`,r)\r\n            .then(res=>{\r\n                //alert(JSON.stringify(res));\r\n                //return;\r\n                alert(`Đăng nhập thành công.`);\r\n                this.user.Username=res.data.kq.Username;\r\n                this.user.Role=res.data.kq.Role;\r\n                let token = res.data.kq.Token;\r\n                localStorage.setItem("token", token);\r\n                location.reload();\r\n            }).catch(err=>{\r\n                TumLum.XuLyErr(err);\r\n            })\r\n        },\r\n        async GetUserInfo() {\r\n            return await fetchClient.get(`/api/NguoiDung5/GetUserInfo`)\r\n                .then(res => {\r\n                    //alert(JSON.stringify(res));\r\n                    /*\r\n                    {"data":{\r\n                        "user":{\r\n                            "Id":1,\r\n                            "FirstName":"admin",\r\n                            "LastName":"Nguyễn",\r\n                            "Username":"admin","Password":"","Role":"1,4,2,3","Token":null,"TrangThai":true},\r\n                        "maxlevel":9,\r\n                        "roles":\r\n                            ["Admin","User","NhanVien","ChuQuan"],\r\n                        "msg":"Get user info"},"status":200,"\r\n                        "roles2":\r\n                            ["Admin","User","NhanVien","ChuQuan"],"msg":"Get                        \r\n                    */\r\n                    this.user={\r\n                        user:res.data.user,\r\n                        maxlevel:res.data.maxlevel,\r\n                        roles:res.data.roles,\r\n                        roles2:res.data.roles2\r\n                    };\r\n                    //res.data.user;\r\n                })\r\n                .catch(err => {\r\n                    TumLum.XuLyErr(err);\r\n                })\r\n        },\r\n        async TestAdminOnly() {\r\n            return await fetchClient.get(`/api/NguoiDung5/TestAdminOnly`)\r\n                .then(res => {\r\n                    //this.user=res.data.user;\r\n                    alert(JSON.stringify(res));\r\n                })\r\n                .catch(err => {\r\n                    TumLum.XuLyErr(err);\r\n                })\r\n        },\r\n        async TestThemHs() {\r\n            return await fetchClient.get(`/api/NguoiDung5/TestThemHs`)\r\n                .then(res => {\r\n                    //this.user=res.data.user;\r\n                    alert(JSON.stringify(res));\r\n                })\r\n                .catch(err => {\r\n                    TumLum.XuLyErr(err);\r\n                })\r\n        },\r\n\r\n\r\n    }\r\n}\r\n<\/script>\r\n  '},53009:function(r,n){n["Z"]={XuLyErr(r){let n=JSON.parse(JSON.stringify(r)).status;if(400==n){let n=JSON.parse(JSON.stringify(r.response)).data.message;alert(n)}else r.response?401==r.response.status?alert("Chưa đăng nhập hoặc token hết hạn"):403==r.response.status&&alert("Bạn ko có quyền"):r.request?alert(JSON.stringify(r.request)):r.message&&alert(JSON.stringify(r.message))}}},70790:function(r,n,e){var t=e(9669),s=e.n(t);const a=()=>{const r={baseURL:"",method:"get",headers:{"Content-Type":"application/json;charset=utf-8"}};let n=s().create(r);return n.interceptors.request.use((function(r){const n=localStorage.getItem("token");return r.headers.Authorization=n?`Bearer ${n}`:"",r})),n};n["Z"]=a()}}]);
//# sourceMappingURL=7321.fe6a3917.js.map