(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[8178],{77495:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return b}});var n=function(){var t=this,r=t.$createElement,n=t._self._c||r;return n("div",{staticClass:"MonHocToan"},[n("raw-loader",{attrs:{mytxt:e(23985).Z}}),n("div",{},[n("div",{staticClass:"p-3"},[n("b-row",t._l(t.items,(function(r,e){return n("b-col",{key:e,class:{border:!0,"pt-3":!0,"pb-3":!0,"bg-light":e%2==0},attrs:{lg:"4"}},[n("h4",{},[t._v("Id : "+t._s(r.Id)+" - "+t._s(e))]),n("div",[t._v(" "+t._s(r)+" ")]),n("div",{staticClass:"text-right mt-5"},[n("button",{staticClass:"mr-1",on:{click:function(e){return t.onEdit(r)}}},[t._v("Edit")]),n("button",{on:{click:function(e){return t.onDel(r)}}},[t._v("Del")])])])})),1)],1),n("form",{on:{submit:function(r){return r.stopPropagation(),r.preventDefault(),t.onSaveModal.apply(null,arguments)}}},[n("b-modal",{ref:"my-modal",attrs:{size:"md","no-close-on-backdrop":!0,"hide-footer":"",title:0==t.sel2[t.pri]?"form Add":"form Edit"}},[n("div",{staticClass:"d-block"},[n("form",{on:{submit:function(r){return r.stopPropagation(),r.preventDefault(),t.onSaveModal.apply(null,arguments)}}},[n("div",{},[t._l(t.sel2,(function(r,e){return n("div",{key:e,staticClass:"form-group row"},[e==t.pri?[n("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Id")]),n("div",{staticClass:"col-sm-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sel2[e],expression:"sel2[k]"}],class:{"form-control":!0,"ko-hop-le":t.errors.has(e)},attrs:{readonly:!0,name:e,type:"text"},domProps:{value:t.sel2[e]},on:{input:function(r){r.target.composing||t.$set(t.sel2,e,r.target.value)}}})])]:t._e(),"TenLop"==e?[n("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Tên Lớp")]),n("div",{staticClass:"col-sm-8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sel2[e],expression:"sel2[k]"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"ko-hop-le":t.errors.has(e)},attrs:{name:e,autocomplete:"off",type:"text"},domProps:{value:t.sel2[e]},on:{input:function(r){r.target.composing||t.$set(t.sel2,e,r.target.value)}}})])]:t._e()],2)})),n("div",{staticClass:"text-right"},[n("button",{staticClass:"btn mr-1",attrs:{type:"submit"}},[t._v("Save")]),n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(r){return t.hideModal()}}},[t._v("Cancel")])])],2)])])]),n("b-row",[n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Tìm kiếm","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(r){t.filter=r},expression:"filter"}}),n("b-input-group-append",[n("b-button",{attrs:{disabled:!t.filter},on:{click:function(r){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Số dòng","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm"}},[n("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},on:{input:t.onChangePerPage},model:{value:t.perPage,callback:function(r){t.perPage=r},expression:"perPage"}})],1)],1),n("b-col",{staticClass:"my-1 text-right",attrs:{sm:"6"}},[n("span",[t._v("page : "+t._s(t.currentPage)+" / "+t._s(t.last_page)+" of "+t._s(t.totalRows)+" ")]),n("b-button",{staticClass:"mr-1 mb-1",attrs:{disabled:1==t.adding||1==t.isEditing(),size:"sm"},on:{click:t.OnAdd}},[n("b",[t._v("Add")])])],1),n("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[n("b-pagination",{ref:"mypage",attrs:{disabled:1==t.adding||1==t.isEditing(),"total-rows":t.totalRows,"per-page":t.perPage,size:"sm",align:"fill","first-text":"First","prev-text":"Prev","next-text":"Next","last-text":"Last"},on:{input:t.onChangePage},model:{value:t.currentPage,callback:function(r){t.currentPage=r},expression:"currentPage"}})],1)],1)],1),n("b-modal",{attrs:{id:t.infoModal.id,title:t.infoModal.title,"ok-only":""},on:{hide:t.resetInfoModal}},[n("pre",[t._v(t._s(t.infoModal.content))])])],1)],1)},a=[],s=e(77673),i=e(16198),o=(e(41539),e(38862),e(92222),e(57327),e(54747),e(47941),e(34553),e(40561),e(12954)),l=e(20144),c=e(85890),d=e(96486),u=e(70790),f=e(53009);e(30381);l["default"].use(o.ZP,{classes:!0,fieldsBagName:"veeFields"});var h={components:{VueTypeaheadBootstrap:c.Z},data:function(){return{items:[],fields:[],totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15,{value:100,text:"Show a lot"}],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},sel:{},sel2:{},pri:"Id",last_page:0,adding:!1,ListAuto:[],title:"hello title",url:"/api/LopHoc4"}},watch:{last_page:function(t,r){},currentPage:function(t){},totalRows:function(t,r){}},computed:{},mounted:function(){this.Lds(this.currentPage,this.perPage)},methods:{onChangePerPage:function(){this.Lds(this.currentPage,this.perPage)},OnSearch:(0,d.debounce)((function(t){var r=this;fetch("/api/Ban/AutoComplete?q=".concat(t)).then((function(t){return t.json()})).then((function(t){console.log(JSON.stringify(t)),r.ListAuto=t.items}))}),500),onPagingInput:function(){},myProvider:function(t){var r=this,e=t.currentPage,n=t.perPage,a=t.sortBy,s=t.sortDesc,i=this,o="".concat(this.url,"/GetPage2");if(o="".concat(o,"?page=").concat(e,"&size=").concat(n,"&sortBy=").concat(a,"&sortDesc=").concat(s),t.filter){var l=t.filter;o="".concat(o,"&filter=").concat(l)}return u.Z.get(o).then((function(t){if(i.last_page=t.data.last_page,i.totalRows=t.data.rowCount,i.items=t.data.data,1==r.adding){var e={};e[r.pri]=0,e["TenKhach"]="xxx",e["Ngay"]=new Date,t.data.data.unshift(e)}return i.mapData(t.data.data)})).catch((function(t){f.Z.XuLyErr(t)}))},mapData:function(t){var r=[];return t.forEach((function(t){var e={};Object.keys(t).forEach((function(r){var n=r;e[n]=t[r]})),r.push(e)})),r},onChangePage:function(){this.Lds(this.currentPage,this.perPage),this.sel={},this.adding=!1},OnAdd:function(){this.sel2={Id:0,TenLop:"sfsfsf"},this.showModal()},onEdit:function(t){alert("edit ".concat(JSON.stringify(t)))},onSaveModal:function(){var t=this;this.$validator.validateAll().then((function(r){if(r){var e=JSON.parse(JSON.stringify(t.sel2));0==e[t.pri]?t.Add(e):t.Update(e)}else t.toast("Không hợp lệ")}))},onSave:function(t){var r=this;this.$validator.validateAll().then((function(e){if(e){var n=JSON.parse(JSON.stringify(t));0==n[r.pri]?r.Add(n).then((function(t){"ok"==t.data.kq&&(r.toast("".concat(t.data.msg)),r.adding=!1,r.$refs.mytable.refresh())})):r.Update(n).then((function(t){r.toast("".concat(t.data.msg)),r.adding=!1,r.sel={},r.$refs.mytable.refresh()}))}else r.toast("Không hợp lệ")}))},OnCancel:function(t){0!=t[this.pri]?(this.doCancel(t),this.sel={}):(this.adding=!1,this.$refs.mytable.refresh())},onDel:function(t){alert("Del ".concat(JSON.stringify(t)))},delRow:function(t){var r=t.id,e=this.items.findIndex((function(t){return t.id==r}));this.items.splice(e,1)},isEditing:function(){return"{}"!=JSON.stringify(this.sel)},isAdded:function(){var t=!1;return this.items.forEach((function(r){0==r.id&&(t=!0)})),t},doCancel:function(t){for(var r in t)t[r]!=this.sel[r]&&(t[r]=this.sel[r])},getLastPage:function(t){var r=this.perPage,e=t%r;return 0==e?t/r:(t-e)/r+1},gotoPage:function(t){this.currentPage=t,this.$refs.mytable.refresh()},toast:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$bvToast.toast(t,{title:"Information",variant:r,solid:!0})},Add:function(t){var r=this;return(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Z.post("".concat(r.url,"/Add"),t).then((function(t){r.toast("".concat(t.data.msg)),r.hideModal(),r.$refs.mytable.refresh()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},Update:function(t){var r=this;return(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Z.post("".concat(r.url,"/Update"),t).then((function(t){r.hideModal(),r.toast("".concat(t.data.msg)),r.$refs.mytable.refresh()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},Del:function(t){var r=this;return(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("".concat(r.url,"/Delete?id=").concat(t)).then((function(t){r.toast("".concat(t.data.msg)),r.$refs.mytable.refresh()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},getById:function(t){var r=this;return(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("".concat(r.url,"/GetById?id=").concat(t)).then((function(t){r.sel2=t.data,r.showModal()})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},Lds:function(t,r){var e=this;return(0,i.Z)((0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,u.Z.get("/api/LopHoc4/GetPage2?page=".concat(t,"&size=").concat(r)).then((function(t){e.items=t.data.data,e.last_page=t.data.last_page,e.totalRows=t.data.rowCount})).catch((function(t){f.Z.XuLyErr(t)}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},info:function(t,r,e){this.infoModal.title="Row index: ".concat(r),this.infoModal.content=JSON.stringify(t,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,e)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},onFiltered:function(t){console.log("onFiltered"+JSON.stringify(t)),this.totalRows=t.length,this.currentPage=1},showModal:function(){this.$refs["my-modal"].show()},hideModal:function(){this.$refs["my-modal"].hide()}}},p=h,m=e(1001),g=(0,m.Z)(p,n,a,!1,null,null,null),b=g.exports},92222:function(t,r,e){"use strict";var n=e(82109),a=e(17854),s=e(47293),i=e(43157),o=e(70111),l=e(47908),c=e(26244),d=e(86135),u=e(65417),f=e(81194),h=e(5112),p=e(7392),m=h("isConcatSpreadable"),g=9007199254740991,b="Maximum allowed index exceeded",v=a.TypeError,y=p>=51||!s((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),w=f("concat"),k=function(t){if(!o(t))return!1;var r=t[m];return void 0!==r?!!r:i(t)},P=!y||!w;n({target:"Array",proto:!0,arity:1,forced:P},{concat:function(t){var r,e,n,a,s,i=l(this),o=u(i,0),f=0;for(r=-1,n=arguments.length;r<n;r++)if(s=-1===r?i:arguments[r],k(s)){if(a=c(s),f+a>g)throw v(b);for(e=0;e<a;e++,f++)e in s&&d(o,f,s[e])}else{if(f>=g)throw v(b);d(o,f++,s)}return o.length=f,o}})},47941:function(t,r,e){var n=e(82109),a=e(47908),s=e(81956),i=e(47293),o=i((function(){s(1)}));n({target:"Object",stat:!0,forced:o},{keys:function(t){return s(a(t))}})},23985:function(t,r){"use strict";r["Z"]='<template>\r\n    <div class="MonHocToan">\r\n        <raw-loader :mytxt="require(\'!raw-loader!./LopHocListModal2.vue\').default"></raw-loader>\r\n\r\n        <div class="">\r\n            <div class="p-3">\r\n                <b-row>\r\n                    <b-col :class="{ \'border\': true, \'pt-3\': true, \'pb-3\': true, \'bg-light\': (k % 2 == 0) ? true : false }"\r\n                        lg="4" v-for="(v, k) in items" :key="k">\r\n                        <h4 class="">Id : {{ v.Id }} - {{ k }}</h4>\r\n                        <div>\r\n                            {{ v }}\r\n                        </div>\r\n                        <div class="text-right mt-5">\r\n                            <button @click="onEdit(v)" class="mr-1">Edit</button>\r\n                            <button @click="onDel(v)">Del</button>\r\n                        </div>\r\n                    </b-col>\r\n                </b-row>\r\n            </div>\r\n            <form @submit.stop.prevent="onSaveModal">\r\n                <b-modal ref="my-modal" size="md" :no-close-on-backdrop="true" hide-footer\r\n                    :title="(sel2[pri] == 0) ? \'form Add\' : \'form Edit\'">\r\n                    <div class="d-block">\r\n                        <form @submit.stop.prevent="onSaveModal">\r\n                            <div class="">\r\n                                <div class="form-group row" v-for="(v, k) in sel2" :key="k">\r\n\r\n                                    <template v-if="(k == pri)">\r\n                                        <label class="col-sm-4 col-form-label">Id</label>\r\n                                        <div class="col-sm-8">\r\n                                            <input :readonly="true" :name="k" v-model="sel2[k]" :class="{\r\n                                                \'form-control\': true,\r\n                                                \'ko-hop-le\': errors.has(k),\r\n                                            }" type="text" />\r\n                                        </div>\r\n                                    </template>\r\n                                    <template v-if="k == \'TenLop\'">\r\n                                        <label class="col-sm-4 col-form-label">Tên Lớp</label>\r\n                                        <div class="col-sm-8">\r\n                                            <input :name="k" v-model="sel2[k]" autocomplete="off" :class="{\r\n                                                \'form-control\': true,\r\n                                                \'ko-hop-le\': errors.has(k),\r\n                                            }" type="text" v-validate="\'required\'" />\r\n                                        </div>\r\n                                    </template>\r\n\r\n                                </div>\r\n                                <div class="text-right">\r\n                                    <button type="submit" class="btn mr-1">Save</button>\r\n                                    <button type="button" class="btn" @click="hideModal()">Cancel</button>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </b-modal>\r\n\r\n                <b-row>\r\n                    <b-col sm="6" class="my-1">\r\n                        <b-form-group label="Tìm kiếm" label-for="filter-input" label-cols-sm="3" label-align-sm="right"\r\n                            label-size="sm" class="mb-0">\r\n                            <b-input-group size="sm">\r\n                                <b-form-input id="filter-input" v-model="filter" type="search" placeholder="Type to Search">\r\n                                </b-form-input>\r\n\r\n                                <b-input-group-append>\r\n                                    <b-button :disabled="!filter" @click="filter = \'\'">Clear</b-button>\r\n                                </b-input-group-append>\r\n                            </b-input-group>\r\n                        </b-form-group>\r\n                    </b-col>\r\n                    <b-col sm="6" class="my-1">\r\n                        <b-form-group label="Số dòng" label-for="per-page-select" label-cols-sm="6" label-cols-md="4"\r\n                            label-cols-lg="3" label-align-sm="right" label-size="sm" class="mb-0">\r\n                            <b-form-select @input="onChangePerPage" id="per-page-select" v-model="perPage"\r\n                                :options="pageOptions" size="sm">\r\n                            </b-form-select>\r\n                        </b-form-group>\r\n                    </b-col>\r\n\r\n                    <b-col sm="6" class="my-1 text-right">\r\n                        <span>page : {{ currentPage }} / {{ last_page }} of {{ totalRows }} </span>\r\n                        <b-button :disabled="adding == true || isEditing() == true" class="mr-1 mb-1" size="sm"\r\n                            @click="OnAdd">\r\n                            <b>Add</b></b-button>\r\n                    </b-col>\r\n                    <b-col sm="6" class="my-1">\r\n                        <b-pagination :disabled="adding == true || isEditing() == true" ref="mypage" v-model="currentPage"\r\n                            :total-rows="totalRows" :per-page="perPage" size="sm" align="fill" @input="onChangePage"\r\n                            first-text="First" prev-text="Prev" next-text="Next" last-text="Last">\r\n                        </b-pagination>\r\n                    </b-col>\r\n                </b-row>\r\n            </form>\r\n            \x3c!-- Info modal --\x3e\r\n            <b-modal :id="infoModal.id" :title="infoModal.title" ok-only @hide="resetInfoModal">\r\n                <pre>{{ infoModal.content }}</pre>\r\n            </b-modal>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n\r\nimport VeeValidate from "vee-validate";\r\nimport Vue from "vue";\r\nVue.use(VeeValidate, {\r\n    classes: true,\r\n    fieldsBagName: \'veeFields\'\r\n});\r\n\r\nimport VueTypeaheadBootstrap from "vue-typeahead-bootstrap";\r\nimport { debounce } from "lodash";\r\n\r\nimport fetchClient from "@/fetchClient";\r\nimport TumLum from "@/TumLum";\r\n\r\nimport moment from "moment"\r\n\r\nexport default {\r\n    components: {\r\n        VueTypeaheadBootstrap,\r\n    },\r\n    data() {\r\n        return {\r\n            items: [\r\n            ],\r\n            fields: [],\r\n            totalRows: 1,\r\n            currentPage: 1,\r\n            perPage: 5,\r\n            pageOptions: [5, 10, 15, { value: 100, text: "Show a lot" }],\r\n            sortBy: \'\',\r\n            sortDesc: false,\r\n            sortDirection: \'asc\',\r\n            filter: null,\r\n            filterOn: [],\r\n            infoModal: {\r\n                id: \'info-modal\',\r\n                title: \'\',\r\n                content: \'\'\r\n            },\r\n            sel: {},\r\n            sel2: {},\r\n            pri: "Id",\r\n            last_page: 0,\r\n            adding: false,\r\n            ListAuto: [],\r\n\r\n            title: "hello title",\r\n            url: `/api/LopHoc4`,\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        last_page: function (newValue, oldValue) {\r\n        },\r\n        currentPage: function (val) {\r\n        },\r\n        totalRows: function (newValue, oldValue) {\r\n        }\r\n    },\r\n    computed: {\r\n    },\r\n    mounted() {\r\n        this.Lds(this.currentPage, this.perPage);\r\n    },\r\n    methods: {\r\n        onChangePerPage() {\r\n            this.Lds(this.currentPage, this.perPage);\r\n        },\r\n\r\n        OnSearch: debounce(function (query) {\r\n            fetch(`/api/Ban/AutoComplete?q=${query}`)\r\n                .then((response) => {\r\n                    return response.json();\r\n                })\r\n                .then((data) => {\r\n                    console.log(JSON.stringify(data))\r\n                    this.ListAuto = data.items;\r\n                });\r\n        }, 500),\r\n        onPagingInput() {\r\n        },\r\n        myProvider(ctx) {\r\n            let currentPage = ctx.currentPage;\r\n            let perPage = ctx.perPage;\r\n            let sortBy = ctx.sortBy;\r\n            let sortDesc = ctx.sortDesc;\r\n            let vm = this;\r\n            let url = `${this.url}/GetPage2`;\r\n            url = `${url}?page=${currentPage}&size=${perPage}&sortBy=${sortBy}&sortDesc=${sortDesc}`;\r\n            if (ctx.filter) {\r\n                let filter = ctx.filter;\r\n                url = `${url}&filter=${filter}`;\r\n            }\r\n            return fetchClient.get(url)\r\n                .then(res => {\r\n                    vm.last_page = res.data.last_page;\r\n                    vm.totalRows = res.data.rowCount;\r\n                    vm.items = res.data.data;\r\n                    if (this.adding == true) {\r\n                        let r = {};\r\n                        r[this.pri] = 0;\r\n                        r["TenKhach"] = "xxx";\r\n                        r["Ngay"] = new Date();\r\n                        res.data.data.unshift(r);\r\n                    }\r\n                    return vm.mapData(res.data.data); //res.data.data;\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        mapData(data) {\r\n            let kq = [];\r\n            data.forEach(obj => {\r\n                let x = {};\r\n                Object.keys(obj).forEach(key => {\r\n                    let k = key;\r\n                    x[k] = obj[key];\r\n                });\r\n                kq.push(x);\r\n            })\r\n            return kq;\r\n        },\r\n        onChangePage() {\r\n            this.Lds(this.currentPage, this.perPage);\r\n            this.sel = {};\r\n            this.adding = false;\r\n        },\r\n        OnAdd() {\r\n            this.sel2 = {\r\n                Id: 0,\r\n                TenLop: "sfsfsf"\r\n            }\r\n            this.showModal();\r\n        },\r\n        onEdit(item) {\r\n            alert(`edit ${JSON.stringify(item)}`)\r\n        },\r\n        // OnEdit(item) {\r\n        //     alert(\'edit\');\r\n        //     return;\r\n        //     if (JSON.stringify(this.sel) != "{}" || this.adding == true) {\r\n        //         return;\r\n        //     }\r\n        //     /*\r\n        //     this.sel2 = JSON.parse(JSON.stringify(item));\r\n        //     this.showModal();\r\n        //     */\r\n        //     this.getById(item[this.pri]);\r\n        //     // this.getById(item[this.pri]).then(res => {\r\n        //     //     this.sel2 = res.data;\r\n        //     //     this.showModal();\r\n        //     //{"data":{"Id":1,"TenLop":"Lop 11A1sfsf"},"status":200,"statusText":"OK","headers":{"content-length":"32","            \r\n        //     // })\r\n        // },\r\n        onSaveModal() {\r\n            this.$validator.validateAll().then((result) => {\r\n                if (!result) {\r\n                    this.toast("Không hợp lệ");\r\n                    return;\r\n                }\r\n                let r = JSON.parse(JSON.stringify(this.sel2));\r\n                if (r[this.pri] == 0) {\r\n                    this.Add(r);\r\n                } else {\r\n                    this.Update(r);\r\n                }\r\n            });\r\n        },\r\n\r\n        onSave(item) {\r\n            this.$validator.validateAll().then((result) => {\r\n                if (!result) {\r\n                    this.toast("Không hợp lệ");\r\n                    return;\r\n                }\r\n                let r = JSON.parse(JSON.stringify(item));\r\n                if (r[this.pri] == 0) {\r\n                    this.Add(r).then(res => {\r\n                        if (res.data.kq == \'ok\') {\r\n                            this.toast(`${res.data.msg}`);\r\n                            this.adding = false;\r\n                            this.$refs.mytable.refresh();\r\n                        }\r\n                    })\r\n                } else {\r\n                    //tien hanh sua\r\n                    this.Update(r).then(res => {\r\n                        this.toast(`${res.data.msg}`);\r\n                        this.adding = false;\r\n                        this.sel = {};\r\n                        this.$refs.mytable.refresh();\r\n                    })\r\n                }\r\n            });\r\n        },\r\n        OnCancel(item) {\r\n            if (item[this.pri] != 0) {\r\n                this.doCancel(item);\r\n                this.sel = {};\r\n            } else {\r\n                this.adding = false;\r\n                this.$refs.mytable.refresh();\r\n            }\r\n        },\r\n        onDel(item) {\r\n            alert(`Del ${JSON.stringify(item)}`);\r\n        },\r\n        /*\r\n        OnDel(item) {\r\n            this.Del(item[this.pri]).then(res => {\r\n                if (res.data.kq == \'nook\') {\r\n                    this.toast(`${res.data.msg}`);\r\n                    return;\r\n                }\r\n                this.toast(`${res.data.msg}`);\r\n                let lastPage = this.getLastPage(this.totalRows - 1);\r\n                if (lastPage < this.currentPage) this.currentPage = lastPage;\r\n                this.$refs.mytable.refresh();\r\n            })\r\n        },\r\n        */\r\n        delRow(item) {\r\n            let id = item.id;\r\n            let index = this.items.findIndex(x => x.id == id);\r\n            this.items.splice(index, 1);\r\n        },\r\n        isEditing() {\r\n            return JSON.stringify(this.sel) != "{}"\r\n        },\r\n        isAdded() {\r\n            let kq = false;\r\n            this.items.forEach(x => {\r\n                if (x.id == 0) kq = true;\r\n            })\r\n            return kq;\r\n        },\r\n        doCancel(item) {\r\n            for (let key in item) {\r\n                if (item[key] != this.sel[key]) {\r\n                    item[key] = this.sel[key]\r\n                }\r\n            }\r\n        },\r\n        getLastPage(count) {\r\n            let pageSize = this.perPage;//this.tabulator.getPageSize();\r\n            let du = count % pageSize;\r\n            return du == 0 ? count / pageSize : (count - du) / pageSize + 1;\r\n        },\r\n        gotoPage(page) {\r\n            this.currentPage = page;\r\n            this.$refs.mytable.refresh();\r\n        },\r\n        toast(msg, variant = null) {\r\n            this.$bvToast.toast(msg, {\r\n                title: `Information`,\r\n                variant: variant,\r\n                solid: true,\r\n            });\r\n        },\r\n\r\n        async Add(r) {\r\n            return await fetchClient.post(`${this.url}/Add`, r)\r\n                .then(res => {\r\n                    this.toast(`${res.data.msg}`);\r\n                    this.hideModal();\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async Update(r) {\r\n            return await fetchClient.post(`${this.url}/Update`, r)\r\n                .then(res => {\r\n                    this.hideModal();\r\n                    this.toast(`${res.data.msg}`)\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async Del(id) {\r\n            return await fetchClient.get(`${this.url}/Delete?id=${id}`)\r\n                .then(res => {\r\n                    this.toast(`${res.data.msg}`)\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async getById(id) {\r\n            return await fetchClient.get(`${this.url}/GetById?id=${id}`)\r\n                .then(res => {\r\n                    this.sel2 = res.data;\r\n                    this.showModal();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n\r\n        async Lds(page, size) {\r\n            return await fetchClient.get(`/api/LopHoc4/GetPage2?page=${page}&size=${size}`)\r\n                .then(res => {\r\n                    this.items = res.data.data;\r\n                    this.last_page = res.data.last_page;\r\n                    this.totalRows = res.data.rowCount;\r\n\r\n                    /*\r\n                    vm.last_page = res.data.last_page;\r\n                    vm.totalRows = res.data.rowCount;\r\n                    vm.items = res.data.data;\r\n                    if (this.adding == true) {\r\n                        let r = {};\r\n                        r[this.pri] = 0;\r\n                        r["TenKhach"] = "xxx";\r\n                        r["Ngay"] = new Date();\r\n                        res.data.data.unshift(r);\r\n                    }\r\n                    return vm.mapData(res.data.data); //res.data.data;\r\n                    */\r\n\r\n\r\n                    //alert(JSON.stringify(res));\r\n                    /*{"data":{\r\n                        "last_page":2,\r\n                        "rowCount":6,\r\n                        "data":[{\r\n                            "Id":1,\r\n                            "TenLop":"Lớp 11A"}\r\n                    */\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        info(item, index, button) {\r\n            this.infoModal.title = `Row index: ${index}`\r\n            this.infoModal.content = JSON.stringify(item, null, 2)\r\n            this.$root.$emit(\'bv::show::modal\', this.infoModal.id, button)\r\n        },\r\n        resetInfoModal() {\r\n            this.infoModal.title = \'\'\r\n            this.infoModal.content = \'\'\r\n        },\r\n        onFiltered(filteredItems) {\r\n            console.log(\'onFiltered\' + JSON.stringify(filteredItems));\r\n            this.totalRows = filteredItems.length\r\n            this.currentPage = 1\r\n        },\r\n        showModal() {\r\n            this.$refs["my-modal"].show();\r\n        },\r\n        hideModal() {\r\n            this.$refs["my-modal"].hide();\r\n        },\r\n    }\r\n}\r\n<\/script>\r\n  \r\n  '},53009:function(t,r,e){"use strict";e(38862);r["Z"]={XuLyErr:function(t){var r=JSON.parse(JSON.stringify(t)).status;if(400==r){var e=JSON.parse(JSON.stringify(t.response)).data.message;alert(e)}else t.response?401==t.response.status?alert("Chưa đăng nhập hoặc token hết hạn"):403==t.response.status&&alert("Bạn ko có quyền"):t.request?alert(JSON.stringify(t.request)):t.message&&alert(JSON.stringify(t.message))}}},70790:function(t,r,e){"use strict";var n=e(9669),a=e.n(n),s=function(){var t={baseURL:"",method:"get",headers:{"Content-Type":"application/json;charset=utf-8"}},r=a().create(t);return r.interceptors.request.use((function(t){var r=localStorage.getItem("token");return t.headers.Authorization=r?"Bearer ".concat(r):"",t})),r};r["Z"]=s()}}]);
//# sourceMappingURL=8178-legacy.9c808d87.js.map