(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[5789],{55789:function(t,r,n){"use strict";n.r(r),n.d(r,{default:function(){return v}});var e=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"tpl"},[e("raw-loader",{attrs:{mytxt:n(80547).Z}}),e("h1",[t._v("This is Tabulator2")]),e("div",[e("div",{staticClass:"mb-1"},[e("button",{staticClass:"mr-1",on:{click:t.onTest}},[t._v("Test")]),e("button",{staticClass:"mr-1",on:{click:t.onAdd}},[t._v("Add")])]),t._v(" "+t._s(t.msg)+" "),e("div",{ref:"table"})]),e("b-modal",{ref:"my-modal2",attrs:{id:"modal-1",size:"sm","no-close-on-backdrop":!0,"hide-footer":"",title:"BootstrapVue"}},[e("form",{on:{submit:function(r){return r.stopPropagation(),r.preventDefault(),t.onSaveModal.apply(null,arguments)}}},[e("div",[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-sm-4 col-form-label"},[t._v("Id")]),e("div",{staticClass:"col-sm-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.r.id,expression:"r.id"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.r.id},on:{input:function(r){r.target.composing||t.$set(t.r,"id",r.target.value)}}})])]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-sm-4 col-form-label"},[t._v(" Name ")]),e("div",{staticClass:"col-sm-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.r.name,expression:"r.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"ko-hop-le":t.errors.has("name")},attrs:{type:"text",name:"name",autocomplete:"off"},domProps:{value:t.r.name},on:{input:function(r){r.target.composing||t.$set(t.r,"name",r.target.value)}}})])]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-sm-4 col-form-label"},[t._v(" Ngay ")]),e("div",{staticClass:"col-sm-8"},[e("b-form-datepicker",{staticClass:"mb-2",attrs:{"date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:"vi"},model:{value:t.r.ngay,callback:function(r){t.$set(t.r,"ngay",r)},expression:"r.ngay"}})],1)]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-sm-4 col-form-label"},[t._v(" Act ")]),e("div",{staticClass:"col-sm-8"},[e("b-form-checkbox",{attrs:{name:"checkbox-1",value:"true","unchecked-value":"false"},on:{change:t.ChangeAct},model:{value:t.r.act,callback:function(r){t.$set(t.r,"act",r)},expression:"r.act"}},[t._v(" Active ")])],1)]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-sm-4 col-form-label"},[t._v(" Thành phố "+t._s(t.errors.has("tp"))+" ")]),e("div",{staticClass:"col-sm-8"},[e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{danger:t.errors.has("tp")},attrs:{name:"tp",reduce:function(t){return t.id},options:t.tps,"has-error":t.errors.has("tp")},model:{value:t.r.tp,callback:function(r){t.$set(t.r,"tp",r)},expression:"r.tp"}})],1)]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-sm-4 col-form-label"},[t._v(" Quyền ")]),e("div",{staticClass:"col-sm-8"},[e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{danger:t.errors.has("quyen")},attrs:{multiple:"",name:"quyen",options:["Admin","User","Editor"]},model:{value:t.r.quyen,callback:function(r){t.$set(t.r,"quyen",r)},expression:"r.quyen"}})],1)])]),e("div",{staticClass:"float-right"},[e("button",{staticClass:"btn btn-primary mr-1 btn-sm",attrs:{type:"submit"}},[t._v("Save")]),e("button",{staticClass:"btn btn-sm",attrs:{type:"button"},on:{click:function(r){return t.hideModal()}}},[t._v("Cancel")])])])])],1)},a=[],o=(n(69826),n(41539),n(34553),n(92222),n(38862),n(54747),n(60911)),l=n(19755),i=n.n(l),s=n(12954),d=n(20144),c=n(19938),u=n.n(c),h=n(30381),m=n.n(h);d["default"].use(s.ZP,{classes:!0}),d["default"].component("v-select",u());var g={name:"Tpl",components:{},data:function(){return{msg:"thuc 101",tabulator:null,tableData:[{id:1,name:"thuc 101",ngay:new Date,act:!0,tp:"QN",quyen:[]},{id:2,name:"thuc 102",ngay:new Date,act:!1,tp:"QN",quyen:[]},{id:3,name:"thuc 103",ngay:new Date,act:!0,tp:"QN",quyen:[]}],r:{},tps:[{label:"Huế",id:"HUE"},{label:"Sài gòn",id:"SG"},{label:"Đà nẵng",id:"DN"},{label:"Quảng ngãi",id:"QN"}]}},mounted:function(){var t=this,r=function(t,r){var n=t.getValue();return n&&(n=m()(n,"YYYY/MM/DD").format("DD/MM/YYYY")),n};this.tabulator=new o.Ae(this.$refs.table,{reactiveData:!0,data:this.tableData,responsiveLayout:"hide",addRowPos:"bottom",history:!0,pagination:"local",paginationSize:3,paginationCounter:"rows",paginationInitialPage:1,paginationSizeSelector:[5,10,20,30,50],movableColumns:!0,initialSort:[{column:"name",dir:"asc"}],height:i()(window).innerHeight()-400,layout:"fitDataFill",footerElement:"<button id='customButton' class='mr-1'>Custom Button</button>",index:"id",columns:[{title:"STT",formatter:"rownum",headerHozAlign:"center",hozAlign:"center"},{title:"Cmd",headerHozAlign:"center",hozAlign:"center",headerSort:!1,width:75,formatter:function(r,n,e){e((function(){i()(r.getElement()).find("#edit").on("click",r.getRow(),t.onEdit),i()(r.getElement()).find("#del").on("click",r.getRow(),t.onDel)}));var a=i()("<div>"),o=i()("<button>",{text:"Edit",class:"mr-1"}).attr("id","edit"),l=i()("<button>",{text:"Del",class:"mr-1"}).attr("id","del");return a.append(o),a.append(l),a[0]}},{title:"Id",field:"id",width:60,hozAlign:"center"},{title:"Name",field:"name",width:200},{title:"Ngày",headerHozAlign:"center",hozAlign:"center",field:"ngay",width:100,formatter:r},{title:"Act",field:"act",headerHozAlign:"center",hozAlign:"center",formatter:function(t,r,n){var e=i()("<input type='checkbox'>").prop("checked",t.getValue()).attr("disabled",!0);return e[0]}},{title:"Thành phố",headerHozAlign:"center",hozAlign:"center",field:"tp",width:130,formatter:function(r,n,e){var a=r.getValue(),o=(t.tps,t.tps.findIndex((function(t){return t.id==a})));return"".concat(a," - ").concat(t.tps[o].label)}},{title:"Quyền",headerHozAlign:"center",hozAlign:"center",field:"quyen",width:150,formatter:function(t,r,n){return JSON.stringify(t.getValue())}}]}),this.tabulator.on("dataLoaded",(function(r){var n=[{id:1,name:"thuc 101",ngay:new Date,act:!0,tp:"QN",quyen:[]},{id:2,name:"thuc 102",ngay:new Date,act:!1,tp:"QN",quyen:[]},{id:3,name:"thuc 103",ngay:new Date,act:!0,tp:"QN",quyen:[]}];n.forEach((function(t){}));var e=i()(t.$refs.table),a=i()("<span id='total' class='mr-1'>").text("[total]");e.find(".tabulator-footer-contents span.tabulator-paginator").prepend(a),e.find("#customButton").on("click",(function(){alert("hello")}));var o=i()("<button class='mr-1'>MyAdd</button>");o.on("click",(function(){alert("hello myAddBtn")})),e.find(".tabulator-footer-contents span.tabulator-paginator").prepend(o)})),this.tabulator.on("pageLoaded",(function(r){var n=i()(t.$refs.table);n.find(".tabulator-footer-contents").find("span#total").text("[".concat((new Date).getTime(),"]"))})),this.tabulator.on("dataChanged",(function(r){console.log("data change");var n={data:r,tableData:t.tableData,getPageSize:t.tabulatorGetPageSize(),getPage:t.tabulatorGetPage(),total:t.tabulatorGetData().length,lastPage:t.tabulatorGetLastPage(t.tabulatorGetData().length)};t.msg=n})),this.tabulator.on("cellEdited",(function(t){t.getRow().getIndex(),t.getRow();t.getData().dirty=!0})),i()("#customButton").on("click",(function(){alert("hello")}))},watch:{tableData:{handler:function(t){this.tabulator.replaceData(t)},deep:!0}},created:function(){this.$nextTick((function(){new Date,new Date,new Date}))},methods:{ChangeAct:function(){var t="true"==this.r.act;this.r.act=t},onSaveModal:function(){var t=this;this.$validator.validateAll().then((function(r){if(r){var n=JSON.parse(JSON.stringify(t.r));0==n.id?(n.id=(new Date).getTime(),t.tabulatorAdd(n),t.hideModal()):(t.tabulatorUpdate(n),t.hideModal())}else t.toast("Không hợp lệ")}))},onAdd:function(){this.r={id:0,name:"thuc 101",ngay:new Date,act:!0,tp:"QN",quyen:[]},this.showModal()},onDataLoaded:function(t){var r=[];t.forEach((function(t,n){r.push({x:t.id})}));var n=this.tabulator.getPage();this.msg={ar:r,curPage:n}},add:function(t){this.tabulator.addData([t],!0)},onTest:function(){var t=this.tabulatorGetData(),r={ar:t,getPageSize:this.tabulatorGetPageSize(),getPage:this.tabulatorGetPage(),total:this.tabulatorGetData().length,lastPage:this.tabulatorGetLastPage(this.tabulatorGetData().length)};alert(JSON.stringify(r))},onSave:function(t){t.preventDefault();var r=t.data;if(1==this.rowValidate(r)){var n=r.getData();JSON.parse(JSON.stringify(n))}else this.toast("Dữ liệu không hợp lệ!")},onCancel:function(t){t.preventDefault(),this.setPage(this.getPage())},onDel:function(t){t.preventDefault();var r=t.data,n=r.getIndex();this.tabulator.deleteRow(n)},onEdit:function(t){var r=t.data,n=r.getIndex(),e=this.tabulatorGetRow(n);this.r=e,this.showModal()},tabulatorGetLastPage:function(t){var r=this.tabulator.getPageSize(),n=t%r;return 0==n?t/r:(t-n)/r+1},tabulatorGetPageSize:function(){return this.tabulator.getPageSize()},tabulatorGetPage:function(){return this.tabulator.getPage()},tabulatorSetPage:function(t){this.tabulator.setPage(t)},tabulatorGetData:function(){return this.tabulator.getData()},tabulatorAdd:function(t){this.tabulator.addData([t],!0)},tabulatorDel:function(t){this.tabulator.deleteRow(t)},tabulatorUpdate:function(t){this.tabulator.updateData([t])},tabulatorGetRow:function(t){var r=this.tabulator.getData().findIndex((function(r){return r.id==t})),n=this.tabulator.getData()[r];return n},toast:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$bvToast.toast(t,{title:"Information",variant:r,solid:!0})},showModal:function(){this.$refs["my-modal2"].show()},hideModal:function(){this.$refs["my-modal2"].hide()}}},f=g,b=n(1001),p=(0,b.Z)(f,e,a,!1,null,null,null),v=p.exports},18533:function(t,r,n){"use strict";var e=n(42092).forEach,a=n(9341),o=a("forEach");t.exports=o?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},9341:function(t,r,n){"use strict";var e=n(47293);t.exports=function(t,r){var n=[][t];return!!n&&e((function(){n.call(null,r||function(){return 1},1)}))}},86135:function(t,r,n){"use strict";var e=n(34948),a=n(3070),o=n(79114);t.exports=function(t,r,n){var l=e(r);l in t?a.f(t,l,o(0,n)):t[l]=n}},92222:function(t,r,n){"use strict";var e=n(82109),a=n(17854),o=n(47293),l=n(43157),i=n(70111),s=n(47908),d=n(26244),c=n(86135),u=n(65417),h=n(81194),m=n(5112),g=n(7392),f=m("isConcatSpreadable"),b=9007199254740991,p="Maximum allowed index exceeded",v=a.TypeError,w=g>=51||!o((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),y=h("concat"),x=function(t){if(!i(t))return!1;var r=t[f];return void 0!==r?!!r:l(t)},D=!w||!y;e({target:"Array",proto:!0,arity:1,forced:D},{concat:function(t){var r,n,e,a,o,l=s(this),i=u(l,0),h=0;for(r=-1,e=arguments.length;r<e;r++)if(o=-1===r?l:arguments[r],x(o)){if(a=d(o),h+a>b)throw v(p);for(n=0;n<a;n++,h++)n in o&&c(i,h,o[n])}else{if(h>=b)throw v(p);c(i,h++,o)}return i.length=h,i}})},69826:function(t,r,n){"use strict";var e=n(82109),a=n(42092).find,o=n(51223),l="find",i=!0;l in[]&&Array(1)[l]((function(){i=!1})),e({target:"Array",proto:!0,forced:i},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o(l)},54747:function(t,r,n){var e=n(17854),a=n(48324),o=n(98509),l=n(18533),i=n(68880),s=function(t){if(t&&t.forEach!==l)try{i(t,"forEach",l)}catch(r){t.forEach=l}};for(var d in a)a[d]&&s(e[d]&&e[d].prototype);s(o)},80547:function(t,r){"use strict";r["Z"]='<template>\r\n  <div class="tpl">\r\n    <raw-loader :mytxt=" require(\'!raw-loader!./TabulatorModalLocal.vue\').default "></raw-loader>\r\n    <h1>This is Tabulator2</h1>\r\n    <div>\r\n      <div class="mb-1">\r\n        <button class="mr-1" @click="onTest" >Test</button>\r\n        <button class="mr-1" @click="onAdd" >Add</button>\r\n      </div>\r\n      {{msg}}\r\n      <div ref="table"></div>    \r\n    </div>\r\n\r\n    <b-modal ref="my-modal2" id="modal-1" size="sm" :no-close-on-backdrop="true" hide-footer title="BootstrapVue">\r\n      <form @submit.stop.prevent="onSaveModal">\r\n        <div>\r\n          \x3c!-- {{r}} --\x3e\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">Id</label>\r\n            <div class="col-sm-8">\r\n              <input type="text" class="form-control" disabled v-model="r.id" />\r\n            </div>\r\n          </div>\r\n\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Name\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <input \r\n                type="text" \r\n                v-model="r.name"\r\n                name="name"\r\n                v-validate="\'required\'"                \r\n                :class="{\r\n                    \'form-control\': true,\r\n                    \'ko-hop-le\': errors.has(\'name\'),\r\n                }"\r\n                autocomplete="off"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Ngay\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <b-form-datepicker \r\n                v-model="r.ngay" \r\n                :date-format-options="{ year: \'numeric\', month: \'numeric\', day: \'numeric\' }"\r\n                locale="vi"\r\n                class="mb-2" >\r\n              </b-form-datepicker>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Act\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <b-form-checkbox\r\n                v-model="r.act"\r\n                name="checkbox-1"\r\n                value=true\r\n                unchecked-value=false\r\n                @change="ChangeAct"                \r\n              >\r\n                Active\r\n              </b-form-checkbox>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Thành phố {{ errors.has(\'tp\') }}\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <v-select\r\n                v-model="r.tp"\r\n                name="tp"\r\n                v-validate="\'required\'"\r\n                :reduce="(option) => option.id"\r\n                :options="tps"\r\n                :has-error="errors.has(\'tp\')"\r\n                :class="{ danger: errors.has(\'tp\') }"                \r\n              />\r\n            </div>\r\n          </div>\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Quyền\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <v-select \r\n                multiple\r\n                name="quyen" \r\n                v-model="r.quyen" \r\n                :options="[\'Admin\',\'User\',\'Editor\']" \r\n                v-validate="\'required\'"\r\n                :class="{ danger: errors.has(\'quyen\') }"                \r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          \x3c!--\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">Id</label>\r\n            <div class="col-sm-8">\r\n              <input type="text" class="form-control" v-model="r.Id" />\r\n            </div>\r\n          </div>\r\n\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Name\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <input \r\n                type="text" \r\n                v-model="r.Name"\r\n                v-validate="\'required\'"\r\n                name="Name"\r\n                :class=" \'form-control\' " \r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Thành phố\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <v-select\r\n                v-model="r.Tp"\r\n                v-validate="\'required\'"\r\n                :reduce="(option) => option.id"\r\n                :options="[\r\n                  { label: \'Huế\', id: \'HUE\' },\r\n                  { label: \'Sài gòn\', id: \'SG\' },\r\n                  { label: \'Đà nẵng\', id: \'DN\' },\r\n                ]"\r\n              />\r\n            </div>\r\n          </div>\r\n          --\x3e\r\n\r\n\r\n        </div>  \r\n        <div class="float-right">\r\n          <button type="submit" class="btn btn-primary mr-1 btn-sm">Save</button>\r\n          <button type="button" class="btn btn-sm" @click="hideModal()">Cancel</button>\r\n        </div>\r\n      </form>\r\n    </b-modal>\r\n\r\n\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport {TabulatorFull as Tabulator} from \'tabulator-tables\';\r\nimport $ from "jquery";\r\n\r\nimport VeeValidate from "vee-validate";\r\nimport Vue from "vue";\r\nVue.use(VeeValidate, {\r\n  classes: true,\r\n});\r\n\r\nimport vSelect from "vue-select";\r\nVue.component("v-select", vSelect);\r\nimport "vue-select/dist/vue-select.css";\r\n\r\nimport moment from \'moment\';\r\n\r\nexport default {\r\n  name: \'Tpl\',\r\n  components: {\r\n  },\r\n  data(){\r\n    return {\r\n      msg:"thuc 101",\r\n      tabulator: null, //variable to hold your table\r\n      tableData: [\r\n\r\n        {id:1,name:"thuc 101",ngay:new Date(),act:true,tp:"QN",quyen:[] },\r\n        {id:2,name:"thuc 102",ngay:new Date(),act:false,tp:"QN",quyen:[] },\r\n        {id:3,name:"thuc 103",ngay:new Date(),act:true,tp:"QN",quyen:[] }\r\n\r\n\r\n\r\n      ], //data for table to display\r\n      r:{},\r\n      tps:[\r\n        { label: \'Huế\', id: \'HUE\' },\r\n        { label: \'Sài gòn\', id: \'SG\' },\r\n        { label: \'Đà nẵng\', id: \'DN\' },\r\n        { label: \'Quảng ngãi\', id: \'QN\' },\r\n      ]\r\n    }\r\n  },\r\n  mounted(){\r\n      let that=this;\r\n      var dateFormatter = function(cell, formatterParams){\r\n        var value = cell.getValue();\r\n        if(value){\r\n          value = moment(value , "YYYY/MM/DD").format("DD/MM/YYYY");\r\n        }\r\n        return value;\r\n      };\r\n      this.tabulator = new Tabulator(this.$refs.table, {\r\n        // data: this.tableData, //link data to table\r\n        reactiveData:true, //enable data reactivity\r\n        // columns: [], //define table columns\r\n        data:this.tableData,      //load row data from array\r\n        //layout:"fitColumns",      //fit columns to width of table\r\n        responsiveLayout:"hide",  //hide columns that dont fit on the table\r\n        addRowPos:"bottom",       //top,bottom//when adding a new row, add it to the top of the table\r\n        history:true,             //allow undo and redo actions on the table\r\n        pagination:"local",       //paginate the data\r\n        paginationSize:3,         //allow 7 rows per page of data\r\n        paginationCounter:"rows", //display count of paginated rows in footer\r\n\r\n        paginationInitialPage:1, //optional parameter to set the initial page to load    \r\n        paginationSizeSelector: [5, 10, 20, 30, 50],\r\n\r\n        movableColumns:true,      //allow column order to be changed\r\n        initialSort:[             //set the initial sort order of the data\r\n            {column:"name", dir:"asc"},\r\n        ],\r\n        height:$(window).innerHeight()-400,//\'200px\',//$(window).innerHeight()\r\n        layout:"fitDataFill",//fitColumns//fitDataFill//fitData//fitDataStretch//fitDataTable//\r\n\r\n        //footerElement:$("<div class=\'tabulator-footer\'><span>Custom Span With Stuff In</span></div>"),\r\n        //footerElement: "<div>Hello world</div>",\r\n        footerElement:"<button id=\'customButton\' class=\'mr-1\'>Custom Button</button>",\r\n\r\n        index:"id",\r\n        //autoColumns:true,\r\n        columns: [                 //define the table columns\r\n          {\r\n            title: "STT",\r\n            formatter: "rownum",\r\n            headerHozAlign: "center",\r\n            hozAlign: "center",\r\n          },\r\n          {\r\n            title: "Cmd",\r\n            headerHozAlign: "center",\r\n            hozAlign: "center",\r\n            headerSort: false,\r\n            width: 75,\r\n            formatter: function (cell, formatterParams, onRendered) {\r\n              onRendered(function () {\r\n                $(cell.getElement()).find("#edit").on("click", cell.getRow(), that.onEdit);\r\n                $(cell.getElement()).find("#del").on("click", cell.getRow(), that.onDel);\r\n              });\r\n              let $div = $("<div>");\r\n              let $btnEdit=  $("<button>", { text: "Edit", class: "mr-1" }).attr("id", "edit");\r\n              let $btnDel=  $("<button>", { text: "Del", class: "mr-1" }).attr("id", "del");\r\n              $div.append($btnEdit);\r\n              $div.append($btnDel);\r\n              return $div[0];\r\n            },\r\n          },\r\n          {\r\n            title: "Id",\r\n            field: "id",\r\n            width: 60,\r\n            //headerFilter: true,\r\n            hozAlign: "center",\r\n          },\r\n          {\r\n            title: "Name",\r\n            field: "name",\r\n            width: 200,\r\n          },\r\n          {\r\n            title: "Ngày",\r\n            headerHozAlign: "center",\r\n            hozAlign: "center",\r\n            field: "ngay",\r\n            width: 100,\r\n            formatter:dateFormatter,\r\n          },\r\n          /*\r\n          Tại sao không hoạt động\r\n          {title:"Act", field:"act",\r\n            headerHozAlign: "center",\r\n            hozAlign: "center",\r\n            formatter:"tickCross", \r\n            formatterParams:{\r\n              allowEmpty:true,\r\n              allowTruthy:true,\r\n              tickElement:"yes",//"<i class=\'fa fa-check\'></i>",\r\n              crossElement:"no"//"<i class=\'fa fa-times\'></i>",\r\n            }\r\n          },\r\n          */\r\n          {title:"Act", field:"act", \r\n            headerHozAlign: "center",\r\n            hozAlign: "center",\r\n            formatter:function(cell, formatterParams, onRendered){\r\n              let $chk=$("<input type=\'checkbox\'>").prop("checked",cell.getValue()).attr("disabled", true);\r\n              return $chk[0];\r\n            },\r\n          },\r\n          {\r\n            title: "Thành phố",\r\n            headerHozAlign: "center",\r\n            hozAlign: "center",\r\n            field: "tp",\r\n            width: 130,\r\n            formatter:function(cell, formatterParams, onRendered){\r\n              let tp=cell.getValue();\r\n              let tps=that.tps;\r\n              let index=that.tps.findIndex(x=>x.id==tp);\r\n              return `${tp} - ${that.tps[index].label}`;\r\n            },\r\n          },\r\n          {\r\n            title: "Quyền",\r\n            headerHozAlign: "center",\r\n            hozAlign: "center",\r\n            field: "quyen",\r\n            width: 150,\r\n            formatter:function(cell, formatterParams, onRendered){\r\n              return JSON.stringify(cell.getValue());\r\n            },\r\n          },\r\n        ],\r\n      });\r\n      this.tabulator.on("dataLoaded", function(data){\r\n        //$("#table1").tabulator("setData", \r\n        let ar=[\r\n          {id:1,name:"thuc 101",ngay:new Date(),act:true,tp:"QN",quyen:[] },\r\n          {id:2,name:"thuc 102",ngay:new Date(),act:false,tp:"QN",quyen:[] },\r\n          {id:3,name:"thuc 103",ngay:new Date(),act:true,tp:"QN",quyen:[] }\r\n        ]\r\n        ar.forEach(x=>{\r\n          //that.tabulatorAdd(x);\r\n        })\r\n        /*\r\n        that.tabulator.replaceData([\r\n          {id:1,name:"thuc 101",ngay:new Date(),act:true,tp:"QN",quyen:[] },\r\n          {id:2,name:"thuc 102",ngay:new Date(),act:false,tp:"QN",quyen:[] },\r\n          {id:3,name:"thuc 103",ngay:new Date(),act:true,tp:"QN",quyen:[] }\r\n        ]); //load data array\r\n        */        \r\n        let $tabu=$(that.$refs.table);\r\n        //$tabu.tabulator("addData",ar,true);\r\n        //$tabu.tabulator();\r\n        //table.addData([{id:1, name:"bob", gender:"male"}, {id:2, name:"Jenny", gender:"female"}], true);\r\n        let $span = $("<span id=\'total\' class=\'mr-1\'>").text("[total]");\r\n        $tabu.find(".tabulator-footer-contents span.tabulator-paginator").prepend($span);\r\n        $tabu.find("#customButton").on("click",function(){\r\n          alert(\'hello\');\r\n        })\r\n        let $myAddBtn=$("<button class=\'mr-1\'>MyAdd</button>");\r\n        $myAddBtn.on("click",function(){\r\n          alert("hello myAddBtn");\r\n        })\r\n        $tabu.find(".tabulator-footer-contents span.tabulator-paginator").prepend($myAddBtn);\r\n      });\r\n      this.tabulator.on("pageLoaded", function(pageno){\r\n        let $tabu=$(that.$refs.table);\r\n        $tabu.find(".tabulator-footer-contents").find("span#total").text(`[${new Date().getTime()}]`);\r\n      }); \r\n      this.tabulator.on("dataChanged", function(data){\r\n        console.log(\'data change\')\r\n        let r={\r\n          data:data,\r\n          tableData:that.tableData,\r\n          getPageSize:that.tabulatorGetPageSize(),\r\n          getPage:that.tabulatorGetPage(),\r\n          total:that.tabulatorGetData().length,\r\n          lastPage:that.tabulatorGetLastPage( that.tabulatorGetData().length ),\r\n        }\r\n        that.msg=r;\r\n      });\r\n      this.tabulator.on("cellEdited", function (cell) {\r\n          let index = cell.getRow().getIndex();\r\n          let row = cell.getRow();\r\n          cell.getData().dirty = true;\r\n          /*Code update row here*/\r\n          //that.onUpdateRow(row);\r\n          /*Code update row here*/\r\n      });  \r\n      $("#customButton").on("click",function(){\r\n        alert(\'hello\');\r\n      })  \r\n  },\r\n  watch: {\r\n    tableData: {\r\n      handler: function (newData) {\r\n        this.tabulator.replaceData(newData);\r\n      },\r\n      deep: true\r\n    }\r\n  },  \r\n  created(){\r\n\r\n    this.$nextTick(() => {\r\n          //alert(this.tabulator);\r\n      let ar=[\r\n        {id:1,name:"thuc 101",ngay:new Date(),act:true,tp:"QN",quyen:[] },\r\n        {id:2,name:"thuc 102",ngay:new Date(),act:false,tp:"QN",quyen:[] },\r\n        {id:3,name:"thuc 103",ngay:new Date(),act:true,tp:"QN",quyen:[] }\r\n      ]\r\n      // ar.forEach(x=>{\r\n      //   //this.tabulatorAdd(x);\r\n      //   //console.log(x);\r\n      // })\r\n      //this.tableData=ar;\r\n\r\n\r\n\r\n\r\n    });\r\n\r\n\r\n  },\r\n  methods:{\r\n    ChangeAct(){\r\n      let act=(this.r.act==\'true\') ? true : false;\r\n      this.r.act=act;\r\n    },\r\n    onSaveModal(){\r\n      this.$validator.validateAll().then((result) => {\r\n        if (!result) {\r\n          this.toast("Không hợp lệ");\r\n          return;\r\n        }\r\n        let r=JSON.parse(JSON.stringify(this.r));\r\n        if(r.id==0){\r\n          r.id=new Date().getTime();\r\n          this.tabulatorAdd(r);        \r\n          this.hideModal();\r\n        }else{\r\n          this.tabulatorUpdate(r);\r\n          this.hideModal();\r\n        }\r\n      })//end validator\r\n    },    \r\n    onAdd(){\r\n      this.r={\r\n        id:0,\r\n        name:"thuc 101",\r\n        ngay:new Date(),\r\n        act:true,\r\n        tp:"QN",\r\n        quyen:[] \r\n      };\r\n      this.showModal();\r\n    },\r\n    onDataLoaded(data){\r\n      let ar=[];\r\n      data.forEach((x,i)=>{\r\n        ar.push({x:x.id});\r\n      })\r\n      let curPage= this.tabulator.getPage();\r\n      this.msg={ar:ar,curPage:curPage};\r\n    },\r\n    add(r){\r\n      this.tabulator.addData([r], true);        \r\n    },\r\n    onTest(){\r\n      let ar=this.tabulatorGetData();\r\n      let r={\r\n        ar:ar,\r\n        getPageSize:this.tabulatorGetPageSize(),\r\n        getPage:this.tabulatorGetPage(),\r\n        total:this.tabulatorGetData().length,\r\n        lastPage:this.tabulatorGetLastPage( this.tabulatorGetData().length ),\r\n      }\r\n      alert(JSON.stringify(r));\r\n    },\r\n    onSave(e) {\r\n      e.preventDefault();\r\n      let row = e.data;\r\n      if (\r\n        this.rowValidate(row) == true\r\n        // && row.getData().monid != 0\r\n        // && row.getData().banid != 0\r\n        //    && row.getData().solg > 0\r\n      ) {\r\n        let r1 = row.getData();\r\n        let r = JSON.parse(JSON.stringify(r1));\r\n        /*                                                                                  convert data date nếu cần */\r\n        // let Ngay = this.DateToYMD(r.Ngay);\r\n        // r.Ngay = Ngay;\r\n        /*                                                                                  convert data nếu cần */\r\n        /*\r\n        this.Save(r).then((res) => {\r\n          if (res.data.kq == "ok") {\r\n            this.toast(res.data.msg);\r\n            this.setPage(this.getPage());\r\n          } else {\r\n            this.toast(res.data.msg);\r\n          }\r\n        });\r\n        */\r\n      } else {\r\n        this.toast("Dữ liệu không hợp lệ!");\r\n        return;\r\n      }\r\n    },\r\n    onCancel(e) {\r\n      e.preventDefault();\r\n      this.setPage(this.getPage());\r\n    },\r\n\r\n    onDel(e) {\r\n      e.preventDefault();\r\n      let row = e.data;\r\n      let id = row.getIndex();\r\n      this.tabulator.deleteRow(id);\r\n      /*\r\n\r\n      this.Del(id).then((res) => {\r\n        //alert(JSON.stringify(res));\r\n        //{"data":{"kq":"ok","msg":"Delete bàn ok"},"status":200,"\r\n        if (res.data.kq == "ok") {\r\n          if (this.getData().length != 1) {\r\n            this.setPage(this.getPage());\r\n          } else {\r\n            if(this.getPage()!=1){\r\n              this.setPage(this.getPage() - 1);\r\n            }else{\r\n              this.setPage(this.getPage());\r\n            } \r\n          }\r\n        }\r\n        this.toast(res.data.msg);\r\n      });\r\n\r\n      */\r\n    },\r\n    onEdit(e){\r\n      let row = e.data;\r\n      let id = row.getIndex();\r\n      let r=this.tabulatorGetRow(id);\r\n      this.r=r;\r\n      this.showModal();\r\n    }, \r\n\r\n    tabulatorGetLastPage(count) {\r\n      let pageSize = this.tabulator.getPageSize();\r\n      let du = count % pageSize;\r\n      return du == 0 ? count / pageSize : (count - du) / pageSize + 1;\r\n    },\r\n    tabulatorGetPageSize() {\r\n      return this.tabulator.getPageSize();\r\n    },\r\n    tabulatorGetPage() {\r\n      return this.tabulator.getPage();\r\n    },\r\n    tabulatorSetPage(_page) {\r\n      this.tabulator.setPage(_page);\r\n    },\r\n    tabulatorGetData(){\r\n      return this.tabulator.getData();\r\n    },\r\n    tabulatorAdd(r){\r\n      this.tabulator.addData([r], true);        \r\n    },\r\n    tabulatorDel(id){\r\n      this.tabulator.deleteRow(id);\r\n    },\r\n    tabulatorUpdate(r){\r\n      this.tabulator.updateData([r]);\r\n      //table.updateData([{id:1, name:"bob"}]); //update data\r\n    },\r\n    tabulatorGetRow(id){\r\n      let index=this.tabulator.getData().findIndex(x=>x.id==id);\r\n      let r=this.tabulator.getData()[index];\r\n      return r;\r\n    },\r\n    toast(msg, variant = null) {\r\n      this.$bvToast.toast(msg, {\r\n        title: `Information`,\r\n        variant: variant,\r\n        solid: true,\r\n      });\r\n    },\r\n    showModal() {\r\n        this.$refs[\'my-modal2\'].show()\r\n    },\r\n    hideModal() {\r\n      this.$refs[\'my-modal2\'].hide()\r\n    },\r\n  }\r\n}\r\n<\/script>\r\n<style lang="scss">\r\n\r\n  $vs-red:red;\r\n  $vs-default:rgba(60, 60, 60, 0.26);\r\n  $vs-colors: (\r\n      lightest: $vs-default,//$vs-red, //rgba(60, 60, 60, 0.26),\r\n      light: rgba(60, 60, 60, 0.5),\r\n      dark: #333,\r\n      darkest: rgba(0, 0, 0, 0.15),\r\n  ) !default;\r\n\r\n  //  Global Component Variables\r\n  $vs-component-bg: none !default;\r\n  $vs-component-line-height: 1.8 !default;\r\n  $vs-component-placeholder-color: inherit !default;\r\n\r\n  //  Active State\r\n  $vs-state-active-bg: #5897fb !default;\r\n  $vs-state-active-color: #fff !default;\r\n\r\n  //  Deselect State\r\n  $vs-state-deselect-bg: #fb5858 !default;\r\n  $vs-state-deselect-color: #fff !default;\r\n\r\n  //  Disabled State\r\n  $vs-state-disabled-bg: rgb(248, 248, 248) !default;\r\n  $vs-state-disabled-color: map_get($vs-colors, \'light\') !default;\r\n  $vs-state-disabled-controls-color: map_get($vs-colors, \'light\') !default;\r\n  $vs-state-disabled-cursor: not-allowed !default;\r\n\r\n  //  Borders\r\n  $vs-border-width: 1px !default;\r\n  $vs-border-style: solid !default;\r\n  $vs-border-radius: 4px !default;\r\n  $vs-border-color: map_get($vs-colors, \'lightest\') !default;\r\n\r\n  //  Component Controls: Clear, Open Indicator\r\n  $vs-controls-color: map_get($vs-colors, \'light\') !default;\r\n  $vs-controls-size: 1 !default;\r\n  $vs-controls-deselect-text-shadow: 0 1px 0 #fff !default;\r\n\r\n  //  Selected\r\n  $vs-selected-bg: #f0f0f0 !default;\r\n  $vs-selected-border-color: $vs-border-color !default;\r\n  $vs-selected-border-style: $vs-border-style !default;\r\n  $vs-selected-border-width: $vs-border-width !default;\r\n\r\n  //  Dropdown\r\n  $vs-dropdown-z-index: 1000 !default;\r\n  $vs-dropdown-min-width: 160px !default;\r\n  $vs-dropdown-max-height: 350px !default;\r\n  $vs-dropdown-box-shadow: 0px 3px 6px 0px map_get($vs-colors, \'darkest\') !default;\r\n  $vs-dropdown-bg: #fff !default;\r\n\r\n  @import "vue-select/src/scss/vue-select.scss";\r\n  .xyz{\r\n    border: 1px solid red;\r\n  }\r\n\r\n  .danger, \r\n  .danger .dropdown-toggle, \r\n  .danger .selected-tag {\r\n    background-color: aqua;\r\n    border-radius: 4px;\r\n  }\r\n\r\n  .ko-hop-le {\r\n    border-radius: 4px;\r\n    background-color: aqua;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n/*  \r\n  .style-chooser .vs__search::placeholder,\r\n  .style-chooser .vs__dropdown-toggle,\r\n  .style-chooser .vs__dropdown-menu {\r\n    background: #dfe5fb;\r\n    border: none;\r\n    color: #394066;\r\n    text-transform: lowercase;\r\n    font-variant: small-caps;\r\n  }\r\n\r\n  .style-chooser .vs__clear,\r\n  .style-chooser .vs__open-indicator {\r\n    fill: #394066;\r\n  }\r\n*/\r\n\r\n  $textSize: 8.5px; //14px !default; //table text size\r\n  @import "~tabulator-tables/src/scss/tabulator.scss";\r\n  .tabulator-col-title {\r\n    text-align: center;\r\n  }\r\n  .tabulator .tabulator-footer .tabulator-page.active {\r\n    background-color: greenyellow !important;\r\n    color: blue !important;\r\n  }\r\n  .b-calendar .b-calendar-grid-body .col[data-date] .btn {\r\n    width: 24px;\r\n    height: 24px;\r\n    font-size: 10px;\r\n    line-height: 1;\r\n    margin: 0px auto;\r\n    padding: 6px 0;\r\n  }\r\n  .custom-control.custom-checkbox {\r\n    position: relative;\r\n    z-index: 1;\r\n    display: block;\r\n    min-height: 0.9rem;\r\n    padding-left: 1.5rem;\r\n    padding-top: 0.3rem;\r\n  }\r\n  .col-4 input {\r\n    margin-bottom: 1px;\r\n  }\r\n  .form-group {\r\n    margin-bottom: 0.3rem;\r\n  }\r\n\r\n\r\n/*\r\n  .select2,\r\n  .select2-selection {\r\n    width: 100% !important;\r\n  }\r\n  .select2-container .select2-selection--single {\r\n    height: 27px;\r\n  }\r\n  .select2-container--default .select2-selection--single .select2-selection__rendered {\r\n    color: #444;\r\n    line-height: 26px;\r\n  }\r\n  .ko-hop-le-select2 {\r\n    border: 1px solid red;\r\n    border-radius: 10px;\r\n  }\r\n  .ko-hop-le {\r\n    border: 1px solid red;\r\n    border-radius: 10px;\r\n  }\r\n  .datepicker td,\r\n  th {\r\n    text-align: center;\r\n    padding: 0px 6px;\r\n    font-size: 10px;\r\n  }\r\n  .my-invalid .select2-container {\r\n    border: 1px solid red;\r\n    border-radius: 5px;\r\n  }\r\n  .col-form-label {\r\n    padding-top: calc(0.375rem + 1px);\r\n    padding-bottom: calc(0.375rem + 1px);\r\n    margin-bottom: 0;\r\n    font-size: inherit;\r\n    line-height: 1.5;\r\n    font-weight: bold;\r\n  }\r\n  .vs__dropdown-toggle {\r\n    -webkit-appearance: none;\r\n    -moz-appearance: none;\r\n    appearance: none;\r\n    background: none;\r\n    border: var(--vs-border-width) var(--vs-border-style) var(--vs-border-color);\r\n    border-radius: var(--vs-border-radius);\r\n    display: flex;\r\n    padding: 0 0 0px;\r\n    white-space: normal;\r\n  }\r\n  .ko-hop-le-select2 {\r\n    border: 1px solid red;\r\n    border-radius: 10px;\r\n  }\r\n  .ko-hop-le{\r\n    border: 1px solid red;\r\n    background: orange;\r\n    border-radius: 10px;\r\n  }\r\n  */\r\n\r\n  </style>\r\n\r\n'}}]);
//# sourceMappingURL=5789-legacy.3b967483.js.map