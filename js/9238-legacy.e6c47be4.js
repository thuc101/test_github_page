(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[9238],{69238:function(r,e,n){"use strict";n.r(e),n.d(e,{default:function(){return w}});var t=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"home"},[t("raw-loader",{attrs:{mytxt:n(60149).Z}}),t("h1",[r._v("Permission")]),t("b-row",[t("b-col",{attrs:{md:"12"}}),t("b-col",{attrs:{md:"5"}},[t("b-img",{attrs:{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQFOXi_UoyjzyFmWtvs9YWYkpG0WThjeziAhg&usqp=CAU",fluid:"",alt:"Fluid image"}}),t("div",{staticClass:"border"},[t("PermissionClaimUserCom")],1)],1),t("b-col",{attrs:{md:"7"}},[t("div",r._l(r.roles,(function(e){return t("div",{key:e.Id},[t("h4",[r._v(r._s(e.Role))]),t("PermissionCom",{attrs:{RoleId:e.Id}})],1)})),0)])],1)],1)},s=[],i=n(77673),o=n(16198),a=(n(41539),n(54747),n(70790)),u=n(53009),l=function(){var r=this,e=r.$createElement,n=r._self._c||e;return n("div",{staticClass:"ml-2 mb-2 border p-2"},[n("b-row",r._l(r.ds,(function(e,t,s){return n("b-col",{key:s,attrs:{lg:"3"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:r.ds[t],expression:"ds[k]"}],attrs:{disabled:"",type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(r.ds[t])?r._i(r.ds[t],null)>-1:r.ds[t]},on:{click:function(e){return r.onclick()},change:function(e){var n=r.ds[t],s=e.target,i=!!s.checked;if(Array.isArray(n)){var o=null,a=r._i(n,o);s.checked?a<0&&r.$set(r.ds,t,n.concat([o])):a>-1&&r.$set(r.ds,t,n.slice(0,a).concat(n.slice(a+1)))}else r.$set(r.ds,t,i)}}}),r._v(" "+r._s(t)+" ")])})),1)],1)},c=[],m={props:["RoleId"],components:{},data:function(){return{ds:[]}},mounted:function(){this.GetPermissionByRoleId(this.RoleId)},methods:{onclick:function(){alert("hello")},GetPermissionByRoleId:function(r){var e=this;return(0,o.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.Z.get("/api/Permission/GetPermissionByRoleId?RoleId=".concat(r)).then((function(r){e.ds=r.data})).catch((function(r){u.Z.XuLyErr(r)}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()}}},d=m,f=n(1001),h=(0,f.Z)(d,l,c,!1,null,null,null),p=h.exports,v=function(){var r=this,e=r.$createElement,n=r._self._c||e;return n("div",{staticClass:"home"},[n("h4",{staticClass:"border-bottom p-1"},[r._v("Claim User")]),n("ul",r._l(r.ds2,(function(e){return n("li",{key:e},[r._v(" "+r._s(e.ClaimValue)+" "),r._l(e.List,(function(e){return n("b-badge",{key:e,attrs:{variant:"primary"}},[r._v(r._s(e))])}))],2)})),0)])},C=[],g=(n(34553),{components:{},data:function(){return{ds:[],users:[],ds2:[]}},mounted:function(){this.ClaimUser_GetAll()},methods:{ClaimUser_GetAll:function(){var r=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.Z.get("/api/NguoiDung5/ClaimUser_GetAll").then((function(e){r.ds=e.data,r.GetUserCombo()})).catch((function(r){u.Z.XuLyErr(r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},GetUserCombo:function(){var r=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.Z.get("/api/NguoiDung5/GetComboNguoiDung").then((function(e){r.users=e.data,r.ds.forEach((function(e){var n=e.ClaimValue,t=e.List,s=[];t.forEach((function(e){var n=r.users.findIndex((function(r){return r.id==e}));n>=0&&s.push(r.users[n].label)})),r.ds2.push({ClaimValue:n,List:s})}))})).catch((function(r){u.Z.XuLyErr(r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}}}),y=g,b=(0,f.Z)(y,v,C,!1,null,null,null),R=b.exports,x={components:{PermissionCom:p,PermissionClaimUserCom:R},data:function(){return{res:[],roleClaims:[],userRoles:[],roles:[]}},mounted:function(){this.GetAllRole()},methods:{getRoleClaimByRole:function(r){var e=[];return this.roleClaims.forEach((function(n){n.Role==r&&e.push(n)})),e},GetPermission:function(){var r=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.Z.get("/api/NguoiDung5/GetPermission").then((function(e){r.res=e,r.roleClaims=e.data.roleClaims,r.userRoles=e.data.userRoles})).catch((function(r){u.Z.XuLyErr(r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},GetAllRole:function(){var r=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.Z.get("/api/Permission/GetAllRole").then((function(e){r.roles=e.data})).catch((function(r){u.Z.XuLyErr(r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}}},Z=x,_=(0,f.Z)(Z,t,s,!1,null,null,null),w=_.exports},34553:function(r,e,n){"use strict";var t=n(82109),s=n(42092).findIndex,i=n(51223),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),t({target:"Array",proto:!0,forced:a},{findIndex:function(r){return s(this,r,arguments.length>1?arguments[1]:void 0)}}),i(o)},38862:function(r,e,n){var t=n(82109),s=n(35005),i=n(22104),o=n(46916),a=n(1702),u=n(47293),l=n(43157),c=n(60614),m=n(70111),d=n(52190),f=n(50206),h=n(30133),p=s("JSON","stringify"),v=a(/./.exec),C=a("".charAt),g=a("".charCodeAt),y=a("".replace),b=a(1..toString),R=/[\uD800-\uDFFF]/g,x=/^[\uD800-\uDBFF]$/,Z=/^[\uDC00-\uDFFF]$/,_=!h||u((function(){var r=s("Symbol")();return"[null]"!=p([r])||"{}"!=p({a:r})||"{}"!=p(Object(r))})),w=u((function(){return'"\\udf06\\ud834"'!==p("\udf06\ud834")||'"\\udead"'!==p("\udead")})),k=function(r,e){var n=f(arguments),t=e;if((m(e)||void 0!==r)&&!d(r))return l(e)||(e=function(r,e){if(c(t)&&(e=o(t,this,r,e)),!d(e))return e}),n[1]=e,i(p,null,n)},P=function(r,e,n){var t=C(n,e-1),s=C(n,e+1);return v(x,r)&&!v(Z,s)||v(Z,r)&&!v(x,t)?"\\u"+b(g(r,0),16):r};p&&t({target:"JSON",stat:!0,arity:3,forced:_||w},{stringify:function(r,e,n){var t=f(arguments),s=i(_?k:p,null,t);return w&&"string"==typeof s?y(s,R,P):s}})},60149:function(r,e){"use strict";e["Z"]='<template>\r\n  <div class="home">\r\n    <raw-loader :mytxt="require(\'!raw-loader!./Permission.vue\').default"></raw-loader>\r\n    <h1>Permission</h1>\r\n    <b-row>\r\n      <b-col md="12">\r\n      </b-col>\r\n      <b-col md="5">\r\n        <b-img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQFOXi_UoyjzyFmWtvs9YWYkpG0WThjeziAhg&usqp=CAU"\r\n          fluid alt="Fluid image"></b-img>\r\n        <div class="border">\r\n          <PermissionClaimUserCom></PermissionClaimUserCom>\r\n        </div>  \r\n      </b-col>\r\n      <b-col md="7">\r\n\r\n        <div>\r\n          <div v-for="x in roles" :key="x.Id">\r\n            <h4>{{ x.Role }}</h4>\r\n            \x3c!-- { "Id": 1, "Role": "Admin", "CapDo": 9 } --\x3e\r\n            <PermissionCom :RoleId="x.Id"></PermissionCom>\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </b-col>\r\n    </b-row>\r\n  </div>\r\n</template>\r\n<script>\r\nimport fetchClient from \'@/fetchClient\'\r\nimport TumLum from \'@/TumLum\'\r\nimport PermissionCom from "@/views/NguoiDung2/PermissionCom.vue"\r\nimport PermissionClaimUserCom from "@/views/NguoiDung2/PermissionClaimUserCom.vue"\r\nexport default {\r\n  components: {\r\n    PermissionCom,\r\n    PermissionClaimUserCom\r\n  },\r\n  data() {\r\n    return {\r\n      res: [],\r\n      roleClaims: [],\r\n      userRoles: [],\r\n\r\n\r\n\r\n      roles: [],\r\n    }\r\n  },\r\n  mounted() {\r\n    this.GetAllRole();\r\n  },\r\n  methods: {\r\n    getRoleClaimByRole(Role) {\r\n      let ar = [];\r\n      this.roleClaims.forEach(x => {\r\n        if (x.Role == Role) {\r\n          ar.push(x);\r\n        }\r\n      })\r\n      return ar;\r\n    },\r\n    async GetPermission() {\r\n      return await fetchClient.get(`/api/NguoiDung5/GetPermission`).then(res => {\r\n        this.res = res;\r\n        this.roleClaims = res.data.roleClaims;\r\n        this.userRoles = res.data.userRoles;\r\n      }).catch(err => {\r\n        TumLum.XuLyErr(err);\r\n      })\r\n    },\r\n    async GetAllRole() {\r\n      return await fetchClient.get(`/api/Permission/GetAllRole`).then(res => {\r\n        //alert(JSON.stringify(res));\r\n        //{"data":[{"Id":1,"Role":"Admin","CapDo":9},{"Id":2,"Role":"User","CapDo":1},{"Id":3,"Role":"NhanVien","CapDo":2},{"Id":4," \r\n        this.roles = res.data;\r\n      }).catch(err => {\r\n        TumLum.XuLyErr(err);\r\n      })\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n<style>\r\n.large-font {\r\n  font-size: 11px;\r\n}\r\n</style>\r\n  '},53009:function(r,e,n){"use strict";n(38862);e["Z"]={XuLyErr:function(r){var e=JSON.parse(JSON.stringify(r)).status;if(400==e){var n=JSON.parse(JSON.stringify(r.response)).data.message;alert(n)}else r.response?401==r.response.status?alert("Chưa đăng nhập hoặc token hết hạn"):403==r.response.status&&alert("Bạn ko có quyền"):r.request?alert(JSON.stringify(r.request)):r.message&&alert(JSON.stringify(r.message))}}},70790:function(r,e,n){"use strict";var t=n(9669),s=n.n(t),i=function(){var r={baseURL:"",method:"get",headers:{"Content-Type":"application/json;charset=utf-8"}},e=s().create(r);return e.interceptors.request.use((function(r){var e=localStorage.getItem("token");return r.headers.Authorization=e?"Bearer ".concat(e):"",r})),e};e["Z"]=i()}}]);
//# sourceMappingURL=9238-legacy.e6c47be4.js.map