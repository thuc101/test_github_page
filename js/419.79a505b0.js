(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[419],{70419:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return y}});var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("raw-loader",{attrs:{mytxt:n(16311).Z}}),r("h1",{staticClass:"border-bottom"},[t._v("Home view")]),t._v(" "+t._s(t.text)+" "),r("b-row",t._l(t.ds,(function(e,n){return r("b-col",{key:n,attrs:{lg:"3"}},[r("div",{staticClass:"border p-1 mb-1"},[r("h3",{staticClass:"border-bottom"},[t._v(t._s(e.tieude))]),r("div",{domProps:{innerHTML:t._s(e.nd)}}),r("button",{on:{click:function(n){return t.onView(e)}}},[t._v("View")]),r("button",{on:{click:function(n){return t.onEdit(e)}}},[t._v("Edit")])])])})),1),r("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSaveModal.apply(null,arguments)}}},[r("b-modal",{ref:"my-modal1",attrs:{size:"md","no-close-on-backdrop":!0,"hide-footer":"",title:"List Images"}},[r("div",{staticClass:"d-block"},[r("div",{},[t._v(" Tieu de : "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.sel.tieude,expression:"sel.tieude"}],staticClass:"mb-1 full-width",domProps:{value:t.sel.tieude},on:{input:function(e){e.target.composing||t.$set(t.sel,"tieude",e.target.value)}}}),r("CkeditorCom",{ref:"ckeditor",attrs:{height:"200px"},model:{value:t.sel.nd,callback:function(e){t.$set(t.sel,"nd",e)},expression:"sel.nd"}})],1),r("div",{staticClass:"border-top pt-1"},[r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn border mr-1",attrs:{type:"button"},on:{click:t.onSaveModal}},[t._v("Save")]),r("button",{staticClass:"btn border",attrs:{type:"button"},on:{click:function(e){return t.hideModal()}}},[t._v("Cancel")])])])])])],1)],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("ckeditor",{attrs:{config:t.editorConfig,value:t.value},on:{ready:t.onEditorReady,namespaceloaded:t.onNamespaceLoaded,input:t.onInput},model:{value:t.editorData,callback:function(e){t.editorData=e},expression:"editorData"}})],1)},s=[],a=n(20144),d=n(68067),l=n.n(d);a["default"].use(l());var c={props:["value"],components:{},data(){return{editorData:this.value,editorConfig:{extraPlugins:"timestamp,my_modal,image2,justify",removePlugins:"image,exportpdf",height:250}}},mounted(){},methods:{onNamespaceLoaded(t){t.addCss(".cke_editable{cursor:text; font-size: 11px; font-family: tahoma , Arial, sans-serif;}"),t.plugins.addExternal("timestamp","https://ckeditor.com/docs/ckeditor4/4.21.0/examples/assets/plugins/timestamp/","plugin.js"),t.plugins.addExternal("image2","/js/ckeditor_4.21.0_full/ckeditor/plugins/image2/","plugin.js"),t.plugins.add("my_modal",{init(t){t.addCommand("mySimpleCommand",{exec:function(t){let e="/images/bao.png";t.insertHtml(`<img src=${e} width="50px" height="40px" />`)}}),t.ui.addButton("SuperButton",{label:"Click me",command:"mySimpleCommand",toolbar:"insert",icon:"/images/bao.png"})}})},onEditorReady(t){},onInput(t){this.$emit("input",t)}}},u=c,h=n(1001),m=(0,h.Z)(u,o,s,!1,null,"41006df4",null),p=m.exports,f=n(19755),v=n.n(f),g={components:{CkeditorCom:p},data(){return{ds:[{id:1,tieude:"Bài viết 1",nd:'\n\n                        <p><img alt="" height="40" src="https://loremflickr.com/320/240" width="53" /></p>\n                        <p>Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here</p>\n                        \n\n\n                    '},{id:2,tieude:"Bài viết 2",nd:"Bài viết 2"},{id:3,tieude:"Bài viết 3",nd:"Bài viết 3"},{id:4,tieude:"Bài viết 4",nd:"Bài viết 4"},{id:5,tieude:"Bài viết 5",nd:"Bài viết 5"},{id:6,tieude:"Bài viết 6",nd:"Bài viết 6"}],sel:{},text:""}},methods:{getImgs(t){for(var e=t.getElementsByTagName("img"),n=0;n<e.length;n++)(function(t){e[t].addEventListener("click",(function(){alert(this.getAttribute("src"))}))})(n)},htmlToImgs(t){let e=v()(`<div>${t}</div>`),n=e.find("img"),r=[];for(var i=0;i<n.length;i++)r.push(n[i].src);return r},htmlToText(t){var e=document.createElement("span");e.innerHTML=t;for(var n=e.querySelectorAll("*"),r=0;r<n.length;r++)n[r].textContent?n[r].textContent+=" ":n[r].innerText+=" ";return[e.textContent||e.innerText].toString().replace(/ +/g," ")},onView(t){alert(this.htmlToImgs(t.nd))},showModal(){this.$refs["my-modal1"].show()},hideModal(){this.$refs["my-modal1"].hide()},onSaveModal(){let t=JSON.parse(JSON.stringify(this.sel)),e=this.ds.findIndex((e=>e.id==t.id));this.ds[e]=t,this.sel={},this.hideModal()},onEdit(t){this.sel=JSON.parse(JSON.stringify(t)),this.showModal()}}},x=g,b=(0,h.Z)(x,r,i,!1,null,"49b63a3e",null),y=b.exports},68067:function(t){
/*! For license information please see ckeditor.js.LICENSE.txt */
/*!*
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */
!function(e,n){t.exports=n()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function i(t,e){t.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,t))}}var o;function s(t,e){return"CKEDITOR"in window?Promise.resolve(CKEDITOR):"string"!=typeof t||t.length<1?Promise.reject(new TypeError("CKEditor URL must be a non-empty string.")):(o||(o=s.scriptLoader(t).then((function(t){return e&&e(t),t}))),o)}n.r(e),s.scriptLoader=function(t){return new Promise((function(e,n){!function(t,e,n){var o=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");"function"==typeof e&&(n=e,e={}),e=e||{},n=n||function(){},s.type=e.type||"text/javascript",s.charset=e.charset||"utf8",s.async=!("async"in e)||!!e.async,s.src=t,e.attrs&&function(t,e){for(var n in e)t.setAttribute(n,e[n])}(s,e.attrs),e.text&&(s.text=String(e.text)),("onload"in s?r:i)(s,n),s.onload||r(s,n),o.appendChild(s)}(t,(function(t){return o=void 0,t?n(t):window.CKEDITOR?void e(CKEDITOR):n(new Error("Script loaded from editorUrl doesn't provide CKEDITOR namespace."))}))}))};var a={name:"ckeditor",render(t){return t("div",{},[t(this.tagName)])},props:{value:{type:String,default:""},type:{type:String,default:"classic",validator:t=>["classic","inline"].includes(t)},editorUrl:{type:String,default:"https://cdn.ckeditor.com/4.20.2/standard-all/ckeditor.js"},config:{type:Object,default:()=>{}},tagName:{type:String,default:"textarea"},readOnly:{type:Boolean,default:null},throttle:{type:Number,default:80}},mounted(){s(this.editorUrl,(t=>{this.$emit("namespaceloaded",t)})).then((()=>{if(this.$_destroyed)return;const t=this.prepareConfig(),e="inline"===this.type?"inline":"replace",n=this.$el.firstElementChild;CKEDITOR[e](n,t)}))},beforeDestroy(){this.instance&&this.instance.destroy(),this.$_destroyed=!0},watch:{value(t){this.instance&&this.instance.getData()!==t&&this.instance.setData(t)},readOnly(t){this.instance&&this.instance.setReadOnly(t)}},methods:{prepareConfig(){const t=this.config||{};t.on=t.on||{},void 0===t.delayIfDetached&&(t.delayIfDetached=!0),null!==this.readOnly&&(t.readOnly=this.readOnly);const e=t.on.instanceReady;return t.on.instanceReady=t=>{this.instance=t.editor,this.$nextTick().then((()=>{this.prepareComponentData(),e&&e(t)}))},t},prepareComponentData(){const t=this.value;this.instance.fire("lockSnapshot"),this.instance.setData(t,{callback:()=>{this.$_setUpEditorEvents();const e=this.instance.getData();t!==e?(this.$once("input",(()=>{this.$emit("ready",this.instance)})),this.$emit("input",e)):this.$emit("ready",this.instance),this.instance.fire("unlockSnapshot")}})},$_setUpEditorEvents(){const t=this.instance,e=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){clearTimeout(n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];n=setTimeout(t.bind.apply(t,[r].concat(o)),e)}}((e=>{const n=t.getData();this.value!==n&&this.$emit("input",n,e,t)}),this.throttle);t.on("change",e),t.on("focus",(e=>{this.$emit("focus",e,t)})),t.on("blur",(e=>{this.$emit("blur",e,t)}))}}};const d={install(t){t.component("ckeditor",a)},component:a};e.default=d}]).default}))},16311:function(t,e){"use strict";e["Z"]='<template>\r\n    <div class="home">\r\n        <raw-loader :mytxt="require(\'!raw-loader!./Cke4Vue.vue\').default"></raw-loader>\r\n        <h1 class="border-bottom">Home view</h1>\r\n        {{ text }}\r\n        <b-row>\r\n            <b-col lg="3" v-for="(x, k) in ds" :key="k">\r\n                <div class="border p-1 mb-1">\r\n                    <h3 class="border-bottom">{{ x.tieude }}</h3>\r\n                    <div v-html="x.nd"></div>\r\n                    <button @click="onView(x)">View</button>\r\n                    <button @click="onEdit(x)">Edit</button>\r\n                </div>\r\n            </b-col>\r\n        </b-row>\r\n        <form @submit.stop.prevent="onSaveModal">\r\n            \x3c!-- class="modal fade " data-focus="false" id="basicModal"> --\x3e\r\n            <b-modal ref="my-modal1" size="md" :no-close-on-backdrop="true" hide-footer :title="\'List Images\'">\r\n                <div class="d-block">\r\n                    <div class="">\r\n                        Tieu de : <input v-model="sel.tieude" class="mb-1 full-width" />\r\n                        <CkeditorCom ref="ckeditor" v-model="sel.nd" :height="\'200px\'"></CkeditorCom>\r\n                    </div>\r\n                    <div class="border-top pt-1">\r\n                        <div class="text-right">\r\n                            <button type="button" @click="onSaveModal" class="btn border mr-1">Save</button>\r\n                            <button type="button" class="btn border" @click="hideModal()">Cancel</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </b-modal>\r\n        </form>\r\n    </div>\r\n</template>\r\n<script>\r\nimport CkeditorCom from "@/views/Cke4Vue/CkeCom2.vue"\r\nimport $ from "jquery";\r\nexport default {\r\n    components: {\r\n        CkeditorCom\r\n    },\r\n    data() {\r\n        return {\r\n            ds: [\r\n                {\r\n                    id: 1, tieude: \'Bài viết 1\', nd:\r\n                        `\r\n\r\n                        <p><img alt="" height="40" src="https://loremflickr.com/320/240" width="53" /></p>\r\n                        <p>Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here Text content goes here</p>\r\n                        \r\n\r\n\r\n                    `\r\n                },\r\n                { id: 2, tieude: \'Bài viết 2\', nd: \'Bài viết 2\' },\r\n                { id: 3, tieude: \'Bài viết 3\', nd: \'Bài viết 3\' },\r\n                { id: 4, tieude: \'Bài viết 4\', nd: \'Bài viết 4\' },\r\n                { id: 5, tieude: \'Bài viết 5\', nd: \'Bài viết 5\' },\r\n                { id: 6, tieude: \'Bài viết 6\', nd: \'Bài viết 6\' },\r\n            ],\r\n            sel: {},\r\n            text:\'\'\r\n        }\r\n    },\r\n    methods: {\r\n        getImgs(html) {\r\n            var getAllImages = html.getElementsByTagName(\'img\');\r\n            for (var i = 0; i < getAllImages.length; i++) {\r\n                (function (x) {  // closure starts here\r\n                    getAllImages[x].addEventListener(\'click\', function () {\r\n                        alert(this.getAttribute(\'src\'))\r\n                    })\r\n                }(i))\r\n            }\r\n        },\r\n        htmlToImgs(html){\r\n            let $div=$(`<div>${html}</div>`);\r\n            let imgs=$div.find(\'img\');\r\n            let kq=[];\r\n            for(var i = 0; i < imgs.length; i++) {\r\n                kq.push(imgs[i].src);\r\n            }\r\n            return kq;\r\n        },\r\n        htmlToText(s) {\r\n            var span = document.createElement(\'span\');\r\n            span.innerHTML = s;\r\n            var children = span.querySelectorAll(\'*\');\r\n            for (var i = 0; i < children.length; i++) {\r\n                if (children[i].textContent)\r\n                    children[i].textContent += \' \';\r\n                else\r\n                    children[i].innerText += \' \';\r\n            }\r\n            return [span.textContent || span.innerText].toString().replace(/ +/g, \' \');\r\n        },\r\n        onView(x) {\r\n            //this.text=this.htmlToText(x.nd); //alert(s);\r\n            alert(this.htmlToImgs(x.nd));\r\n        },\r\n        showModal() {\r\n            this.$refs["my-modal1"].show();\r\n        },\r\n        hideModal() {\r\n            this.$refs["my-modal1"].hide();\r\n        },\r\n        onSaveModal() {\r\n            let r = JSON.parse(JSON.stringify(this.sel));\r\n            let index = this.ds.findIndex(x => x.id == r.id);\r\n            this.ds[index] = r;\r\n            this.sel = {};\r\n            this.hideModal();\r\n        },\r\n        onEdit(x) {\r\n            //alert(JSON.stringify(x));\r\n            this.sel = JSON.parse(JSON.stringify(x));\r\n            this.showModal();\r\n        }\r\n    }\r\n\r\n}\r\n<\/script>\r\n<style scoped>\r\n.full-width {\r\n    width: 100%;\r\n}\r\n</style>\r\n  '}}]);
//# sourceMappingURL=419.79a505b0.js.map