(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[4813],{33431:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-container",{attrs:{fluid:""}},[i("raw-loader",{attrs:{mytxt:n(19859).Z}}),i("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.onSave.apply(null,arguments)}}},[i("b-table",{ref:"mytable",attrs:{items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,filter:e.filter,"filter-included-fields":e.filterOn,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-direction":e.sortDirection,stacked:"md","show-empty":"",small:"",fixed:"",outlined:"",bordered:""},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},filtered:e.onFiltered},scopedSlots:e._u([{key:"cell()",fn:function(t){var n=t.value,s=t.item,a=t.field.key;return[e.sel[e.pri]!=s[e.pri]?[0!=s[e.pri]?[a==e.pri?[e._v(" "+e._s(n)+" ")]:e._e(),"name"==a?[e._v(" "+e._s(n)+" ")]:e._e(),"ngay"==a?[e._v(" "+e._s(n)+" ")]:e._e(),"tp"==a?[e._v(" "+e._s(n)+" ")]:e._e(),"loai"==a?[e._v(" "+e._s(n)+" ")]:e._e(),"monid"==a?[e._v(" "+e._s(n)+" ")]:e._e()]:e._e()]:e._e(),e.sel[e.pri]==s[e.pri]||0==s[e.pri]?[a==e.pri?[i("span",[e._v(e._s(n))])]:e._e(),"name"==a?[i("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"ko-hop-le":e.errors.has(a)},attrs:{autocomplete:"off",name:a,placeholder:""},model:{value:s[a],callback:function(t){e.$set(s,a,t)},expression:"item[key]"}})]:e._e(),"ngay"==a?[i("b-form-datepicker",{attrs:{"date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:"vi"},model:{value:s[a],callback:function(t){e.$set(s,a,t)},expression:"item[key]"}})]:e._e(),"tp"==a?[i("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{danger:e.errors.has(a)},attrs:{name:a,reduce:function(e){return e.id},options:[{label:"Huế",id:"HUE"},{label:"Sài gòn",id:"SG"},{label:"Đà nẵng",id:"DN"},{label:"Quảng ngãi",id:"QN"}],"has-error":e.errors.has(a)},model:{value:s[a],callback:function(t){e.$set(s,a,t)},expression:"item[key]"}})]:e._e(),"loai"==a?[i("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{danger:e.errors.has(a)},attrs:{multiple:"",name:a,options:["admin","user","guest"],"has-error":e.errors.has(a)},model:{value:s[a],callback:function(t){e.$set(s,a,t)},expression:"item[key]"}})]:e._e(),"monid"==a?[i("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{danger:e.errors.has(a)},attrs:{name:a,reduce:function(e){return e.id},options:e.mons,"has-error":e.errors.has(a)},model:{value:s[a],callback:function(t){e.$set(s,a,t)},expression:"item[key]"}})]:e._e()]:e._e()]}},{key:"cell(cmd)",fn:function(t){return[0==t.item[e.pri]?[i("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return e.onSave(t.item)}}},[i("b-icon-hand-thumbs-up")],1),i("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return e.OnCancel(t.item)}}},[i("b-icon-file-x")],1)]:[e.sel[e.pri]!=t.item[e.pri]?i("b-button",{staticClass:"mr-1",attrs:{variant:"outline",disabled:1==e.isAdded(),size:"sm"},on:{click:function(n){return e.OnEdit(t.item)}}},[i("b-icon-pencil-square")],1):e._e(),e.sel[e.pri]!=t.item[e.pri]?i("b-button",{staticClass:"mr-1",attrs:{variant:"outline",disabled:1==e.isAdded(),size:"sm"},on:{click:function(n){return e.OnDel(t.item)}}},[i("b-icon-trash")],1):e._e(),e.sel[e.pri]==t.item[e.pri]?i("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return e.onSave(t.item)}}},[i("b-icon-hand-thumbs-up")],1):e._e(),e.sel[e.pri]==t.item[e.pri]?i("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(n){return e.OnCancel(t.item)}}},[i("b-icon-file-x")],1):e._e()]]}},{key:"bottom-row",fn:function(t){return[i("td",{attrs:{colspan:t.columns}},[i("b-row",[i("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[i("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[i("b-input-group",{attrs:{size:"sm"}},[i("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),i("b-input-group-append",[i("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear")])],1)],1)],1)],1),i("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[i("b-form-group",{staticClass:"mb-0",attrs:{label:"Per page","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm"}},[i("b-form-select",{attrs:{id:"per-page-select",options:e.pageOptions,size:"sm"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1),i("b-col",{staticClass:"my-1 text-right",attrs:{sm:"6"}},[e._v(" page :"+e._s(e.currentPage)+" / "+e._s(e.getLastPage(e.totalRows))+" of "+e._s(e.totalRows)+" "),i("b-button",{attrs:{disabled:1==e.adding||1==e.isEditing(),size:"sm"},on:{click:e.OnAdd}},[i("b",[e._v("Add")])])],1),i("b-col",{staticClass:"my-1",attrs:{sm:"6"}},[i("b-pagination",{staticClass:"my-0",attrs:{disabled:1==e.adding||1==e.isEditing(),"total-rows":e.totalRows,"per-page":e.perPage,align:"fill",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)]}}])})],1),i("b-modal",{attrs:{id:e.infoModal.id,title:e.infoModal.title,"ok-only":""},on:{hide:e.resetInfoModal}},[i("pre",[e._v(e._s(e.infoModal.content))])])],1)},s=[],a=n(77673),r=n(16198),l=(n(41539),n(39714),n(34553),n(21249),n(57327),n(54747),n(38862),n(40561),n(12954)),o=n(20144),d=n(30381),m=n.n(d),c=n(19938),u=n.n(c),p=n(9669),f=n.n(p);o["default"].use(l.ZP,{classes:!0,fieldsBagName:"veeFields"}),o["default"].component("v-select",u());var h={data:function(){var e=this;return{items:[],fields:[{key:"id",formatter:function(e,t,n){var i=e.toString();return i.length<4?i:i.substring(0,4)+"..."},sortable:!0,thClass:"text-center",tdClass:"text-center align-middle",thStyle:{width:"5%"}},{key:"name",sortable:!0,thClass:"text-center",tdClass:"align-middle",thStyle:{width:"25%"}},{key:"ngay",formatter:function(e,t,n){return m()(e).format("DD/MM/YYYY")},sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"15%"}},{key:"tp",formatter:function(e,t,n){var i="",s=[{label:"Huế",id:"HUE"},{label:"Sài gòn",id:"SG"},{label:"Đà nẵng",id:"DN"},{label:"Quảng ngãi",id:"QN"}],a=s.findIndex((function(t){return t.id==e}));return a>=0&&(i=s[a].label),i},sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"15%"}},{key:"loai",sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"15%"}},{key:"monid",formatter:function(t,n,i){var s="",a=e.mons.findIndex((function(e){return e.id==t}));return a>=0&&(s=e.mons[a].label),s},sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"15%"}},{key:"cmd",class:"text-center",thClass:"text-center",tdClass:"align-middle",thStyle:{width:"10%"}}],totalRows:1,currentPage:1,perPage:3,pageOptions:[3,5,10,15,{value:100,text:"Show a lot"}],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},sel:{},pri:"id",adding:!1,lastPage:0,mons:[]}},computed:{sortOptions:function(){return this.fields.filter((function(e){return e.sortable})).map((function(e){return{text:e.label,value:e.key}}))}},mounted:function(){var e=this,t=[{id:1,name:"thuc 101",ngay:new Date,tp:"QN",loai:["admin"],monid:4},{id:2,name:"thuc 102",ngay:new Date,tp:"QN",loai:["admin"],monid:4},{id:3,name:"thuc 103",ngay:new Date,tp:"QN",loai:["admin"],monid:4}];this.items=t,this.totalRows=this.items.length,this.lastPage=this.getLastPage(this.totalRows),this.GetMons().then((function(t){var n=[];t.data.forEach((function(e){var t={id:e.Id,label:e.Name,donGia:e.DonGia};n.push(JSON.parse(JSON.stringify(t)))})),e.mons=n}))},methods:{createId:function(){var e=this,t=0;return this.items.forEach((function(n){n[e.pri]>t&&(t=n[e.pri])})),t+1},onSave:function(e){var t=this;this.$validator.validateAll().then((function(n){if(n){var i=JSON.parse(JSON.stringify(e));if(0==i[t.pri]){var s=t.items.findIndex((function(e){return e[t.pri]==i[t.pri]}));i[t.pri]=t.createId(),t.$set(t.items,s,i),t.adding=!1,t.$refs.mytable.refresh()}else{var a=t.items.findIndex((function(e){return e[t.pri]==i[t.pri]}));t.$set(t.items,a,i),t.sel={}}}else t.toast("Không hợp lệ")}))},OnDel:function(e){this.delRow(e)},delRow:function(e){var t=this,n=e[this.pri],i=this.items.findIndex((function(e){return e[t.pri]==n}));this.items.splice(i,1),this.totalRows=this.items.length,this.lastPage=this.getLastPage(this.totalRows)},doCancel:function(e){for(var t in e)e[t]!=this.sel[t]&&(e[t]=this.sel[t])},isAdded:function(){var e=this,t=!1;return this.items.forEach((function(n){0==n[e.pri]&&(t=!0)})),t},OnEdit:function(e){"{}"==JSON.stringify(this.sel)&&(this.sel=JSON.parse(JSON.stringify(e)))},OnCancel:function(e){var t=this;if(0==e[this.pri]){var n=this.items.findIndex((function(n){return n[t.pri]==e[t.pri]}));this.items.splice(n,1),this.adding=!1,this.$refs.mytable.refresh()}else this.doCancel(e),this.sel={}},OnAdd:function(){var e={id:0,name:"Thức"};this.items.unshift(e),this.adding=!0,this.currentPage=1,this.totalRows=this.items.length,this.$refs.mytable.refresh()},isEditing:function(){return"{}"!=JSON.stringify(this.sel)},getLastPage:function(e){var t=this.perPage,n=e%t;return 0==n?e/t:(e-n)/t+1},info:function(e,t,n){this.infoModal.title="Row index: ".concat(t),this.infoModal.content=JSON.stringify(e,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,n)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},onFiltered:function(e){this.totalRows=e.length,this.currentPage=1},toast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$bvToast.toast(e,{title:"Information",variant:t,solid:!0})},GetMons:function(){return(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f().get("/api/Mon/GetAll").catch((function(e){console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}}},b=h,g=n(1001),v=(0,g.Z)(b,i,s,!1,null,null,null),y=v.exports},67066:function(e,t,n){"use strict";var i=n(19670);e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},34706:function(e,t,n){var i=n(46916),s=n(92597),a=n(47976),r=n(67066),l=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in l||s(e,"flags")||!a(l,e)?t:i(r,e)}},21249:function(e,t,n){"use strict";var i=n(82109),s=n(42092).map,a=n(81194),r=a("map");i({target:"Array",proto:!0,forced:!r},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},40561:function(e,t,n){"use strict";var i=n(82109),s=n(17854),a=n(51400),r=n(19303),l=n(26244),o=n(47908),d=n(65417),m=n(86135),c=n(81194),u=c("splice"),p=s.TypeError,f=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var n,i,s,c,u,v,y=o(this),x=l(y),k=a(e,x),w=arguments.length;if(0===w?n=i=0:1===w?(n=0,i=x-k):(n=w-2,i=h(f(r(t),0),x-k)),x+n-i>b)throw p(g);for(s=d(y,i),c=0;c<i;c++)u=k+c,u in y&&m(s,c,y[u]);if(s.length=i,n<i){for(c=k;c<x-i;c++)u=c+i,v=c+n,u in y?y[v]=y[u]:delete y[v];for(c=x;c>x-i+n;c--)delete y[c-1]}else if(n>i)for(c=x-i;c>k;c--)u=c+i-1,v=c+n-1,u in y?y[v]=y[u]:delete y[v];for(c=0;c<n;c++)y[c+k]=arguments[c+2];return y.length=x-i+n,s}})},39714:function(e,t,n){"use strict";var i=n(76530).PROPER,s=n(98052),a=n(19670),r=n(41340),l=n(47293),o=n(34706),d="toString",m=RegExp.prototype,c=m[d],u=l((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),p=i&&c.name!=d;(u||p)&&s(RegExp.prototype,d,(function(){var e=a(this),t=r(e.source),n=r(o(e));return"/"+t+"/"+n}),{unsafe:!0})},19859:function(e,t){"use strict";t["Z"]='<template>\n  <b-container fluid>\n    <raw-loader :mytxt="require(\'!raw-loader!./Basic3.vue\').default"></raw-loader>\n    <form @submit.stop.prevent="onSave">\n      <b-table ref="mytable" :items="items" :fields="fields" :current-page="currentPage" :per-page="perPage"\n        :filter="filter" :filter-included-fields="filterOn" :sort-by.sync="sortBy" :sort-desc.sync="sortDesc"\n        :sort-direction="sortDirection" stacked="md" show-empty small fixed outlined bordered @filtered="onFiltered">\n\n        <template v-slot:cell()="{ value, item, field: { key } }">\n          <template v-if="sel[pri] != item[pri]">\n            <template v-if="item[pri] != 0">\n              <template v-if="key == pri">\n                {{ value }}\n              </template>\n              <template v-if="key == \'name\'">\n                {{ value }}\n              </template>\n              \x3c!-- { id: 1, name: "thuc 101", ngay: new Date(), tp: "QN", loai: [\'admin\'],monid:4 }, --\x3e\n              <template v-if="key == \'ngay\'">\n                {{ value }}\n              </template>\n              <template v-if="key == \'tp\'">\n                {{ value }}\n              </template>\n              <template v-if="key == \'loai\'">\n                {{ value }}\n              </template>\n              <template v-if="key == \'monid\'">\n                {{ value }}\n              </template>\n            </template>\n          </template>\n          <template v-if="(sel[pri] == item[pri] || item[pri] == 0)">\n            <template v-if="key == pri">\n              <span>{{ value }}</span>\n            </template>\n            <template v-if="key == \'name\'">\n              <b-form-input autocomplete="off" v-model="item[key]" :name="key" v-validate="\'required\'" placeholder=""\n                :class="{ \'ko-hop-le\': errors.has(key) }">\n              </b-form-input>\n            </template>\n            \x3c!-- { id: 1, name: "thuc 101", ngay: new Date(), tp: "QN", loai: [\'admin\'],monid:4 }, --\x3e\n            <template v-if="key == \'ngay\'">\n              \x3c!-- <b-form-input autocomplete="off" v-model="item[key]" :name="key" v-validate="\'required\'" placeholder=""\n                :class="{ \'ko-hop-le\': errors.has(key) }">\n              </b-form-input> --\x3e\n\n              <b-form-datepicker v-model="item[key]"\n                :date-format-options="{ year: \'numeric\', month: \'numeric\', day: \'numeric\' }" locale="vi"\n                class="">\n              </b-form-datepicker>\n\n\n            </template>\n            <template v-if="key == \'tp\'">\n              \x3c!-- <b-form-input autocomplete="off" v-model="item[key]" :name="key" v-validate="\'required\'" placeholder=""\n                :class="{ \'ko-hop-le\': errors.has(key) }">\n              </b-form-input> --\x3e\n\n                    <v-select v-model="item[key]" v-validate="\'required\'" :name="key" :reduce="(option) => option.id"\n                      :options="[\n                        { label: \'Huế\', id: \'HUE\' },\n                        { label: \'Sài gòn\', id: \'SG\' },\n                        { label: \'Đà nẵng\', id: \'DN\' },\n                        { label: \'Quảng ngãi\', id: \'QN\' }\n                      ]" :has-error="errors.has(key)" :class="{ danger: errors.has(key) }" />\n\n\n            </template>\n            <template v-if="key == \'loai\'">\n\n              <v-select multiple v-model="item[key]" :name="key" v-validate="\'required\'" :options="[\n                \'admin\',\n                \'user\',\n                \'guest\'\n              ]" :has-error="errors.has(key)" :class="{ danger: errors.has(key) }" />\n\n\n            </template>\n            <template v-if="key == \'monid\'">\n              \x3c!-- <b-form-input autocomplete="off" v-model="item[key]" :name="key" v-validate="\'required\'" placeholder=""\n                :class="{ \'ko-hop-le\': errors.has(key) }">\n              </b-form-input> --\x3e\n\n              <v-select v-model="item[key]" v-validate="\'required\'" :name="key" :reduce="(option) => option.id"\n                :options="\n                mons\n                " :has-error="errors.has(key)" :class="{ danger: errors.has(key) }" />\n\n            </template>\n\n          </template>\n        </template>\n\n        <template #cell(cmd)="row">\n          <template v-if="row.item[pri] == 0">\n            <b-button variant="outline" class="mr-1" size="sm" @click="onSave(row.item)">\n              <b-icon-hand-thumbs-up></b-icon-hand-thumbs-up>\n            </b-button>\n            <b-button variant="outline" class="mr-1" size="sm" @click="OnCancel(row.item)">\n              <b-icon-file-x></b-icon-file-x>\n            </b-button>\n          </template>\n          <template v-else>\n            <b-button variant="outline" :disabled="isAdded() == true" class="mr-1" v-if="sel[pri] != row.item[pri]" size="sm"\n              @click="OnEdit(row.item)">\n              <b-icon-pencil-square></b-icon-pencil-square>\n            </b-button>\n            <b-button variant="outline" :disabled="isAdded() == true" class="mr-1" v-if="sel[pri] != row.item[pri]" size="sm"\n              @click="OnDel(row.item)">\n              <b-icon-trash></b-icon-trash>\n            </b-button>\n            <b-button variant="outline" class="mr-1" v-if="sel[pri] == row.item[pri]" size="sm" @click="onSave(row.item)">\n              <b-icon-hand-thumbs-up></b-icon-hand-thumbs-up>\n            </b-button>\n            <b-button variant="outline" class="mr-1" v-if="sel[pri] == row.item[pri]" size="sm" @click="OnCancel(row.item)">\n              <b-icon-file-x></b-icon-file-x>\n            </b-button>\n          </template>\n        </template>\n\n        <template #bottom-row="data">\n          <td :colspan="data.columns">\n            <b-row>\n              <b-col sm="6" class="my-1">\n                <b-form-group label="Filter" label-for="filter-input" label-cols-sm="3" label-align-sm="right"\n                  label-size="sm" class="mb-0">\n                  <b-input-group size="sm">\n                    <b-form-input id="filter-input" v-model="filter" type="search"\n                      placeholder="Type to Search"></b-form-input>\n                    <b-input-group-append>\n                      <b-button :disabled="!filter" @click="filter = \'\'">Clear</b-button>\n                    </b-input-group-append>\n                  </b-input-group>\n                </b-form-group>\n              </b-col>\n              <b-col sm="6" class="my-1">\n                <b-form-group label="Per page" label-for="per-page-select" label-cols-sm="6" label-cols-md="4"\n                  label-cols-lg="3" label-align-sm="right" label-size="sm" class="mb-0">\n                  <b-form-select id="per-page-select" v-model="perPage" :options="pageOptions"\n                    size="sm"></b-form-select>\n                </b-form-group>\n              </b-col>\n              <b-col sm="6" class="my-1 text-right">\n                page :{{ currentPage }} / {{ getLastPage(totalRows) }} of {{ totalRows }}\n                <b-button :disabled="adding == true || isEditing() == true" @click="OnAdd"\n                  size="sm"><b>Add</b></b-button>\n              </b-col>\n              <b-col sm="6" class="my-1">\n                <b-pagination :disabled=" adding == true || isEditing() == true " v-model="currentPage" :total-rows="totalRows" :per-page="perPage" align="fill" size="sm"\n                  class="my-0"></b-pagination>\n              </b-col>\n            </b-row>\n\n          </td>\n        </template>\n\n      </b-table>\n    </form>\n    \x3c!-- Info modal --\x3e\n    <b-modal :id="infoModal.id" :title="infoModal.title" ok-only @hide="resetInfoModal">\n      <pre>{{ infoModal.content }}</pre>\n    </b-modal>\n  </b-container>\n</template>\n\n<script>\n\nimport VeeValidate from "vee-validate";\nimport Vue from "vue";\nVue.use(VeeValidate, {\n  classes: true,\n  fieldsBagName: \'veeFields\'\n});\n\nimport moment from "moment";\n\nimport vSelect from "vue-select";\nVue.component("v-select", vSelect);\n//import "vue-select/dist/vue-select.css";\n\nimport axios from "axios";\n\nexport default {\n  data() {\n    return {\n      items: [\n      ],\n      fields: [\n        {\n          key: \'id\',\n          formatter: (value, key, item) => {\n            let text = value.toString();\n            return (text.length < 4) ? text : text.substring(0, 4) + "...";\n          },\n          sortable: true,\n          thClass: \'text-center\',\n          tdClass: \'text-center align-middle\',\n          //tdClass: \'align-middle\'\n          thStyle: { width: "5%" },\n        },\n        //{ id: 1, name: "thuc 101", ngay: new Date(), tp: "QN", loai: [\'admin\'],monid:4 },\n        { key: \'name\', sortable: true, thClass: \'text-center\', tdClass: \'align-middle\', thStyle: { width: "25%" }},\n        { key: \'ngay\',\n          formatter: (value, key, item) => {\n            return moment(value).format("DD/MM/YYYY");\n          },\n          sortable: true, thClass: \'text-center\', tdClass: \'align-middle text-center\', thStyle: { width: "15%" }},\n        { key: \'tp\', \n          formatter: (value, key, item) => {\n            let kq = "";\n            let tps = [\n              { label: \'Huế\', id: \'HUE\' },\n              { label: \'Sài gòn\', id: \'SG\' },\n              { label: \'Đà nẵng\', id: \'DN\' },\n              { label: \'Quảng ngãi\', id: \'QN\' }\n            ];\n            let index = tps.findIndex(x => x.id == value);\n            if (index >= 0) {\n              kq = tps[index].label;\n            }\n            return kq;\n          },\n        sortable: true, thClass: \'text-center\', tdClass: \'align-middle text-center\', thStyle: { width: "15%" }},\n        { key: \'loai\', sortable: true, thClass: \'text-center\', tdClass: \'align-middle text-center\', thStyle: { width: "15%" }},\n        { key: \'monid\',\n          formatter: (value, key, item) => {\n            let kq = "";\n            let index = this.mons.findIndex(x => x.id == value);\n            if (index >= 0) {\n              kq = this.mons[index].label;\n            }\n            return kq;\n          },\n        sortable: true, thClass: \'text-center\', tdClass: \'align-middle text-center\', thStyle: { width: "15%" }},\n        {\n          key: \'cmd\',\n          class: \'text-center\',\n          thClass: \'text-center\',\n          tdClass: \'align-middle\',\n          thStyle: { width: "10%" }\n        }\n      ],\n      totalRows: 1,\n      currentPage: 1,\n      perPage: 3,\n      pageOptions: [3,5, 10, 15, { value: 100, text: "Show a lot" }],\n      sortBy: \'\',\n      sortDesc: false,\n      sortDirection: \'asc\',\n      filter: null,\n      filterOn: [],\n      infoModal: {\n        id: \'info-modal\',\n        title: \'\',\n        content: \'\'\n      },\n\n      sel: {},\n      pri: \'id\',\n      adding: false,\n      lastPage:0,\n\n      mons:[]\n\n    }\n  },\n  computed: {\n    sortOptions() {\n      // Create an options list from our fields\n      return this.fields\n        .filter(f => f.sortable)\n        .map(f => {\n          return { text: f.label, value: f.key }\n        })\n    }\n  },\n  mounted() {\n    let items = [\n      { id: 1, name: "thuc 101", ngay: new Date(), tp: "QN", loai: [\'admin\'],monid:4 },\n      { id: 2, name: "thuc 102", ngay: new Date(), tp: "QN", loai: [\'admin\'],monid:4 },\n      { id: 3, name: "thuc 103", ngay: new Date(), tp: "QN", loai: [\'admin\'],monid:4 },\n    ];\n    this.items = items;\n    this.totalRows = this.items.length;\n    this.lastPage=this.getLastPage(this.totalRows);\n\n    this.GetMons().then(res=>{\n          let mons=[];\n          res.data.forEach(x=>{\n            let item={\n              id:x.Id,\n              label:x.Name,\n              donGia:x.DonGia\n            };\n            mons.push(JSON.parse(JSON.stringify(item)));\n          })\n          this.mons=mons;\n      })\n\n\n  },\n  methods: {\n    createId(){\n      let max=0;\n      this.items.forEach(x=>{\n        if(x[this.pri] > max){\n          max=x[this.pri];\n        }\n      })\n      return max+1;\n    },\n    onSave(item) {\n      this.$validator.validateAll().then((result) => {\n        if (!result) {\n          this.toast("Không hợp lệ");\n          return;\n        }\n        let r = JSON.parse(JSON.stringify(item));\n        if(r[this.pri]==0){\n          let index = this.items.findIndex(x => x[this.pri] == r[this.pri]);\n          r[this.pri] = this.createId();//new Date().getTime();\n          this.$set(this.items, index, r);\n          this.adding=false;\n          this.$refs.mytable.refresh();\n        }else{\n          let index = this.items.findIndex(x => x[this.pri] == r[this.pri]);\n          this.$set(this.items, index, r);\n          this.sel={};\n        }\n      });\n    },\n    OnDel(item) {\n      this.delRow(item);\n    },\n    delRow(item) {\n      let id = item[this.pri];\n      let index = this.items.findIndex(x => x[this.pri] == id);\n      this.items.splice(index, 1);\n      this.totalRows = this.items.length;\n      this.lastPage = this.getLastPage(this.totalRows);\n    },\n    doCancel(item) {\n      for (let key in item) {\n        if (item[key] != this.sel[key]) {\n          item[key] = this.sel[key]\n        }\n      }\n    },\n    isAdded() {\n      let kq = false;\n      this.items.forEach(x => {\n        if (x[this.pri] == 0) kq = true;\n      })\n      return kq;\n    },\n    OnEdit(item) {\n      if (JSON.stringify(this.sel) != "{}") return;\n      this.sel = JSON.parse(JSON.stringify(item));\n    },\n    OnCancel(item) {\n      if (item[this.pri] == 0) {\n        let index = this.items.findIndex(x => x[this.pri] == item[this.pri]);\n        this.items.splice(index, 1);\n        this.adding = false;\n        this.$refs.mytable.refresh();\n      } else {\n        this.doCancel(item);\n        this.sel = {};\n      }\n    },\n    OnAdd() {\n      let r = {\n        id: 0,\n        name: \'Thức\',\n      }\n      this.items.unshift(r);\n      this.adding = true;\n      this.currentPage=1;\n      this.totalRows=this.items.length;\n      this.$refs.mytable.refresh();\n    },\n    isEditing() {\n      return JSON.stringify(this.sel) != "{}"\n    },\n    getLastPage(count) {\n      let pageSize = this.perPage;//this.tabulator.getPageSize();\n      let du = count % pageSize;\n      return du == 0 ? count / pageSize : (count - du) / pageSize + 1;\n    },\n    info(item, index, button) {\n      this.infoModal.title = `Row index: ${index}`\n      this.infoModal.content = JSON.stringify(item, null, 2)\n      this.$root.$emit(\'bv::show::modal\', this.infoModal.id, button)\n    },\n    resetInfoModal() {\n      this.infoModal.title = \'\'\n      this.infoModal.content = \'\'\n    },\n    onFiltered(filteredItems) {\n      this.totalRows = filteredItems.length\n      this.currentPage = 1\n    },\n    toast(msg, variant = null) {\n      this.$bvToast.toast(msg, {\n        title: `Information`,\n        variant: variant,\n        solid: true,\n      });\n    },\n    async GetMons() {\n      return await axios.get(`/api/Mon/GetAll`).catch((err) => {\n        console.log(err);\n      });\n    },\n  }\n}\n<\/script>\n<style lang="scss">\n@import "@/assets/scss/myStyle.scss";\n</style>'}}]);
//# sourceMappingURL=4813-legacy.05d44db9.js.map