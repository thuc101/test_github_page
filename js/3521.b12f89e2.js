"use strict";(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[3521],{33521:function(t,e,n){n.r(e),n.d(e,{default:function(){return u}});var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"MonHocToan"},[a("raw-loader",{attrs:{mytxt:n(18397).Z}}),a("h1",[t._v("Upload file page")]),a("a",{attrs:{href:"https://www.itsolutionstuff.com/post/file-upload-using-vue-js-axios-phpexample.html",target:"_blank"}},[t._v(" https://www.itsolutionstuff.com/post/file-upload-using-vue-js-axios-phpexample.html ")]),a("b-row",{staticClass:"mt-2 border-bottom mb-3"},t._l(t.ds,(function(e){return a("b-col",{key:e,attrs:{md:"1"}},[a("div",{staticClass:"border mb-2 position-relative bg-dark text-light",staticStyle:{height:"50px"}},[a("img",{attrs:{width:"100%",height:"50px",src:"/api/FileUpload/GetImage/"+e,alt:"Image 1"}}),a("span",{staticClass:"position-absolute",staticStyle:{right:"1px"}},[t._v("one")]),a("span",{staticClass:"position-absolute",staticStyle:{bottom:"1px",right:"1px"}},[a("button",{on:{click:function(n){return t.onDel(e)}}},[t._v("Del")])]),a("span",{staticClass:"position-absolute",staticStyle:{bottom:"1px",left:"1px"}}),a("span",{staticClass:"position-absolute",staticStyle:{top:"1px",left:"1px"}},[t._v("four")])])])})),1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 border-right"},[a("div",[t._v(t._s(t.listInfo))]),a("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onUpload.apply(null,arguments)}}},[a("img",{ref:"output",staticClass:"mb-1",attrs:{id:"output",width:"200",height:"110"}}),a("input",{ref:"file",staticClass:"m-1",attrs:{type:"file",id:"file"},on:{change:t.onFileChange}}),a("br"),null!=t.files&&t.files.length>0?a("div",[a("button",{staticClass:"mr-1",attrs:{type:"submit"}},[t._v("Upload")]),a("button",{staticClass:"mr-1",on:{click:t.onRemove}},[t._v("Remove")])]):t._e()])]),a("div",{staticClass:"col-sm-6 border-right bg-primary"},[a("ul",t._l(t.ds,(function(e){return a("li",{key:e},[t._v(" "+t._s(e)+" "),a("button",{on:{click:function(n){return t.onView(e)}}},[t._v("View img")])])})),0)]),a("div",{staticClass:"col-sm-2"},[a("div",[t._v(t._s(t.ds[0]))]),a("b-img",{attrs:{thumbnail:"",src:t.src,alt:"Image 1"}})],1)])],1)},i=[],s=n(19755),l=n.n(s),o=n(9669),r=n.n(o),p=(n(30381),{name:"Tpl",components:{},data(){return{files:null,listInfo:[],ds:[],src:""}},mounted(){this.getListImg().then((t=>{this.ds=t.data}))},methods:{getListInfo(t){let e=[];for(var n=0;n<t.length;n++){let a={name:t[n].name,lastModified:t[n].lastModified,size:t[n].size,type:t[n].type};e.push(a)}return e},onFileChange(){var t=["image/jpg","image/gif","image/png","image/jpeg"];let e=this.$refs.file.files,n=t.findIndex((t=>t==e[0].type));n>=0?alert("file hợp lệ"):alert("file khong hop le"),this.files=this.$refs.file.files,this.listInfo=this.getListInfo(this.$refs.file.files),this.getReadAsDataURL(this.files[0]).then((t=>{l()(this.$refs.output).attr("src",t)}))},onDel(t){this.Del(t).then((t=>{this.loadListImg()}))},onView(t){this.ReadImage(t).then((t=>{this.src=`data:image/jpg;base64,${t.data}`}))},getReadAsDataURL(t){return new Promise(((e,n)=>{let a=new FileReader;a.onload=()=>{e(a.result)},a.onerror=n,a.readAsDataURL(t)}))},onRemove(t){t.preventDefault(),l()(this.$refs.file).val(""),this.files=null,l()(this.$refs.output).attr("src","")},onUpload(){if(void 0!==window.FormData){var t=l()("#file").get(0),e=t.files;if(0==e.length)return void alert("thieu file");var n=new FormData;n.append("myfile",e[0]),n.append("ten","thuc 101");let a=this;l().ajax({url:"/api/FileUpload/Upload4",type:"POST",contentType:!1,processData:!1,data:n,success:function(t){a.loadListImg(),a.files=null,l()("#output").attr("src","")},error:function(t){alert(t.statusText)}})}else alert("FormData is not supported.")},loadListImg(){this.getListImg().then((t=>{this.ds=t.data}))},async getListImg(){return await r().get("/api/FileUpload/GetListFile").catch((t=>{console.log(t)}))},async ReadImage(t){return await r().get(`/api/FileUpload/ReadImage/${t}`).catch((t=>{console.log(t)}))},async GetImage(t){return await r().get(`/api/FileUpload/GetImage/${t}`).catch((t=>{console.log(t)}))},async ReadImage(t){return await r().get(`/api/FileUpload/ReadImage/${t}`).catch((t=>{console.log(t)}))},async Del(t){return await r().get(`/api/FileUpload/Del/${t}`).catch((t=>{console.log(t)}))}}}),d=p,f=n(1001),m=(0,f.Z)(d,a,i,!1,null,null,null),u=m.exports},18397:function(t,e){e["Z"]='<template>\n  <div class="MonHocToan">\n    <raw-loader\n      :mytxt="require(\'!raw-loader!./UploadBasic4.vue\').default"\n    ></raw-loader>\n    <h1>Upload file page</h1>\n    <a href="https://www.itsolutionstuff.com/post/file-upload-using-vue-js-axios-phpexample.html" target="_blank">\n      https://www.itsolutionstuff.com/post/file-upload-using-vue-js-axios-phpexample.html\n    </a>\n    <b-row class="mt-2 border-bottom mb-3">\n      <b-col md="1" v-for="x in ds" :key="x">\n        <div class="border mb-2 position-relative bg-dark text-light" style="height:50px;">\n          <img\n            width="100%"\n            height="50px"\n            :src="`/api/FileUpload/GetImage/${x}`"\n            alt="Image 1"\n          />\n          <span class="position-absolute" style="right:1px;">one</span>\n          <span class="position-absolute" style="bottom:1px;right:1px;">\n            <button @click="onDel(x)">Del</button>\n          </span>\n          <span class="position-absolute" style="bottom:1px;left:1px;">\n          </span>\n          <span class="position-absolute" style="top:1px;left:1px;">four</span>\n        </div>\n      </b-col>\n    </b-row>\n\n    <div class="row">\n      <div class="col-sm-4 border-right">\n        <div>{{listInfo}}</div>\n        <form enctype="multipart/form-data" @submit.stop.prevent="onUpload">\n          <img id="output" ref="output" width="200" height="110" class="mb-1" />\n          <input type="file" id="file" ref="file" class="m-1" @change="onFileChange" /><br>\n          <div v-if=" files!=null && files.length> 0 " >\n            <button type="submit" class="mr-1">Upload</button>\n            <button @click="onRemove" class="mr-1">Remove</button>\n          </div>\n        </form>\n      </div>\n\n      <div class="col-sm-6 border-right bg-primary" >\n        <ul>\n          <li v-for="x in ds" :key="x">\n            {{ x }}\n            <button @click="onView(x)">View img</button>\n          </li>\n        </ul>\n      </div>\n      <div class="col-sm-2">\n        <div>{{ds[0]}}</div>        \n        <b-img thumbnail :src="src" alt="Image 1"></b-img>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport $ from "jquery";\nimport axios from "axios";\nimport moment from "moment";\nexport default {\n  name: "Tpl",\n  components: {},\n  data() {\n    return {\n      files:null,\n      listInfo:[],\n      ds: [],\n      src: "",\n    };\n  },\n  mounted() {\n    let that = this;\n    this.getListImg().then((res) => {\n      this.ds = res.data;\n    });\n  },\n  methods: {\n    getListInfo(files){\n      let ar=[];\n      for(var i=0;i<files.length;i++){\n        let info={\n          name:files[i].name,\n          lastModified:files[i].lastModified,\n          size:files[i].size,\n          type:files[i].type\n        }\n        ar.push(info);\n      }\n      return ar;\n    },\n    onFileChange(){\n      var supportedFormats = [\'image/jpg\',\'image/gif\',\'image/png\',\'image/jpeg\'];\n      let files=this.$refs.file.files;\n      let index=supportedFormats.findIndex( x => x==files[0].type );\n      if(index >= 0){\n        alert(\'file hợp lệ\');\n      }else{\n        alert(\'file khong hop le\');\n      }\n      this.files=this.$refs.file.files;\n      this.listInfo=this.getListInfo(this.$refs.file.files);\n      this.getReadAsDataURL(this.files[0]).then((res) => {\n        $(this.$refs.output).attr("src", res);\n      });\n    },      \n    onDel(x){\n      this.Del(x).then(res=>{\n        this.loadListImg();\n      })\n    },\n    onView(x) {\n      this.ReadImage(x).then((res) => {\n        this.src = `data:image/jpg;base64,${res.data}`;\n      });\n    },\n    getReadAsDataURL(file) {\n      return new Promise((resolve, reject) => {\n        let reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result);\n        };\n        reader.onerror = reject;\n        reader.readAsDataURL(file);\n      });\n    },\n    onRemove(e){\n      e.preventDefault();\n      $(this.$refs.file).val("");\n      this.files=null;\n      $(this.$refs.output).attr(\'src\',\'\');\n    },\n    onUpload() {\n      if (window.FormData !== undefined) {\n        var fileUpload = $("#file").get(0); //$("#FileUpload1").get(0).files\n        var files = fileUpload.files;\n        if(files.length==0){\n          alert(\'thieu file\');\n          return;\n        }\n        var formData = new FormData();\n        formData.append("myfile", files[0]);//<--- Phải trùng với tham số api\n        formData.append("ten","thuc 101");//<--- Phải trùng với tham số api\n        let that = this;\n        $.ajax({\n          url: "/api/FileUpload/Upload4", ///Home/UploadFiles\n          type: "POST",\n          contentType: false, // Not to set any content header\n          processData: false, // Not to process data\n          data: formData,\n          success: function (result) {\n            that.loadListImg();\n            that.files=null;\n            $("#output").attr("src", \'\');\n          },\n          error: function (err) {\n            alert(err.statusText);\n          },\n        });\n      } else {\n        alert("FormData is not supported.");\n      }\n    },\n    loadListImg() {\n      this.getListImg().then((res) => {\n        this.ds = res.data;\n      });\n    },\n    async getListImg() {\n      return await axios.get(`/api/FileUpload/GetListFile`).catch((err) => {\n        console.log(err);\n      });\n    },\n    async ReadImage(fileName) {\n      return await axios\n        .get(`/api/FileUpload/ReadImage/${fileName}`)\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    async GetImage(fileName) {//asDataUrl\n      return await axios\n        .get(`/api/FileUpload/GetImage/${fileName}`)\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    async ReadImage(fileName) {//asByte\n      return await axios\n        .get(`/api/FileUpload/ReadImage/${fileName}`)\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    async Del(fileName) {\n      return await axios\n        .get(`/api/FileUpload/Del/${fileName}`)\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n};\n<\/script>\n'}}]);
//# sourceMappingURL=3521.b12f89e2.js.map