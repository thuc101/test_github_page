"use strict";(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[3838],{3838:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("raw-loader",{attrs:{mytxt:r(63790).Z}}),n("h5",[e._v("This is BTable Simple")]),n("div",[e._v(e._s(e.sel))]),n("button",{on:{click:e.OnAdd}},[e._v("Add")]),n("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.onSave.apply(null,arguments)}}},[n("b-table",{ref:"mytable",attrs:{small:"",items:e.myProvider,fields:e.fields},scopedSlots:e._u([{key:"cell()",fn:function(t){var r=t.value,i=t.item,s=t.field.key;return[e.sel[e.pri]!=i[e.pri]?[0!=i[e.pri]?[s==e.pri?[e._v(" "+e._s(r)+" ")]:e._e(),"TenHocSinh"==s?[e._v(" "+e._s(r)+" ")]:e._e(),"NamSinh"==s?[e._v(" "+e._s(r)+" ")]:e._e(),"LopHocId"==s?[e._v(" "+e._s(r)+" ")]:e._e()]:e._e()]:e._e(),e.sel[e.pri]==i[e.pri]||0==i[e.pri]?[s==e.pri?[n("span",[e._v(e._s(r))])]:e._e(),"TenHocSinh"==s?[n("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"ko-hop-le":e.errors.has(s)},attrs:{autocomplete:"off",name:s,placeholder:""},model:{value:i[s],callback:function(t){e.$set(i,s,t)},expression:"item[key]"}})]:e._e(),"NamSinh"==s?[n("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"ko-hop-le":e.errors.has(s)},attrs:{autocomplete:"off",name:s,placeholder:""},model:{value:i[s],callback:function(t){e.$set(i,s,t)},expression:"item[key]"}})]:e._e(),"LopHocId"==s?[n("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"ko-hop-le":e.errors.has(s)},attrs:{autocomplete:"off",name:s,placeholder:""},model:{value:i[s],callback:function(t){e.$set(i,s,t)},expression:"item[key]"}})]:e._e()]:e._e()]}},{key:"cell(cmd)",fn:function(t){return[0==t.item[e.pri]?[n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnSave(t.item)}}},[n("b-icon-hand-thumbs-up")],1),n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnCancel(t.item)}}},[n("b-icon-file-x")],1)]:[e.sel[e.pri]!=t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnEdit(t.item)}}},[n("b-icon-pencil-square")],1):e._e(),e.sel[e.pri]!=t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnDel(t.item)}}},[n("b-icon-trash")],1):e._e(),e.sel[e.pri]==t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnSave(t.item)}}},[n("b-icon-hand-thumbs-up")],1):e._e(),e.sel[e.pri]==t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnCancel(t.item)}}},[n("b-icon-file-x")],1):e._e()]]}}])})],1)],1)},i=[],s=r(12954),a=r(20144),l=r(19938),o=r.n(l),d=r(53009),m=r(70790);a["default"].use(s.ZP,{classes:!0,fieldsBagName:"veeFields"}),a["default"].component("v-select",o());var h={props:["ds1"],components:{},mounted(){},data(){return{pri:"Id",sel:{},adding:!1,url:"/api/HocSinh4",items:[{Id:1,Ten:"thuc 101"},{Id:2,Ten:"thuc 102"},{Id:3,Ten:"thuc 103"},{Id:4,Ten:"thuc 104"}],fields:[{key:"Id",sortable:!0,thClass:"text-center",tdClass:"align-middle",thStyle:{width:"8%"}},{key:"TenHocSinh",sortable:!0,thClass:"text-left",tdClass:"align-middle",thStyle:{width:"50%"}},{key:"NamSinh",sortable:!0,thClass:"text-left",tdClass:"align-middle",thStyle:{width:"20%"}},{key:"LopHocId",sortable:!0,thClass:"text-left",tdClass:"align-middle",thStyle:{width:"10%"}},{key:"Cmd",sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"12%"}}]}},mounted(){},methods:{myProvider(){let e=`${this.url}/GetAll`;return m.Z.get(e).then((e=>{if(1==this.adding){let t={};t[this.pri]=0,t["TenHocSinh"]="thuc",t["NamSinh"]=new Date,t["LopHocId"]=1,e.data.list.unshift(t)}return e.data.list}))},OnAdd(){this.adding=!0,this.$refs.mytable.refresh()},doCancel(e){for(let t in e)e[t]!=this.sel[t]&&(e[t]=this.sel[t])},OnCancel(e){if(0==e[this.pri]){let t=this.items.findIndex((t=>t[this.pri]==e[this.pri]));this.items.splice(t,1),this.adding=!1,this.$refs.mytable.refresh()}else this.doCancel(e),this.sel={}},OnEdit(e){this.sel=JSON.parse(JSON.stringify(e))},OnDel(e){this.Del(e[this.pri])},OnSave(e){this.$validator.validateAll().then((t=>{if(!t)return void this.toast("Không hợp lệ");let r=JSON.parse(JSON.stringify(e));0==r[this.pri]?this.Add(r):this.Update(r)}))},toast(e,t=null){this.$bvToast.toast(e,{title:"Information",variant:t,solid:!0})},async Add(e){return await m.Z.post(`${this.url}/Add`,e).then((e=>{this.toast(`${e.data.msg}`),this.adding=!1,this.$refs.mytable.refresh()})).catch((e=>{d.Z.XuLyErr(e)}))},async Update(e){return await m.Z.post(`${this.url}/Update`,e).then((e=>{alert(JSON.stringify(e)),this.sel={},this.$refs.mytable.refresh()})).catch((e=>{d.Z.XuLyErr(e)}))},async Del(e){return await m.Z.get(`${this.url}/Delete?id=${e}`).then((e=>{this.$refs.mytable.refresh()})).catch((e=>{d.Z.XuLyErr(e)}))},async getById(e){return await m.Z.get(`${this.url}/GetById?id=${e}`).then((e=>{alert(JSON.stringify(e))})).catch((e=>{d.Z.XuLyErr(e)}))}}},u=h,c=r(1001),p=(0,c.Z)(u,n,i,!1,null,null,null),f=p.exports},63790:function(e,t){t["Z"]='<template>\r\n    <div>\r\n        <raw-loader :mytxt="require(\'!raw-loader!./HocSinhTblEditNoPaging.vue\').default"></raw-loader>\r\n        <h5>This is BTable Simple</h5>\r\n        <div>{{ sel }}</div>\r\n        <button @click="OnAdd">Add</button>\r\n        <form @submit.stop.prevent="onSave">\r\n            <b-table ref="mytable" small :items="myProvider" :fields="fields">\r\n                <template v-slot:cell()="{ value, item, field: { key } }">\r\n\r\n                    <template v-if="sel[pri] != item[pri]">\r\n                        <template v-if="item[pri] != 0">\r\n                            <template v-if="key == pri">\r\n                                {{ value }}\r\n                            </template>\r\n                            <template v-if="key == \'TenHocSinh\'">\r\n                                {{ value }}\r\n                            </template>\r\n                            <template v-if="key == \'NamSinh\'">\r\n                                {{ value }}\r\n                            </template>\r\n                            <template v-if="key == \'LopHocId\'">\r\n                                {{ value }}\r\n                            </template>\r\n\r\n\r\n                        </template>\r\n                    </template>\r\n                    <template v-if="(sel[pri] == item[pri] || item[pri] == 0)">\r\n                        <template v-if="key == pri">\r\n                            <span>{{ value }}</span>\r\n                        </template>\r\n                        <template v-if="key == \'TenHocSinh\'">\r\n                            <b-form-input autocomplete="off" v-model="item[key]" :name="key" v-validate="\'required\'"\r\n                                placeholder="" :class="{ \'ko-hop-le\': errors.has(key) }">\r\n                            </b-form-input>\r\n                        </template>\r\n                        <template v-if="key == \'NamSinh\'">\r\n                            <b-form-input autocomplete="off" v-model="item[key]" :name="key" v-validate="\'required\'"\r\n                                placeholder="" :class="{ \'ko-hop-le\': errors.has(key) }">\r\n                            </b-form-input>\r\n                        </template>\r\n                        <template v-if="key == \'LopHocId\'">\r\n                            <b-form-input autocomplete="off" v-model="item[key]" :name="key" v-validate="\'required\'"\r\n                                placeholder="" :class="{ \'ko-hop-le\': errors.has(key) }">\r\n                            </b-form-input>\r\n                        </template>\r\n                    </template>\r\n                </template>\r\n                <template #cell(cmd)="row">\r\n                    <template v-if="row.item[pri] == 0">\r\n                        <b-button variant="outline" class="mr-1" size="sm" @click="OnSave(row.item)">\r\n                            <b-icon-hand-thumbs-up></b-icon-hand-thumbs-up>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" size="sm" @click="OnCancel(row.item)">\r\n                            <b-icon-file-x></b-icon-file-x>\r\n                        </b-button>\r\n                    </template>\r\n\r\n                    <template v-else>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] != row.item[pri]" size="sm"\r\n                            @click="OnEdit(row.item)">\r\n                            <b-icon-pencil-square></b-icon-pencil-square>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] != row.item[pri]" size="sm"\r\n                            @click="OnDel(row.item)">\r\n                            <b-icon-trash></b-icon-trash>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] == row.item[pri]" size="sm"\r\n                            @click="OnSave(row.item)">\r\n                            <b-icon-hand-thumbs-up></b-icon-hand-thumbs-up>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] == row.item[pri]" size="sm"\r\n                            @click="OnCancel(row.item)">\r\n                            <b-icon-file-x></b-icon-file-x>\r\n                        </b-button>\r\n                    </template>\r\n                </template>\r\n            </b-table>\r\n        </form>\r\n    </div>\r\n</template>\r\n<script>\r\n\r\nimport VeeValidate from "vee-validate";\r\nimport Vue from "vue";\r\nVue.use(VeeValidate, {\r\n    classes: true,\r\n    fieldsBagName: \'veeFields\'\r\n});\r\nimport vSelect from "vue-select";\r\nVue.component("v-select", vSelect);\r\n\r\n\r\nimport TumLum from \'@/TumLum\';\r\nimport fetchClient from \'@/fetchClient\';\r\n\r\n\r\nexport default {\r\n    props: ["ds1"],\r\n    components: {\r\n    },\r\n    mounted() {\r\n    },\r\n    data() {\r\n        return {\r\n            pri: "Id",\r\n            sel: {},\r\n            adding: false,\r\n            url: `/api/HocSinh4`,\r\n            items: [\r\n                { Id: 1, Ten: "thuc 101" },\r\n                { Id: 2, Ten: "thuc 102" },\r\n                { Id: 3, Ten: "thuc 103" },\r\n                { Id: 4, Ten: "thuc 104" },\r\n            ],\r\n            fields: [\r\n                { key: \'Id\', sortable: true, thClass: \'text-center\', tdClass: \'align-middle\', thStyle: { width: "8%" } },\r\n                //{ key: \'ClaimType\', sortable: true, thClass: \'text-left\', tdClass: \'align-middle\', thStyle: { width: "80%" } },\r\n                { key: \'TenHocSinh\', sortable: true, thClass: \'text-left\', tdClass: \'align-middle\', thStyle: { width: "50%" } },\r\n                { key: \'NamSinh\', sortable: true, thClass: \'text-left\', tdClass: \'align-middle\', thStyle: { width: "20%" } },\r\n                { key: \'LopHocId\', sortable: true, thClass: \'text-left\', tdClass: \'align-middle\', thStyle: { width: "10%" } },\r\n                { key: \'Cmd\', sortable: true, thClass: \'text-center\', tdClass: \'align-middle text-center\', thStyle: { width: "12%" } },\r\n            ]\r\n        }\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n        myProvider() {\r\n            let vm = this;\r\n            let url = `${this.url}/GetAll`;\r\n            return fetchClient.get(url)\r\n                .then(res => {\r\n\r\n                    if (this.adding == true) {\r\n                        let r = {};\r\n                        r[this.pri] = 0;\r\n                        r["TenHocSinh"] = "thuc";\r\n                        r["NamSinh"] = new Date();\r\n                        r["LopHocId"] = 1;\r\n                        res.data.list.unshift(r);\r\n                    }\r\n                    return res.data.list;\r\n                })\r\n        },\r\n        OnAdd() {\r\n            this.adding = true;\r\n            this.$refs.mytable.refresh();\r\n        },\r\n        doCancel(item) {\r\n            for (let key in item) {\r\n                if (item[key] != this.sel[key]) {\r\n                    item[key] = this.sel[key]\r\n                }\r\n            }\r\n        },\r\n        OnCancel(item) {\r\n            if (item[this.pri] == 0) {\r\n                let index = this.items.findIndex(x => x[this.pri] == item[this.pri]);\r\n                this.items.splice(index, 1);\r\n                this.adding = false;\r\n                this.$refs.mytable.refresh();\r\n            } else {\r\n                this.doCancel(item);\r\n                this.sel = {};\r\n            }\r\n        },\r\n        OnEdit(item) {\r\n            this.sel = JSON.parse(JSON.stringify(item));\r\n        },\r\n        OnDel(item) {\r\n            this.Del(item[this.pri]);\r\n        },\r\n        OnSave(item) {\r\n            this.$validator.validateAll().then((result) => {\r\n                if (!result) {\r\n                    this.toast("Không hợp lệ");\r\n                    return;\r\n                }\r\n                let r = JSON.parse(JSON.stringify(item));\r\n                if (r[this.pri] == 0) {\r\n                    this.Add(r);\r\n                } else {\r\n                    this.Update(r);\r\n                }\r\n            });\r\n        },\r\n        toast(msg, variant = null) {\r\n            this.$bvToast.toast(msg, {\r\n                title: `Information`,\r\n                variant: variant,\r\n                solid: true,\r\n            });\r\n        },\r\n        async Add(r) {\r\n            return await fetchClient.post(`${this.url}/Add`, r)\r\n                .then(res => {\r\n                    this.toast(`${res.data.msg}`);\r\n                    this.adding = false;\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async Update(r) {\r\n            return await fetchClient.post(`${this.url}/Update`, r)\r\n                .then(res => {\r\n                    alert(JSON.stringify(res));\r\n                    this.sel = {};\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async Del(id) {\r\n            return await fetchClient.get(`${this.url}/Delete?id=${id}`)\r\n                .then(res => {\r\n                    this.$refs.mytable.refresh();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n        async getById(id) {\r\n            return await fetchClient.get(`${this.url}/GetById?id=${id}`)\r\n                .then(res => {\r\n                    alert(JSON.stringify(res));\r\n\r\n                    //this.sel=res.data\r\n                    //alert(JSON.stringify(res));\r\n\r\n                    //{"data":{"Id":1003,"TenHocSinh":"Võ Tòng","NamSinh":"2023-02-26T00:00:00","LopHocId":1029},"statu\r\n                    //this.sel = JSON.parse(JSON.stringify(item));\r\n\r\n                    // this.sel2 = res.data;\r\n                    // this.showModal();\r\n                })\r\n                .catch((err) => {\r\n                    TumLum.XuLyErr(err);\r\n                });\r\n        },\r\n\r\n\r\n\r\n    }\r\n}\r\n<\/script>\r\n  '},53009:function(e,t){t["Z"]={XuLyErr(e){let t=JSON.parse(JSON.stringify(e)).status;if(400==t){let t=JSON.parse(JSON.stringify(e.response)).data.message;alert(t)}else e.response?401==e.response.status?alert("Chưa đăng nhập hoặc token hết hạn"):403==e.response.status&&alert("Bạn ko có quyền"):e.request?alert(JSON.stringify(e.request)):e.message&&alert(JSON.stringify(e.message))}}},70790:function(e,t,r){var n=r(9669),i=r.n(n);const s=()=>{const e={baseURL:"",method:"get",headers:{"Content-Type":"application/json;charset=utf-8"}};let t=i().create(e);return t.interceptors.request.use((function(e){const t=localStorage.getItem("token");return e.headers.Authorization=t?`Bearer ${t}`:"",e})),t};t["Z"]=s()}}]);
//# sourceMappingURL=3838.0b9cec62.js.map