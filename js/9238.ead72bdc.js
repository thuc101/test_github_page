"use strict";(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[9238],{69238:function(e,r,s){s.r(r),s.d(r,{default:function(){return P}});var t=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"home"},[t("raw-loader",{attrs:{mytxt:s(60149).Z}}),t("h1",[e._v("Permission")]),t("b-row",[t("b-col",{attrs:{md:"12"}}),t("b-col",{attrs:{md:"5"}},[t("b-img",{attrs:{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQFOXi_UoyjzyFmWtvs9YWYkpG0WThjeziAhg&usqp=CAU",fluid:"",alt:"Fluid image"}}),t("div",{staticClass:"border"},[t("PermissionClaimUserCom")],1)],1),t("b-col",{attrs:{md:"7"}},[t("div",e._l(e.roles,(function(r){return t("div",{key:r.Id},[t("h4",[e._v(e._s(r.Role))]),t("PermissionCom",{attrs:{RoleId:r.Id}})],1)})),0)])],1)],1)},n=[],i=s(70790),o=s(53009),a=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"ml-2 mb-2 border p-2"},[s("b-row",e._l(e.ds,(function(r,t,n){return s("b-col",{key:n,attrs:{lg:"3"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.ds[t],expression:"ds[k]"}],attrs:{disabled:"",type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.ds[t])?e._i(e.ds[t],null)>-1:e.ds[t]},on:{click:function(r){return e.onclick()},change:function(r){var s=e.ds[t],n=r.target,i=!!n.checked;if(Array.isArray(s)){var o=null,a=e._i(s,o);n.checked?a<0&&e.$set(e.ds,t,s.concat([o])):a>-1&&e.$set(e.ds,t,s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.ds,t,i)}}}),e._v(" "+e._s(t)+" ")])})),1)],1)},l=[],m={props:["RoleId"],components:{},data(){return{ds:[]}},mounted(){this.GetPermissionByRoleId(this.RoleId)},methods:{onclick(){alert("hello")},async GetPermissionByRoleId(e){return await i.Z.get(`/api/Permission/GetPermissionByRoleId?RoleId=${e}`).then((e=>{this.ds=e.data})).catch((e=>{o.Z.XuLyErr(e)}))}}},u=m,c=s(1001),d=(0,c.Z)(u,a,l,!1,null,null,null),h=d.exports,p=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"home"},[s("h4",{staticClass:"border-bottom p-1"},[e._v("Claim User")]),s("ul",e._l(e.ds2,(function(r){return s("li",{key:r},[e._v(" "+e._s(r.ClaimValue)+" "),e._l(r.List,(function(r){return s("b-badge",{key:r,attrs:{variant:"primary"}},[e._v(e._s(r))])}))],2)})),0)])},C=[],g={components:{},data(){return{ds:[],users:[],ds2:[]}},mounted(){this.ClaimUser_GetAll()},methods:{async ClaimUser_GetAll(){return await i.Z.get("/api/NguoiDung5/ClaimUser_GetAll").then((e=>{this.ds=e.data,this.GetUserCombo()})).catch((e=>{o.Z.XuLyErr(e)}))},async GetUserCombo(){return await i.Z.get("/api/NguoiDung5/GetComboNguoiDung").then((e=>{this.users=e.data,this.ds.forEach((e=>{let r=e.ClaimValue,s=e.List,t=[];s.forEach((e=>{let r=this.users.findIndex((r=>r.id==e));r>=0&&t.push(this.users[r].label)})),this.ds2.push({ClaimValue:r,List:t})}))})).catch((e=>{o.Z.XuLyErr(e)}))}}},f=g,y=(0,c.Z)(f,p,C,!1,null,null,null),v=y.exports,b={components:{PermissionCom:h,PermissionClaimUserCom:v},data(){return{res:[],roleClaims:[],userRoles:[],roles:[]}},mounted(){this.GetAllRole()},methods:{getRoleClaimByRole(e){let r=[];return this.roleClaims.forEach((s=>{s.Role==e&&r.push(s)})),r},async GetPermission(){return await i.Z.get("/api/NguoiDung5/GetPermission").then((e=>{this.res=e,this.roleClaims=e.data.roleClaims,this.userRoles=e.data.userRoles})).catch((e=>{o.Z.XuLyErr(e)}))},async GetAllRole(){return await i.Z.get("/api/Permission/GetAllRole").then((e=>{this.roles=e.data})).catch((e=>{o.Z.XuLyErr(e)}))}}},R=b,_=(0,c.Z)(R,t,n,!1,null,null,null),P=_.exports},60149:function(e,r){r["Z"]='<template>\r\n  <div class="home">\r\n    <raw-loader :mytxt="require(\'!raw-loader!./Permission.vue\').default"></raw-loader>\r\n    <h1>Permission</h1>\r\n    <b-row>\r\n      <b-col md="12">\r\n      </b-col>\r\n      <b-col md="5">\r\n        <b-img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQFOXi_UoyjzyFmWtvs9YWYkpG0WThjeziAhg&usqp=CAU"\r\n          fluid alt="Fluid image"></b-img>\r\n        <div class="border">\r\n          <PermissionClaimUserCom></PermissionClaimUserCom>\r\n        </div>  \r\n      </b-col>\r\n      <b-col md="7">\r\n\r\n        <div>\r\n          <div v-for="x in roles" :key="x.Id">\r\n            <h4>{{ x.Role }}</h4>\r\n            \x3c!-- { "Id": 1, "Role": "Admin", "CapDo": 9 } --\x3e\r\n            <PermissionCom :RoleId="x.Id"></PermissionCom>\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </b-col>\r\n    </b-row>\r\n  </div>\r\n</template>\r\n<script>\r\nimport fetchClient from \'@/fetchClient\'\r\nimport TumLum from \'@/TumLum\'\r\nimport PermissionCom from "@/views/NguoiDung2/PermissionCom.vue"\r\nimport PermissionClaimUserCom from "@/views/NguoiDung2/PermissionClaimUserCom.vue"\r\nexport default {\r\n  components: {\r\n    PermissionCom,\r\n    PermissionClaimUserCom\r\n  },\r\n  data() {\r\n    return {\r\n      res: [],\r\n      roleClaims: [],\r\n      userRoles: [],\r\n\r\n\r\n\r\n      roles: [],\r\n    }\r\n  },\r\n  mounted() {\r\n    this.GetAllRole();\r\n  },\r\n  methods: {\r\n    getRoleClaimByRole(Role) {\r\n      let ar = [];\r\n      this.roleClaims.forEach(x => {\r\n        if (x.Role == Role) {\r\n          ar.push(x);\r\n        }\r\n      })\r\n      return ar;\r\n    },\r\n    async GetPermission() {\r\n      return await fetchClient.get(`/api/NguoiDung5/GetPermission`).then(res => {\r\n        this.res = res;\r\n        this.roleClaims = res.data.roleClaims;\r\n        this.userRoles = res.data.userRoles;\r\n      }).catch(err => {\r\n        TumLum.XuLyErr(err);\r\n      })\r\n    },\r\n    async GetAllRole() {\r\n      return await fetchClient.get(`/api/Permission/GetAllRole`).then(res => {\r\n        //alert(JSON.stringify(res));\r\n        //{"data":[{"Id":1,"Role":"Admin","CapDo":9},{"Id":2,"Role":"User","CapDo":1},{"Id":3,"Role":"NhanVien","CapDo":2},{"Id":4," \r\n        this.roles = res.data;\r\n      }).catch(err => {\r\n        TumLum.XuLyErr(err);\r\n      })\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n<style>\r\n.large-font {\r\n  font-size: 11px;\r\n}\r\n</style>\r\n  '},53009:function(e,r){r["Z"]={XuLyErr(e){let r=JSON.parse(JSON.stringify(e)).status;if(400==r){let r=JSON.parse(JSON.stringify(e.response)).data.message;alert(r)}else e.response?401==e.response.status?alert("Chưa đăng nhập hoặc token hết hạn"):403==e.response.status&&alert("Bạn ko có quyền"):e.request?alert(JSON.stringify(e.request)):e.message&&alert(JSON.stringify(e.message))}}},70790:function(e,r,s){var t=s(9669),n=s.n(t);const i=()=>{const e={baseURL:"",method:"get",headers:{"Content-Type":"application/json;charset=utf-8"}};let r=n().create(e);return r.interceptors.request.use((function(e){const r=localStorage.getItem("token");return e.headers.Authorization=r?`Bearer ${r}`:"",e})),r};r["Z"]=i()}}]);
//# sourceMappingURL=9238.ead72bdc.js.map