(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[7708],{27708:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("raw-loader",{attrs:{mytxt:n(76157).Z}}),e._v(" "+e._s(e.msg)),r("br"),e._v(" sel : "+e._s(e.sel)),r("br"),e._v(" valid : "+e._s(e.valid)),r("br"),e._v(" "+e._s(e.tableData)+" "),r("div",{staticClass:"mb-1"},[r("button",{staticClass:"mr-1",on:{click:e.onAdd}},[e._v("Add")])]),r("div",{ref:"table"}),r("b-modal",{ref:"my-modal2",attrs:{id:"modal-1",size:"sm","no-close-on-backdrop":!0,"hide-footer":"",title:"BootstrapVue"}},[r("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.onSaveModal.apply(null,arguments)}}},[r("div",[r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-4 col-form-label"},[e._v("Id")]),r("div",{staticClass:"col-sm-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.r.id,expression:"r.id"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:e.r.id},on:{input:function(t){t.target.composing||e.$set(e.r,"id",t.target.value)}}})])]),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-4 col-form-label"},[e._v(" Name ")]),r("div",{staticClass:"col-sm-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.r.name,expression:"r.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"ko-hop-le":e.errors.has("name")},attrs:{type:"text",name:"name",autocomplete:"off"},domProps:{value:e.r.name},on:{input:function(t){t.target.composing||e.$set(e.r,"name",t.target.value)}}})])]),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-4 col-form-label"},[e._v(" Ngay ")]),r("div",{staticClass:"col-sm-8"},[r("b-form-datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mb-2",attrs:{name:"ngay","date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:"vi"},model:{value:e.r.ngay,callback:function(t){e.$set(e.r,"ngay",t)},expression:"r.ngay"}})],1)]),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-4 col-form-label"},[e._v(" Act ")]),r("div",{staticClass:"col-sm-8"},[r("b-form-checkbox",{attrs:{name:"checkbox-1",value:"true","unchecked-value":"false"},on:{change:e.ChangeAct},model:{value:e.r.act,callback:function(t){e.$set(e.r,"act",t)},expression:"r.act"}},[e._v(" Active ")])],1)]),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-4 col-form-label"},[e._v(" Thành phố "+e._s(e.errors.has("tp"))+" ")]),r("div",{staticClass:"col-sm-8"},[r("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{danger:e.errors.has("tp")},attrs:{name:"tp",reduce:function(e){return e.id},options:e.tps,"has-error":e.errors.has("tp")},model:{value:e.r.tp,callback:function(t){e.$set(e.r,"tp",t)},expression:"r.tp"}})],1)]),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-4 col-form-label"},[e._v(" Quyền ")]),r("div",{staticClass:"col-sm-8"},[r("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{danger:e.errors.has("quyen")},attrs:{multiple:"",name:"quyen",options:["Admin","User","Editor"]},model:{value:e.r.quyen,callback:function(t){e.$set(e.r,"quyen",t)},expression:"r.quyen"}})],1)])]),r("div",{staticClass:"float-right"},[r("button",{staticClass:"btn btn-primary mr-1 btn-sm",attrs:{type:"submit"}},[e._v("Save")]),r("button",{staticClass:"btn btn-sm",attrs:{type:"button"},on:{click:function(t){return e.hideModal()}}},[e._v("Cancel")])])])])],1)},a=[],l=(n(68309),n(69826),n(41539),n(54747),n(21249),n(92222),n(34553),n(38862),n(40561),n(60911)),i=n(17529),o=n(12954),d=n(20144),s=n(19938),c=n.n(s),u=n(30381),m=n.n(u);d["default"].use(o.ZP,{classes:!0}),d["default"].component("v-select",c());var h={data:function(){return{tabulator:null,tableData:[],msg:"hello world",count:8,r:{id:0,ten:"thuc 101",ngay:new Date},tps:[{label:"Huế",id:"HUE"},{label:"Sài gòn",id:"SG"},{label:"Đà nẵng",id:"DN"},{label:"Quảng ngãi",id:"QN"}],sel:{},valid:"",mons:[{id:1,name:"Gạo"},{id:2,name:"Đường"},{id:3,name:"Muối"},{id:4,name:"Bột ngọt"},{id:5,name:"Nước ngọt"},{id:6,name:"Cà phê"},{id:7,name:"Bia"},{id:8,name:"Nước mía"}]}},mounted:function(){var e=this;document.getElementById("myScript")?this.onReady():i.Z.loadScript("myScript","/js/jquery.min.js").then((function(){i.Z.loadScript("","/js/bootstrap.js").then((function(){i.Z.loadScript("","/js/select2.min.js").then((function(){i.Z.loadScript("","/js/bootstrap-datepicker.js").then((function(){i.Z.loadScript("","/js/moment.js").then((function(){i.Z.loadCss("/css/select2.min.css").then((function(){i.Z.loadCss("/css/bootstrap-datepicker.css").then((function(){e.onReady()}))}))}))}))}))}))}))},methods:{onReady:function(){this.loadTabulator()},loadTabulator:function(){var e=this,t=function(e,t,n,r,a){var l=document.createElement("input");function i(){n(m()(l.value,"YYYY-MM-DD").format("DD/MM/YYYY"))}return l.setAttribute("type","date"),l.style.padding="3px",l.style.width="100%",l.style.boxSizing="border-box",l.value=m()(e.getValue(),"DD/MM/YYYY").format("YYYY-MM-DD"),t((function(){l.focus(),l.style.css="100%"})),l.addEventListener("change",i),l.addEventListener("blur",i),l},n=[{id:1,text:"thuc 1"},{id:2,text:"thuc 2"},{id:3,text:"thuc 3"},{id:4,text:"thuc 4"},{id:5,text:"thuc 5"}],r=function(e,t,r,a,l){var i=document.createElement("select");return t((function(){var e=$(i);e.select2({theme:"classic",placeholder:"Select",data:n,minimumResultsForSearch:1/0,width:300,minimumInputLength:0,allowClear:!0}),e.on("change",(function(t){r(e.val())})),e.on("blur",(function(e){a()}))})),i},a=[{key:"hue",name:"Huế"},{key:"sg",name:"Sài gòn"},{key:"hn",name:"Hà nội"}],i=function(e,t,n,r,a){for(var l=document.createElement("select"),i=0;i<a.length;i++){var o=document.createElement("option");o.value=a[i].key,o.innerHTML=a[i].name,l.appendChild(o)}function d(){console.log("successFunc"),n(l.value)}return l.style.padding="3px",l.style.width="100%",l.style.boxSizing="border-box",l.value=e.getValue(),t((function(){l.focus(),l.style.css="100%"})),l.addEventListener("change",d),l.addEventListener("blur",d),l},o=function(e,t,r,a,l){var i=document.createElement("select");return i.style.padding="3px",i.style.width="100%",i.style.boxSizing="border-box",t((function(){var e=$(i);e.select2({theme:"classic",data:n,width:100}),e.on("change",(function(t){console.log("success"),r(e.val())})),e.on("blur",(function(e){a()}))})),i},d=function(e,t,n){n((function(){var t=$(e.getElement()),n=$(e.getElement()).find("select");n.css({padding:"4px",width:"100%","box-sizing":"border-box","font-family":""}),n.select2({width:"100%"}),n.focus(),n.val(e.getValue()).trigger("change.select2"),$(e.getElement()).find("select").on("change",(function(){e.setValue($(this).val())})),t.find(".select2-container--default").css("border","0px solid blue"),t.find(".select2-selection--single").css("border","0px solid blue")}));var r=$("<select class='tabu' >");return t.forEach((function(e){var t=$("<option>").val(e.id).text(e.text);r.append(t)})),r[0]},s=function(t){var n=t.getRow();n.getIndex(),n.getElement();return e.sel.id==t.getRow().getData().id};this.tabulator=new l.Ae(this.$refs.table,{data:this.tableData,reactiveData:!0,height:$(window).innerHeight()-400,history:!0,pagination:"local",paginationSize:3,paginationCounter:"rows",paginationInitialPage:1,paginationSizeSelector:[5,10,20,30,50],rowFormatter:function(e){console.log($(e.getElement()).html())},columns:[{title:"STT",formatter:"rownum",headerHozAlign:"center",hozAlign:"center"},{title:"Cmd",headerHozAlign:"center",hozAlign:"center",headerSort:!1,width:100,formatter:function(t,n,r){r((function(){$(t.getElement()).find("#testedit").on("click",t,e.onTestEdit),$(t.getElement()).find("#save").on("click",t.getRow(),e.onSave),$(t.getElement()).find("#cancel").on("click",t.getRow(),e.onCancel),$(t.getElement()).find("#edit").on("click",t.getRow(),e.onEdit),$(t.getElement()).find("#del").on("click",t.getRow(),e.onDel)}));var a=$("<div>"),l=$("<button>",{text:"Save",class:"mr-1"}).attr("id","save").hide(),i=$("<button>",{text:"Cancel",class:"mr-1"}).attr("id","cancel").hide(),o=$("<button>",{text:"Edit",class:"mr-1"}).attr("id","edit"),d=$("<button>",{text:"Del",class:"mr-1"}).attr("id","del");return a.append(l),a.append(i),a.append(o),a.append(d),e.sel.id==t.getRow().getData().id?(l.show(),i.show(),o.hide(),d.hide()):1==$.isEmptyObject(e.sel)?(l.hide(),i.hide(),o.show()):(o.attr("disabled","disabled"),d.attr("disabled","disabled")),a[0]}},{title:"Id",field:"id",width:50,hozAlign:"center"},{title:"Name",field:"name",width:80,editor:"input",validator:["required"],editable:s},{title:"SoLg",field:"solg",width:50,editor:"input",validator:["required","integer"],hozAlign:"right",editable:s},{title:"DonGia",field:"dongia",width:50,editor:"input",validator:["required","integer"],hozAlign:"right",editable:s},{title:"Tien",field:"tien",width:50,editor:"input",validator:["required","integer"],hozAlign:"right",editable:s},{title:"Ngày",field:"ngay",sorter:"string",headerHozAlign:"center",hozAlign:"center",width:100,editor:t,validator:"required",editable:s},{title:"MonId",field:"monid",hozAlign:"center",width:100,editor:r,editorParams:[{value:"1",text:""},{value:"2",text:"Grammes"},{value:"3",text:"Kilogrammes"},{value:"4",text:"Livres"},{value:"5",text:"Milligrammes"},{value:"6",text:"Once"}],editable:s},{title:"Monid2",field:"monid",align:"center",width:100,editor:o,formatterParams:this.mons.map((function(e){return{id:e.id,text:"".concat(e.id," - ").concat(e.name)}})),editable:s},{title:"MonId3",field:"monid",headerHozAlign:"center",hozAlign:"left",width:100,formatter:d,formatterParams:this.mons.map((function(e){return{id:e.id,text:"".concat(e.id," - ").concat(e.name)}})),editable:s},{title:"MonId4",field:"monid",align:"center",width:100,formatter:function(e,t,r){r((function(){var t=$(e.getElement());t.select2({data:[{id:1,text:"thuc 101"},{id:2,text:"thuc 102"}],width:100,allowClear:!0}).on("change",(function(e){console.log("change")})),t.val(n[e.getValue()].id);var r=t.val();t.val(r).trigger("change.select2")}))},editable:s},{title:"Tp",field:"tp",width:100,headerHozAlign:"center",hozAlign:"center",editor:i,editorParams:a,formatter:function(e,t){for(var n=0;n<t.length;n++)if(t[n].key==e.getValue())return t[n].name},formatterParams:a,editable:s}]}),this.tabulator.on("dataLoaded",(function(t){e.onLoad()})),this.tabulator.on("pageLoaded",(function(e){})),this.tabulator.on("dataChanged",(function(e){})),this.tabulator.on("rowClick",(function(e,t){})),this.tabulator.on("rowSelectionChanged",(function(e,t){})),this.tabulator.on("rowSelected",(function(t){var n=t.getIndex();e.msg=n,console.log("rowSelected")})),this.tabulator.on("cellEditing",(function(e){var t=e.getRow();t.getData(),t.getIndex()})),this.tabulator.on("cellEditCancelled",(function(e){})),this.tabulator.on("cellEdited",(function(e){var t=e.getRow(),n=t.getData(),r=(t.getIndex(),n.solg),a=n.dongia,l=r*a;console.log(l)})),this.tabulator.on("validationFailed",(function(t,n,r){var a=t.getField();e.valid=a}))},onLoad:function(){var e=this,t=[{id:1,name:"thuc 101",solg:10,dongia:1e3,tien:1,ngay:"01/01/1968",monid:1,tp:"hue"},{id:2,name:"thuc 102",solg:1,dongia:2e3,tien:1,ngay:"01/01/1968",monid:1,tp:"hue"}];this.count=3,t.forEach((function(t){e.tableData.push(t)}))},ChangeAct:function(){var e="true"==this.r.act;this.r.act=e},onSave:function(e){if(""==this.valid){e.preventDefault();var t=e.data,n=(t.getCells(),t.getIndex()),r=this.tableData.findIndex((function(e){return e.id==n})),a=JSON.parse(JSON.stringify(this.tableData[r]));alert(JSON.stringify(a)),this.sel={},this.tabulator.redraw(!0)}else this.toast("không hợp lệ!!!")},onSaveModal:function(){var e=this;this.$validator.validateAll().then((function(t){if(t){var n=JSON.parse(JSON.stringify(e.r));0==n.id?(n.id=e.count,e.tabulatorAdd(n),e.count++,e.setPage(1)):e.tabulatorUpdate(n),e.hideModal()}else e.toast("Không hợp lệ")}))},onAdd:function(){var e={id:this.count,name:"thuc 101",solg:1,dongia:1e3};this.tabulatorAdd(e),this.count++,this.setPage(1)},onCancel:function(e){e.preventDefault();var t=e.data,n=(t.getCells(),t.getIndex()),r=(this.tableData.findIndex((function(e){return e.id==n})),JSON.parse(JSON.stringify(this.sel)));this.tabulatorUpdate(r),this.sel={},this.valid="";$(t.getElement());this.tabulator.redraw(!0)},onEdit:function(e){e.preventDefault();var t=e.data,n=(t.getCells(),t.getIndex());this.tableData.findIndex((function(e){return e.id==n}));this.sel=JSON.parse(JSON.stringify(t.getData()));$(t.getElement());this.tabulator.redraw(!0)},onDel:function(e){e.preventDefault();var t=e.data,n=t.getIndex();this.tabulatorDel(n)},getPageMax:function(){return this.tabulator.getPageMax()},getLastPage:function(e){var t=this.tabulator.getPageSize(),n=e%t;return 0==n?e/t:(e-n)/t+1},getPageSize:function(){return this.tabulator.getPageSize()},getPage:function(){return this.tabulator.getPage()},setPage:function(e){this.tabulator.setPage(e)},getData:function(){return this.tabulator.getData()},tabulatorAdd:function(e){this.tableData.unshift(e)},tabulatorDel:function(e){var t=this.tableData.findIndex((function(t){return t.id==e}));this.tableData.splice(t,1)},tabulatorUpdate:function(e){var t=this.tableData.findIndex((function(t){return t.id==e.id}));this.tableData.splice(t,1,e)},tabulatorGetRow:function(e){},toast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$bvToast.toast(e,{title:"Information",variant:t,solid:!0})},showModal:function(){this.$refs["my-modal2"].show()},hideModal:function(){this.$refs["my-modal2"].hide()}}},g=h,f=n(1001),b=(0,f.Z)(g,r,a,!1,null,null,null),v=b.exports},18533:function(e,t,n){"use strict";var r=n(42092).forEach,a=n(9341),l=a("forEach");e.exports=l?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},9341:function(e,t,n){"use strict";var r=n(47293);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},86135:function(e,t,n){"use strict";var r=n(34948),a=n(3070),l=n(79114);e.exports=function(e,t,n){var i=r(t);i in e?a.f(e,i,l(0,n)):e[i]=n}},92222:function(e,t,n){"use strict";var r=n(82109),a=n(17854),l=n(47293),i=n(43157),o=n(70111),d=n(47908),s=n(26244),c=n(86135),u=n(65417),m=n(81194),h=n(5112),g=n(7392),f=h("isConcatSpreadable"),b=9007199254740991,v="Maximum allowed index exceeded",p=a.TypeError,x=g>=51||!l((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),w=m("concat"),y=function(e){if(!o(e))return!1;var t=e[f];return void 0!==t?!!t:i(e)},$=!x||!w;r({target:"Array",proto:!0,arity:1,forced:$},{concat:function(e){var t,n,r,a,l,i=d(this),o=u(i,0),m=0;for(t=-1,r=arguments.length;t<r;t++)if(l=-1===t?i:arguments[t],y(l)){if(a=s(l),m+a>b)throw p(v);for(n=0;n<a;n++,m++)n in l&&c(o,m,l[n])}else{if(m>=b)throw p(v);c(o,m++,l)}return o.length=m,o}})},69826:function(e,t,n){"use strict";var r=n(82109),a=n(42092).find,l=n(51223),i="find",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),l(i)},21249:function(e,t,n){"use strict";var r=n(82109),a=n(42092).map,l=n(81194),i=l("map");r({target:"Array",proto:!0,forced:!i},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},40561:function(e,t,n){"use strict";var r=n(82109),a=n(17854),l=n(51400),i=n(19303),o=n(26244),d=n(47908),s=n(65417),c=n(86135),u=n(81194),m=u("splice"),h=a.TypeError,g=Math.max,f=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var n,r,a,u,m,p,x=d(this),w=o(x),y=l(e,w),$=arguments.length;if(0===$?n=r=0:1===$?(n=0,r=w-y):(n=$-2,r=f(g(i(t),0),w-y)),w+n-r>b)throw h(v);for(a=s(x,r),u=0;u<r;u++)m=y+u,m in x&&c(a,u,x[m]);if(a.length=r,n<r){for(u=y;u<w-r;u++)m=u+r,p=u+n,m in x?x[p]=x[m]:delete x[p];for(u=w;u>w-r+n;u--)delete x[u-1]}else if(n>r)for(u=w-r;u>y;u--)m=u+r-1,p=u+n-1,m in x?x[p]=x[m]:delete x[p];for(u=0;u<n;u++)x[u+y]=arguments[u+2];return x.length=w-r+n,a}})},54747:function(e,t,n){var r=n(17854),a=n(48324),l=n(98509),i=n(18533),o=n(68880),d=function(e){if(e&&e.forEach!==i)try{o(e,"forEach",i)}catch(t){e.forEach=i}};for(var s in a)a[s]&&d(r[s]&&r[s].prototype);d(l)},76157:function(e,t){"use strict";t["Z"]='<template>\r\n  <div>\r\n    <raw-loader :mytxt="require(\'!raw-loader!./VueTabulatorInline.vue\').default"></raw-loader>\r\n    {{ msg }}<br>\r\n    \x3c!-- {{myvalid}}<br> --\x3e\r\n    \x3c!-- rowedit : {{rowedit}}<br>   --\x3e\r\n    sel : {{ sel }}<br>\r\n    valid : {{ valid }}<br>\r\n    {{ tableData }}\r\n    <div class="mb-1">\r\n      <button class="mr-1" @click="onAdd">Add</button>\r\n      \x3c!-- <button class="mr-1" @click="testData" >Test data</button> --\x3e\r\n      \x3c!-- <button class="mr-1" @click="testEdit" >Test Edit</button> --\x3e\r\n    </div>\r\n    \x3c!-- {{tableData}} --\x3e\r\n    <div ref="table"></div>\r\n    <b-modal ref="my-modal2" id="modal-1" size="sm" :no-close-on-backdrop="true" hide-footer title="BootstrapVue">\r\n      <form @submit.stop.prevent="onSaveModal">\r\n        <div>\r\n          \x3c!-- <pre>{{r}}</pre> --\x3e\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">Id</label>\r\n            <div class="col-sm-8">\r\n              <input type="text" class="form-control" disabled v-model="r.id" />\r\n            </div>\r\n          </div>\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Name\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <input type="text" v-model="r.name" name="name" v-validate="\'required\'" :class="{\r\n                \'form-control\': true,\r\n                \'ko-hop-le\': errors.has(\'name\'),\r\n              }" autocomplete="off" />\r\n            </div>\r\n          </div>\r\n\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Ngay\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <b-form-datepicker v-model="r.ngay" name="ngay" v-validate="\'required\'"\r\n                :date-format-options="{ year: \'numeric\', month: \'numeric\', day: \'numeric\' }" locale="vi" class="mb-2">\r\n              </b-form-datepicker>\r\n            </div>\r\n          </div>\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Act\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <b-form-checkbox v-model="r.act" name="checkbox-1" value=true unchecked-value=false @change="ChangeAct">\r\n                Active\r\n              </b-form-checkbox>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Thành phố {{ errors.has(\'tp\') }}\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <v-select v-model="r.tp" name="tp" v-validate="\'required\'" :reduce="(option) => option.id" :options="tps"\r\n                :has-error="errors.has(\'tp\')" :class="{ danger: errors.has(\'tp\') }" />\r\n            </div>\r\n          </div>\r\n          <div class="form-group row">\r\n            <label class="col-sm-4 col-form-label">\r\n              Quyền\r\n            </label>\r\n            <div class="col-sm-8">\r\n              <v-select multiple name="quyen" v-model="r.quyen" :options="[\'Admin\', \'User\', \'Editor\']"\r\n                v-validate="\'required\'" :class="{ danger: errors.has(\'quyen\') }" />\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        <div class="float-right">\r\n          <button type="submit" class="btn btn-primary mr-1 btn-sm">Save</button>\r\n          <button type="button" class="btn btn-sm" @click="hideModal()">Cancel</button>\r\n        </div>\r\n      </form>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { TabulatorFull as Tabulator } from \'tabulator-tables\'; //import Tabulator library\r\n//import $ from "jquery"\r\nimport MyLoader from "@/func/MyLoad.js";\r\n\r\n\r\nimport VeeValidate from "vee-validate";\r\nimport Vue from "vue";\r\nVue.use(VeeValidate, {\r\n  classes: true,\r\n});\r\n\r\nimport vSelect from "vue-select";\r\nVue.component("v-select", vSelect);\r\nimport "vue-select/dist/vue-select.css";\r\nimport moment from \'moment\';\r\nexport default {\r\n  data: function () {\r\n    return {\r\n      tabulator: null, //variable to hold your table\r\n      tableData: [], //data for table to display\r\n      msg: "hello world",\r\n      count: 8,\r\n      r: {\r\n        id: 0,\r\n        ten: \'thuc 101\',\r\n        ngay: new Date\r\n      },\r\n      tps: [\r\n        { label: \'Huế\', id: \'HUE\' },\r\n        { label: \'Sài gòn\', id: \'SG\' },\r\n        { label: \'Đà nẵng\', id: \'DN\' },\r\n        { label: \'Quảng ngãi\', id: \'QN\' },\r\n      ],\r\n      sel: {},\r\n      valid: \'\',\r\n\r\n      mons: [\r\n        { id: 1, name: \'Gạo\' },\r\n        { id: 2, name: \'Đường\' },\r\n        { id: 3, name: \'Muối\' },\r\n        { id: 4, name: \'Bột ngọt\' },\r\n        { id: 5, name: \'Nước ngọt\' },\r\n        { id: 6, name: \'Cà phê\' },\r\n        { id: 7, name: \'Bia\' },\r\n        { id: 8, name: \'Nước mía\' }\r\n      ]\r\n\r\n\r\n    }\r\n  },\r\n  mounted() {\r\n\r\n\r\n    if (!document.getElementById("myScript")) {\r\n      MyLoader.loadScript("myScript", "/js/jquery.min.js").then(() => {\r\n        MyLoader.loadScript("", "/js/bootstrap.js").then(() => {\r\n          MyLoader.loadScript("", "/js/select2.min.js").then(() => {\r\n            MyLoader.loadScript("", "/js/bootstrap-datepicker.js").then(() => {\r\n              MyLoader.loadScript("", "/js/moment.js").then(() => {\r\n                MyLoader.loadCss("/css/select2.min.css").then(() => {\r\n                  MyLoader.loadCss("/css/bootstrap-datepicker.css").then(() => {\r\n                    this.onReady();\r\n                  })\r\n                })\r\n              })\r\n            })\r\n          })\r\n        })\r\n      })\r\n    } else {\r\n      this.onReady();\r\n    }\r\n  },\r\n  methods: {\r\n    onReady() {\r\n      this.loadTabulator();\r\n    },\r\n    loadTabulator() {\r\n\r\n      var that = this;\r\n\r\n\r\n      var dateEditor = function (cell, onRendered, success, cancel, editorParams) {\r\n        var editor = document.createElement("input");\r\n        editor.setAttribute("type", "date");\r\n        editor.style.padding = "3px";\r\n        editor.style.width = "100%";\r\n        editor.style.boxSizing = "border-box";\r\n        editor.value = moment(cell.getValue(), "DD/MM/YYYY").format("YYYY-MM-DD")\r\n        onRendered(function () {\r\n          editor.focus();\r\n          editor.style.css = "100%";\r\n        });\r\n        function successFunc() {\r\n          success(moment(editor.value, "YYYY-MM-DD").format("DD/MM/YYYY"));\r\n        }\r\n        editor.addEventListener("change", successFunc);\r\n        editor.addEventListener("blur", successFunc);\r\n        return editor;\r\n      };\r\n      //in your column definition for the column\r\n      //{title:"Birthday", field:"dob", editor:dateEditor}}\r\n\r\n      var editor_select = function (cell, onRendered, success, cancel, editorParams) {\r\n        var editor = $("<select><select/>");\r\n        var selectedLabel = cell.getValue();\r\n\r\n        function optionAppend(element, label, value, disabled) {\r\n          var option = $("<option></option>").attr("value", value).text(label);\r\n          element.append(option);\r\n        }\r\n        var key;\r\n        for (key in editorParams) {\r\n          var editorParam = editorParams[key];\r\n          if (typeof editorParam.value != "undefined") {\r\n            optionAppend(editor, editorParam.text, editorParam.value);\r\n          }\r\n        }\r\n\r\n        editor.css({\r\n          "padding": "4px",\r\n          "width": "100%",\r\n          "box-sizing": "border-box",\r\n          "height": "100%",\r\n        }).val(cell.getValue());\r\n\r\n        var selectedValue = "";\r\n        for (var key in editorParams) {\r\n          var editorParam = editorParams[key];\r\n          if (editorParam.text == selectedLabel) {\r\n            selectedValue = editorParam.value;\r\n          }\r\n        }\r\n\r\n        onRendered(function () {\r\n          editor.focus();\r\n          editor.val(selectedValue);\r\n        });\r\n\r\n\r\n        editor.on("change blur", function (e) {\r\n          var value = editor.val();\r\n          success(value);\r\n        });\r\n        editor.on("keydown", function (e) {\r\n          if (e.keyCode === 13) {\r\n            success(select.val());\r\n          }\r\n        });\r\n        //return the editor element\r\n        return editor;\r\n      };\r\n\r\n      var list = [\r\n        { id: 1, text: \'thuc 1\' },\r\n        { id: 2, text: \'thuc 2\' },\r\n        { id: 3, text: \'thuc 3\' },\r\n        { id: 4, text: \'thuc 4\' },\r\n        { id: 5, text: \'thuc 5\' }\r\n      ];\r\n      //create custom editor\r\n      var select2Editor = function (cell, onRendered, success, cancel, editorParams) {\r\n\r\n        //create input element to hold select\r\n        var editor = document.createElement("select");\r\n\r\n        onRendered(function () {\r\n          var select_2 = $(editor);\r\n\r\n\r\n          // $(".js-example-data-array").select2({\r\n          //   data: data\r\n          // })                  \r\n\r\n          select_2.select2({\r\n            theme: "classic",\r\n            placeholder: \'Select\',\r\n            data: list,\r\n            minimumResultsForSearch: Infinity,\r\n            width: 300,\r\n            minimumInputLength: 0,\r\n            allowClear: true,\r\n          });\r\n\r\n          select_2.on(\'change\', function (e) {\r\n            success(select_2.val());\r\n          });\r\n\r\n\r\n          select_2.on(\'blur\', function (e) {\r\n            cancel();\r\n          });\r\n        });\r\n\r\n\r\n        //add editor to cell\r\n        return editor;\r\n      }\r\n\r\n\r\n\r\n      var cboData = [\r\n        {\r\n          "key": "hue",\r\n          "name": "Huế"\r\n        },\r\n        {\r\n          "key": "sg",\r\n          "name": "Sài gòn"\r\n        },\r\n        {\r\n          "key": "hn",\r\n          "name": "Hà nội"\r\n        }\r\n      ];\r\n      var comboEditor = function (cell, onRendered, success, cancel, editorParams) {\r\n        var editor = document.createElement("select");\r\n        for (var i = 0; i < editorParams.length; i++) {\r\n          var opt = document.createElement(\'option\');\r\n          opt.value = editorParams[i].key;\r\n          opt.innerHTML = editorParams[i].name;\r\n          editor.appendChild(opt);\r\n        }\r\n\r\n        editor.style.padding = "3px";\r\n        editor.style.width = "100%";\r\n        editor.style.boxSizing = "border-box";\r\n\r\n        editor.value = cell.getValue();\r\n\r\n        onRendered(function () {\r\n          editor.focus();\r\n          editor.style.css = "100%";\r\n        });\r\n\r\n        function successFunc() {\r\n          console.log(\'successFunc\');\r\n          success(editor.value);\r\n        }\r\n\r\n        editor.addEventListener("change", successFunc);\r\n        editor.addEventListener("blur", successFunc);\r\n\r\n        return editor;\r\n      };\r\n\r\n\r\n      var select21Editor = function (cell, onRendered, success, cancel, editorParams) {\r\n        var editor = document.createElement("select");\r\n        editor.style.padding = "3px";\r\n        editor.style.width = "100%";\r\n        editor.style.boxSizing = "border-box";\r\n        onRendered(function () {\r\n          var select_2 = $(editor);\r\n          select_2.select2({\r\n            theme: "classic",\r\n            // placeholder: \'Select\',\r\n            data: list,\r\n            // minimumResultsForSearch: Infinity,\r\n            width: 100,\r\n            // minimumInputLength: 0,\r\n            // allowClear: true,\r\n          });\r\n\r\n          select_2.on(\'change\', function (e) {\r\n            console.log(\'success\');\r\n            success(select_2.val());\r\n          });\r\n\r\n\r\n          select_2.on(\'blur\', function (e) {\r\n            cancel();\r\n          });\r\n        });\r\n        return editor;\r\n      };\r\n      //{title: "Select2", field: "lucky_no", align: "center", width: 300, editor: select2Editor},          \r\n\r\n\r\n\r\n\r\n\r\n      var datePickerFormatter = function (cell, formatterParams, onRendered) {\r\n        onRendered(function () {\r\n          let $cell = $(cell.getElement()).find("input");\r\n          $cell.width("80%");\r\n          //$cell.height("50%");\r\n          $cell.css("border", "0px solid blue");\r\n          $cell.css("text-align", "center");\r\n          $cell.prop("readonly", true);\r\n          $cell.datepicker({\r\n            format: "dd/mm/yyyy",\r\n            todayBtn: true,\r\n            autoclose: true,\r\n            todayHighlight: true,\r\n          });\r\n          //alert(cell.getValue());\r\n          let value = moment(cell.getValue(), "DD/MM/YYYY").format(\r\n            "DD/MM/YYYY"\r\n          );\r\n          $cell.datepicker("setDate", value);\r\n\r\n\r\n          $cell.datepicker().on("changeDate", function () {\r\n            let d = $(this).datepicker("getDate");\r\n            cell.setValue(moment(d).format("DD/MM/YYYY"));\r\n          });\r\n        });\r\n        var $el = $("<input />");\r\n        return $el[0];\r\n      };\r\n      var dateFormatter = function (cell, formatterParams) {\r\n        var value = cell.getValue();\r\n        if (value) {\r\n          value = moment(value, "YYYY/MM/DD").format("DD/MM/YYYY");\r\n        }\r\n        return value;\r\n      };\r\n\r\n      var select2Formatter = function (cell, formatterParams, onRendered) {\r\n        onRendered(function () {\r\n          let $myCell = $(cell.getElement());\r\n          let $cell = $(cell.getElement()).find("select");\r\n          $cell.css({\r\n            "padding": "4px",\r\n            "width": "100%",\r\n            "box-sizing": "border-box",\r\n            "font-family": "",\r\n          })\r\n          $cell.select2({\r\n            //placeholder: \'-- // --\',\r\n            width: "100%",\r\n            //allowClear: true,\r\n          });\r\n          $cell.focus();\r\n          $cell.val(cell.getValue()).trigger("change.select2");\r\n          $(cell.getElement())\r\n            .find("select")\r\n            .on("change", function () {\r\n              cell.setValue($(this).val());\r\n            });\r\n          $myCell\r\n            .find(".select2-container--default")\r\n            .css("border", "0px solid blue");\r\n          $myCell\r\n            .find(".select2-selection--single")\r\n            .css("border", "0px solid blue");\r\n        });\r\n        var $el = $("<select class=\'tabu\' >");\r\n        formatterParams.forEach((el) => {\r\n          let $option = $("<option>").val(el.id).text(el.text);\r\n          $el.append($option);\r\n        });\r\n        return $el[0];\r\n      };\r\n\r\n\r\n      // create custom formatter\r\n      var selectFormatter = function (cell, formatterParams) {\r\n        //create and style select\r\n        var select = $("<select><select/>");\r\n\r\n        //add options elements\r\n        formatterParams.forEach(function (item) {\r\n          select.append($("<option></option>").attr("value", item).text(item));\r\n        });\r\n\r\n        //define styling\r\n        select.css({\r\n          "padding": "4px",\r\n          "width": "100%",\r\n          "box-sizing": "border-box",\r\n          "font-family": "",\r\n        })\r\n\r\n          //set cell value\r\n          .val(cell.getValue())\r\n\r\n\r\n        //submit new value on blur\r\n        select.on("change blur", function (e) {\r\n          cell.setValue(select.val());\r\n        });\r\n\r\n        //submit new value on enter\r\n        select.on("keydown", function (e) {\r\n          if (e.keyCode === 13) {\r\n            cell.setValue(select.val());\r\n          }\r\n        });\r\n\r\n        return select;\r\n      }\r\n      //in column definition assign formatter and define options \r\n      //{title:"Gender", field:"gender", formatter:selectFormatter, formatterParams:["male", "female"]}\r\n\r\n      /*\r\n      function globalCellClick(e, cell) {\r\n          console.log(\'Inside cell select\'); // works now, so function is being reached\r\n          var mycell = cell.getElement();\r\n          console.log(\'Cell: \' , mycell); // works\r\n          var cellf = mycell.attr(\'tabulator-field\');\r\n          console.log(\'Selected cell field: \' + cellf); // works\r\n          var celledit = mycell.getColumn().getDefinition().editable; // check if cell is editable\r\n          console.log(\'Editable cell: \' + celledit); // **(BROKEN): mycell.getColumn() is undefined**\r\n          var  celltxt = mycell.getValue();\r\n          console.log(\'Selected cell text: \' + celltxt); // **(BROKEN): mycell.getValue() is undefined**\r\n      }*/\r\n\r\n      var roweditCheck = function (cell) {\r\n        //cell - the cell component for the editable cell\r\n        //get row data\r\n        //var data = cell.getRow().getData();\r\n        //return data.age > 18; // only allow the name cell to be edited if the age is over 18\r\n        let row = cell.getRow();\r\n        let id = row.getIndex();\r\n        let $cell = row.getElement();\r\n        //var editFunc = cell.getColumn().getDefinition().editable; \r\n        //var isEditable = cell.getRow().getElement().classList.contains(\'isEditable\');\r\n        //console.log(isEditable);\r\n        //console.log(editFunc);           \r\n        //alert( JSON.stringify (cell.getRow().getData()));\r\n        //console.log($cell.html());\r\n        //row.getElement().style.backgroundColor = "#1e3b20";\r\n        //$(row.getElement()).css("backgroundColor",\'yellow\');\r\n        //console.log($(row.getElement()).text());\r\n        //let sel=cell.getRow().isSelected();\r\n        //console.log(sel);\r\n        if (that.sel.id == cell.getRow().getData().id) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      this.tabulator = new Tabulator(this.$refs.table, {\r\n        //selectable:true,\r\n        data: this.tableData, //link data to table\r\n        reactiveData: true, //enable data reactivity\r\n        height: $(window).innerHeight() - 400,//\'200px\',//$(window).innerHeight()\r\n        //addRowPos:"top",       //top,bottom//when adding a new row, add it to the top of the table\r\n        // columnVertAlign: "middle", //align header contents\r\n        // cellVertAlign: "middle", //vertically center cell contents\r\n        history: true,             //allow undo and redo actions on the table\r\n        pagination: "local",       //paginate the data\r\n        paginationSize: 3,         //allow 7 rows per page of data\r\n        paginationCounter: "rows", //display count of paginated rows in footer\r\n        paginationInitialPage: 1, //optional parameter to set the initial page to load    \r\n        paginationSizeSelector: [5, 10, 20, 30, 50],\r\n        rowFormatter: function (row) {\r\n          //console.log(\'rowformater\')\r\n          console.log($(row.getElement()).html());\r\n        },\r\n        //autoColumns:true,\r\n        columns: [\r\n          {\r\n            title: "STT",\r\n            formatter: "rownum",\r\n            headerHozAlign: "center",\r\n            hozAlign: "center",\r\n          },\r\n          {\r\n            title: "Cmd",\r\n            headerHozAlign: "center",\r\n            hozAlign: "center",\r\n            headerSort: false,\r\n            width: 100,\r\n            formatter: function (cell, formatterParams, onRendered) {\r\n              onRendered(function () {\r\n                $(cell.getElement()).find("#testedit").on("click", cell, that.onTestEdit);\r\n                $(cell.getElement()).find("#save").on("click", cell.getRow(), that.onSave);\r\n                $(cell.getElement()).find("#cancel").on("click", cell.getRow(), that.onCancel);\r\n                $(cell.getElement()).find("#edit").on("click", cell.getRow(), that.onEdit);\r\n                $(cell.getElement()).find("#del").on("click", cell.getRow(), that.onDel);\r\n              });\r\n              let $div = $("<div>");\r\n              //let $btnTestEdit=  $("<button>", { text: "Test edit", class: "mr-1" }).attr("id", "testedit");\r\n              let $btnSave = $("<button>", { text: "Save", class: "mr-1" }).attr("id", "save").hide();\r\n              let $btnCancel = $("<button>", { text: "Cancel", class: "mr-1" }).attr("id", "cancel").hide();\r\n              let $btnEdit = $("<button>", { text: "Edit", class: "mr-1" }).attr("id", "edit");\r\n              let $btnDel = $("<button>", { text: "Del", class: "mr-1" }).attr("id", "del");\r\n              $div.append($btnSave);\r\n              $div.append($btnCancel);\r\n              $div.append($btnEdit);\r\n              $div.append($btnDel);\r\n              if (that.sel.id == cell.getRow().getData().id) {\r\n                $btnSave.show();\r\n                $btnCancel.show();\r\n                $btnEdit.hide();\r\n                $btnDel.hide();\r\n              } else {\r\n                // $btnSave.hide();\r\n                // $btnCancel.hide();\r\n                // $btnEdit.show();\r\n                if ($.isEmptyObject(that.sel) == true) {\r\n                  $btnSave.hide();\r\n                  $btnCancel.hide();\r\n                  $btnEdit.show();\r\n                } else {\r\n                  $btnEdit.attr(\'disabled\', \'disabled\');//.hide();\r\n                  $btnDel.attr(\'disabled\', \'disabled\');//.hide();\r\n                }\r\n              }\r\n              return $div[0];\r\n            },\r\n          },\r\n          {\r\n            title: "Id",\r\n            field: "id",\r\n            width: 50,\r\n            //headerFilter: true,\r\n            hozAlign: "center",\r\n          },\r\n          {\r\n            title: "Name",\r\n            field: "name",\r\n            width: 80,\r\n            editor: "input",\r\n            validator: ["required"], //"required"  \r\n            editable: roweditCheck,//editCheck,\r\n          },\r\n          {\r\n            title: "SoLg",\r\n            field: "solg",\r\n            width: 50,\r\n            editor: "input",\r\n            validator: ["required", "integer"], //"required"          \r\n            hozAlign: "right",\r\n            editable: roweditCheck,//editCheck,\r\n          },\r\n          {\r\n            title: "DonGia",\r\n            field: "dongia",\r\n            width: 50,\r\n            editor: "input",\r\n            validator: ["required", "integer"], //"required"          \r\n            hozAlign: "right",\r\n            editable: roweditCheck,//editCheck,\r\n          },\r\n          {\r\n            title: "Tien",\r\n            field: "tien",\r\n            width: 50,\r\n            editor: "input",\r\n            validator: ["required", "integer"], //"required"          \r\n            hozAlign: "right",\r\n            editable: roweditCheck,//editCheck,\r\n          },\r\n          {\r\n            title: "Ngày",\r\n            field: "ngay",\r\n            sorter: "string",\r\n            //headerFilter: true,\r\n            headerHozAlign: "center",\r\n            hozAlign: "center",\r\n            width: 100,\r\n            //editable: true,\r\n            //editor: dateEditor,\r\n            editor: dateEditor,\r\n            validator: "required",\r\n            //formatter: datePickerFormatter,\r\n            editable: roweditCheck,//editCheck,\r\n          },\r\n          {\r\n            title: "MonId",\r\n            field: "monid",\r\n            hozAlign: "center",\r\n            width: 100,\r\n            editor: select2Editor,\r\n            editorParams: [\r\n              { "value": "1", "text": "" },\r\n              { "value": "2", "text": "Grammes" },\r\n              { "value": "3", "text": "Kilogrammes" },\r\n              { "value": "4", "text": "Livres" },\r\n              { "value": "5", "text": "Milligrammes" },\r\n              { "value": "6", "text": "Once" }\r\n            ],\r\n            editable: roweditCheck,//editCheck,\r\n          },\r\n          {\r\n            title: "Monid2",\r\n            field: "monid",\r\n            align: "center",\r\n            width: 100,\r\n            editor: select21Editor,//select2Editor,\r\n            formatterParams: this.mons.map((x) => ({\r\n              id: x.id,\r\n              text: `${x.id} - ${x.name}`,\r\n            })),\r\n            editable: roweditCheck,//editCheck,\r\n          },\r\n          {\r\n            title: "MonId3",\r\n            field: "monid",\r\n            headerHozAlign: "center",\r\n            hozAlign: "left",\r\n            width: 100,\r\n            //editor:"input",\r\n            formatter: select2Formatter,\r\n            formatterParams: this.mons.map((x) => ({\r\n              id: x.id,\r\n              text: `${x.id} - ${x.name}`,\r\n            })),\r\n            editable: roweditCheck,//editCheck,\r\n          },\r\n\r\n          {\r\n            title: "MonId4",\r\n            field: "monid",\r\n            align: "center",\r\n            width: 100,\r\n            //editor: true,\r\n            formatter: function (cell, formatterParams, onRendered) {\r\n              onRendered(function () {\r\n                var select_2 = $(cell.getElement());\r\n\r\n                select_2.select2({\r\n                  //theme: "classic",\r\n                  //placeholder: \'Select\',\r\n                  data: [\r\n                    { id: 1, text: \'thuc 101\' },\r\n                    { id: 2, text: \'thuc 102\' }\r\n                  ],\r\n                  //minimumResultsForSearch: Infinity,\r\n                  width: 100,\r\n                  //minimumInputLength: 0,\r\n                  allowClear: true,\r\n                }).on(\'change\', function (e) {\r\n                  console.log(\'change\');\r\n                });\r\n\r\n                select_2.val(list[cell.getValue()].id);\r\n                var x = select_2.val();\r\n                select_2.val(x).trigger(\'change.select2\');\r\n              })\r\n            },\r\n            editable: roweditCheck,//editCheck,\r\n\r\n          },\r\n          {\r\n            title: "Tp",\r\n            field: \'tp\',\r\n            width: 100,\r\n            headerHozAlign: \'center\',\r\n            hozAlign: \'center\',\r\n            editor: comboEditor,\r\n            editorParams: cboData,\r\n            formatter: function (cell, formatterParams) {\r\n              for (var i = 0; i < formatterParams.length; i++) {\r\n                if (formatterParams[i].key == cell.getValue()) {\r\n                  return formatterParams[i].name;\r\n                }\r\n              }\r\n            },\r\n            formatterParams: cboData,\r\n            editable: roweditCheck,//editCheck,\r\n          },\r\n        ], //define table columns\r\n      });\r\n      this.tabulator.on("dataLoaded", function (data) {\r\n        that.onLoad();\r\n      });\r\n      this.tabulator.on("pageLoaded", function (pageno) {\r\n      });\r\n      this.tabulator.on("dataChanged", function (data) {\r\n      });\r\n      this.tabulator.on("rowClick", function (e, row) {\r\n      });\r\n      this.tabulator.on("rowSelectionChanged", function (data, rows) {\r\n      });\r\n      this.tabulator.on("rowSelected", function (row) {\r\n        let index = row.getIndex();\r\n        that.msg = index;\r\n        console.log(\'rowSelected\');\r\n      });\r\n      this.tabulator.on("cellEditing", function (cell) {\r\n        let row = cell.getRow();\r\n        let data = row.getData();\r\n        let index = row.getIndex();\r\n        //that.tabulator.deselectRow();\r\n        //that.tabulator.selectRow(index);  \r\n        //console.log(`cellediting - ${index}`);\r\n      });\r\n      this.tabulator.on("cellEditCancelled", function (cell) {\r\n      });\r\n      this.tabulator.on("cellEdited", function (cell) {\r\n        //console.log(`cell edited`);\r\n        let row = cell.getRow();\r\n        let data = row.getData();\r\n        let index = row.getIndex();\r\n        //alert(JSON.stringify(data));\r\n        let solg = data.solg;\r\n        let dongia = data.dongia;\r\n        let tien = solg * dongia;\r\n        console.log(tien);\r\n\r\n\r\n      });\r\n      this.tabulator.on("validationFailed", function (cell, value, validators) {\r\n        let field = cell.getField();\r\n        that.valid = field;\r\n      });\r\n\r\n\r\n\r\n\r\n\r\n    },\r\n    onLoad() {\r\n      let ar = [\r\n        { id: 1, name: "thuc 101", solg: 10, dongia: 1000, tien: 1, ngay: "01/01/1968", monid: 1, tp: "hue" },\r\n        { id: 2, name: "thuc 102", solg: 1, dongia: 2000, tien: 1, ngay: "01/01/1968", monid: 1, tp: "hue" }\r\n      ];\r\n      this.count = 3;\r\n      ar.forEach(x => {\r\n        this.tableData.push(x);\r\n      })\r\n    },\r\n    ChangeAct() {\r\n      let act = (this.r.act == \'true\') ? true : false;\r\n      this.r.act = act;\r\n    },\r\n    onSave(e) {\r\n      if (this.valid != "") {\r\n        this.toast("không hợp lệ!!!")\r\n        return;\r\n      }\r\n      e.preventDefault();\r\n      let row = e.data;\r\n      var cells = row.getCells();\r\n      let id = row.getIndex();\r\n      let index = this.tableData.findIndex(x => x.id == id);\r\n      let r = JSON.parse(JSON.stringify(this.tableData[index]));// this.tableData[index]\r\n      alert(JSON.stringify(r));\r\n      this.sel = {};\r\n      this.tabulator.redraw(true);\r\n    },\r\n    onSaveModal() {\r\n      this.$validator.validateAll().then((result) => {\r\n        if (!result) {\r\n          this.toast("Không hợp lệ");\r\n          return;\r\n        }\r\n        let r = JSON.parse(JSON.stringify(this.r));\r\n        if (r.id == 0) {\r\n          r.id = this.count;\r\n          this.tabulatorAdd(r);\r\n          this.count++;\r\n          this.setPage(1);\r\n        } else {\r\n          this.tabulatorUpdate(r);\r\n        }\r\n        this.hideModal();\r\n      });\r\n    },\r\n    onAdd() {\r\n      let r = {\r\n        id: this.count,\r\n        name: "thuc 101",\r\n        solg: 1,\r\n        dongia: 1000,\r\n      }\r\n      this.tabulatorAdd(r);\r\n      this.count++;\r\n      this.setPage(1);\r\n    },\r\n    onCancel(e) {\r\n      e.preventDefault();\r\n      let row = e.data;\r\n      var cells = row.getCells();\r\n      let id = row.getIndex();\r\n      let index = this.tableData.findIndex(x => x.id == id);\r\n      let r = JSON.parse(JSON.stringify(this.sel));\r\n      this.tabulatorUpdate(r);\r\n      this.sel = {};\r\n      this.valid = "";\r\n      let $row = $(row.getElement());\r\n      this.tabulator.redraw(true);\r\n    },\r\n    onEdit(e) {\r\n      e.preventDefault();\r\n      let row = e.data;\r\n      var cells = row.getCells();\r\n      let id = row.getIndex();\r\n      let index = this.tableData.findIndex(x => x.id == id);\r\n      this.sel = JSON.parse(JSON.stringify(row.getData()));\r\n      let $row = $(row.getElement());\r\n      this.tabulator.redraw(true)\r\n    },\r\n    onDel(e) {\r\n      e.preventDefault();\r\n      let row = e.data;\r\n      let id = row.getIndex();\r\n      this.tabulatorDel(id);\r\n    },\r\n    getPageMax() {\r\n      return this.tabulator.getPageMax();\r\n    },\r\n    getLastPage(count) {\r\n      let pageSize = this.tabulator.getPageSize();\r\n      let du = count % pageSize;\r\n      return du == 0 ? count / pageSize : (count - du) / pageSize + 1;\r\n    },\r\n    getPageSize() {\r\n      return this.tabulator.getPageSize();\r\n    },\r\n    getPage() {\r\n      return this.tabulator.getPage();\r\n    },\r\n    setPage(_page) {\r\n      this.tabulator.setPage(_page);\r\n    },\r\n    getData() {\r\n      return this.tabulator.getData();\r\n    },\r\n    tabulatorAdd(r) {\r\n      this.tableData.unshift(r);\r\n    },\r\n    tabulatorDel(id) {\r\n      let index = this.tableData.findIndex(x => x.id == id);\r\n      this.tableData.splice(index, 1);\r\n    },\r\n    tabulatorUpdate(r) {\r\n      let index = this.tableData.findIndex(x => x.id == r.id);\r\n      this.tableData.splice(index, 1, r);\r\n    },\r\n    tabulatorGetRow(id) {\r\n      //let index=this.tabulator.getData().findIndex(x=>x.id==id);\r\n      //let r=this.tabulator.getData()[index];\r\n      //return r;\r\n    },\r\n    toast(msg, variant = null) {\r\n      this.$bvToast.toast(msg, {\r\n        title: `Information`,\r\n        variant: variant,\r\n        solid: true,\r\n      });\r\n    },\r\n    showModal() {\r\n      this.$refs[\'my-modal2\'].show()\r\n    },\r\n    hideModal() {\r\n      this.$refs[\'my-modal2\'].hide()\r\n    },\r\n  }\r\n}\r\n<\/script>\r\n<style lang="scss">\r\n.select2-container--default .select2-selection--single .select2-selection__arrow {\r\n  height: 15px;\r\n  position: absolute;\r\n  top: 1px;\r\n  right: 1px;\r\n  width: 20px;\r\n}\r\n\r\n.select2-container .select2-selection--single {\r\n  box-sizing: border-box;\r\n  cursor: pointer;\r\n  display: block;\r\n  height: 18px;\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n}\r\n\r\n.select2-container--default .select2-selection--single .select2-selection__rendered {\r\n  color: #444;\r\n  line-height: 18px;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n.xyz {\r\n  border: 1px solid red;\r\n}\r\n\r\n.danger,\r\n.danger .dropdown-toggle,\r\n.danger .selected-tag {\r\n  background-color: aqua;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ko-hop-le {\r\n  border-radius: 4px;\r\n  background-color: aqua;\r\n}\r\n\r\n$textSize: 8.5px; //14px !default; //table text size\r\n@import "~tabulator-tables/src/scss/tabulator.scss";\r\n\r\n.tabulator-col-title {\r\n  text-align: center;\r\n}\r\n\r\n.tabulator .tabulator-footer .tabulator-page.active {\r\n  background-color: greenyellow !important;\r\n  color: blue !important;\r\n}\r\n\r\n.tabulator-row .tabulator-cell {\r\n  padding: 18px 4px;\r\n}\r\n\r\n\r\n.b-calendar .b-calendar-grid-body .col[data-date] .btn {\r\n  width: 24px;\r\n  height: 24px;\r\n  font-size: 10px;\r\n  line-height: 1;\r\n  margin: 0px auto;\r\n  padding: 6px 0;\r\n}\r\n\r\n.custom-control.custom-checkbox {\r\n  position: relative;\r\n  z-index: 1;\r\n  display: block;\r\n  min-height: 0.9rem;\r\n  padding-left: 1.5rem;\r\n  padding-top: 0.3rem;\r\n}\r\n\r\n.col-4 input {\r\n  margin-bottom: 1px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 0.3rem;\r\n}\r\n</style>\r\n\r\n'},17529:function(e,t,n){"use strict";n(41539);var r={cong:function(e,t){return e+t},nhan:function(e,t){return e*t},list:function(){return[{id:1,ten:"thuc 101"},{id:2,ten:"thuc 102"},{id:3,ten:"thuc 103"}]},loadCss:function(e){return new Promise((function(t,n){var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.onload=t,r.href=e;var a=document.querySelector("script");a.parentNode.insertBefore(r,a)}))},loadScript:function(e,t){return new Promise((function(n,r){var a=document.createElement("script");a.onload=n,a.onerror=r,a.src=t,a.type="text/javascript",a.setAttribute("id",e),document.getElementsByTagName("head")[0].appendChild(a)}))},loadMyScript:function(e){var t=this;document.getElementById("myScript")?e.onReady():this.loadScript("myScript","js/jquery.min.js").then((function(){t.loadScript("","js/bootstrap.js").then((function(){t.loadScript("","js/select2.min.js").then((function(){t.loadScript("","js/bootstrap-datepicker.js").then((function(){t.loadCss("css/select2.min.css").then((function(){t.loadCss("css/bootstrap-datepicker.css").then((function(){e.onReady()}))}))}))}))}))}))}};t["Z"]=r}}]);
//# sourceMappingURL=7708-legacy.e3d9650f.js.map