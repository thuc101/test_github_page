"use strict";(self["webpackChunkvue_start_1"]=self["webpackChunkvue_start_1"]||[]).push([[7623],{57623:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("raw-loader",{attrs:{mytxt:r(80158).Z}}),n("h5",[e._v("This is BTable Simple")]),n("div",[e._v(e._s(e.sel))]),n("button",{on:{click:e.OnAdd}},[e._v("Add")]),n("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.onSave.apply(null,arguments)}}},[n("b-table",{ref:"mytable",attrs:{small:"",items:e.items,fields:e.fields},scopedSlots:e._u([{key:"cell()",fn:function(t){var r=t.value,i=t.item,s=t.field.key;return[e.sel[e.pri]!=i[e.pri]?[0!=i[e.pri]?[s==e.pri?[e._v(" "+e._s(r)+" ")]:e._e(),"Ten"==s?[e._v(" "+e._s(r)+" ")]:e._e()]:e._e()]:e._e(),e.sel[e.pri]==i[e.pri]||0==i[e.pri]?[s==e.pri?[n("span",[e._v(e._s(r))])]:e._e(),"Ten"==s?[n("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"ko-hop-le":e.errors.has(s)},attrs:{autocomplete:"off",name:s,placeholder:""},model:{value:i[s],callback:function(t){e.$set(i,s,t)},expression:"item[key]"}})]:e._e()]:e._e()]}},{key:"cell(cmd)",fn:function(t){return[0==t.item[e.pri]?[n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnSave(t.item)}}},[n("b-icon-hand-thumbs-up")],1),n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnCancel(t.item)}}},[n("b-icon-file-x")],1)]:[e.sel[e.pri]!=t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnEdit(t.item)}}},[n("b-icon-pencil-square")],1):e._e(),e.sel[e.pri]!=t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnDel(t.item)}}},[n("b-icon-trash")],1):e._e(),e.sel[e.pri]==t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnSave(t.item)}}},[n("b-icon-hand-thumbs-up")],1):e._e(),e.sel[e.pri]==t.item[e.pri]?n("b-button",{staticClass:"mr-1",attrs:{variant:"outline",size:"sm"},on:{click:function(r){return e.OnCancel(t.item)}}},[n("b-icon-file-x")],1):e._e()]]}}])})],1)],1)},i=[],s=r(12954),l=r(20144),a=r(19938),m=r.n(a);l["default"].use(s.ZP,{classes:!0,fieldsBagName:"veeFields"}),l["default"].component("v-select",m());var o={props:["ds1"],components:{},mounted(){},data(){return{pri:"Id",sel:{},items:[{Id:1,Ten:"thuc 101"},{Id:2,Ten:"thuc 102"},{Id:3,Ten:"thuc 103"},{Id:4,Ten:"thuc 104"}],fields:[{key:"Id",sortable:!0,thClass:"text-center",tdClass:"align-middle",thStyle:{width:"8%"}},{key:"Ten",sortable:!0,thClass:"text-left",tdClass:"align-middle",thStyle:{width:"60%"}},{key:"Cmd",sortable:!0,thClass:"text-center",tdClass:"align-middle text-center",thStyle:{width:"12%"}}]}},mounted(){},methods:{OnAdd(){let e={Id:0,Ten:"Thức"};this.items.unshift(e),this.$refs.mytable.refresh()},doCancel(e){for(let t in e)e[t]!=this.sel[t]&&(e[t]=this.sel[t])},OnCancel(e){if(0==e[this.pri]){let t=this.items.findIndex((t=>t[this.pri]==e[this.pri]));this.items.splice(t,1),this.adding=!1,this.$refs.mytable.refresh()}else this.doCancel(e),this.sel={}},OnEdit(e){this.sel=JSON.parse(JSON.stringify(e))},OnDel(e){alert(JSON.stringify(e))},OnSave(e){this.$validator.validateAll().then((t=>{if(!t)return void this.toast("Không hợp lệ");let r=JSON.parse(JSON.stringify(e));0==r[this.pri]?(alert(`Add r ${JSON.stringify(r)}`),this.$refs.mytable.refresh()):(alert(`Update r ${JSON.stringify(r)}`),this.sel={})}))},toast(e,t=null){this.$bvToast.toast(e,{title:"Information",variant:t,solid:!0})}}},d=o,u=r(1001),c=(0,u.Z)(d,n,i,!1,null,null,null),p=c.exports},80158:function(e,t){t["Z"]='<template>\r\n    <div>\r\n        <raw-loader :mytxt="require(\'!raw-loader!./BTableSimple.vue\').default"></raw-loader>\r\n        <h5>This is BTable Simple</h5>\r\n        <div>{{ sel }}</div>\r\n        <button @click="OnAdd">Add</button>\r\n        <form @submit.stop.prevent="onSave">\r\n            <b-table ref="mytable" small :items="items" :fields="fields">\r\n                <template v-slot:cell()="{ value, item, field: { key } }">\r\n\r\n                    <template v-if="sel[pri] != item[pri]">\r\n                        <template v-if="item[pri] != 0">\r\n                            <template v-if="key == pri">\r\n                                {{ value }}\r\n                            </template>\r\n                            <template v-if="key == \'Ten\'">\r\n                                {{ value }}\r\n                            </template>\r\n                        </template>\r\n                    </template>\r\n                    <template v-if="(sel[pri] == item[pri] || item[pri] == 0)">\r\n                        <template v-if="key == pri">\r\n                            <span>{{ value }}</span>\r\n                        </template>\r\n                        <template v-if="key == \'Ten\'">\r\n                            <b-form-input autocomplete="off" v-model="item[key]" :name="key" v-validate="\'required\'"\r\n                                placeholder="" :class="{ \'ko-hop-le\': errors.has(key) }">\r\n                            </b-form-input>\r\n                        </template>\r\n                    </template>\r\n\r\n\r\n                </template>\r\n                <template #cell(cmd)="row">\r\n                    <template v-if="row.item[pri] == 0">\r\n                        <b-button variant="outline" class="mr-1" size="sm" @click="OnSave(row.item)">\r\n                            <b-icon-hand-thumbs-up></b-icon-hand-thumbs-up>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" size="sm" @click="OnCancel(row.item)">\r\n                            <b-icon-file-x></b-icon-file-x>\r\n                        </b-button>\r\n                    </template>\r\n\r\n                    <template v-else>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] != row.item[pri]" size="sm"\r\n                            @click="OnEdit(row.item)">\r\n                            <b-icon-pencil-square></b-icon-pencil-square>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] != row.item[pri]" size="sm"\r\n                            @click="OnDel(row.item)">\r\n                            <b-icon-trash></b-icon-trash>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] == row.item[pri]" size="sm"\r\n                            @click="OnSave(row.item)">\r\n                            <b-icon-hand-thumbs-up></b-icon-hand-thumbs-up>\r\n                        </b-button>\r\n                        <b-button variant="outline" class="mr-1" v-if="sel[pri] == row.item[pri]" size="sm"\r\n                            @click="OnCancel(row.item)">\r\n                            <b-icon-file-x></b-icon-file-x>\r\n                        </b-button>\r\n                    </template>\r\n                </template>\r\n            </b-table>\r\n        </form>\r\n    </div>\r\n</template>\r\n<script>\r\n\r\nimport VeeValidate from "vee-validate";\r\nimport Vue from "vue";\r\nVue.use(VeeValidate, {\r\n    classes: true,\r\n    fieldsBagName: \'veeFields\'\r\n});\r\nimport vSelect from "vue-select";\r\nVue.component("v-select", vSelect);\r\n\r\n\r\nexport default {\r\n    props: ["ds1"],\r\n    components: {\r\n    },\r\n    mounted() {\r\n    },\r\n    data() {\r\n        return {\r\n            pri: "Id",\r\n            sel: {},\r\n            items: [\r\n                { Id: 1, Ten: "thuc 101" },\r\n                { Id: 2, Ten: "thuc 102" },\r\n                { Id: 3, Ten: "thuc 103" },\r\n                { Id: 4, Ten: "thuc 104" },\r\n            ],\r\n            fields: [\r\n                { key: \'Id\', sortable: true, thClass: \'text-center\', tdClass: \'align-middle\', thStyle: { width: "8%" } },\r\n                //{ key: \'ClaimType\', sortable: true, thClass: \'text-left\', tdClass: \'align-middle\', thStyle: { width: "80%" } },\r\n                { key: \'Ten\', sortable: true, thClass: \'text-left\', tdClass: \'align-middle\', thStyle: { width: "60%" } },\r\n                { key: \'Cmd\', sortable: true, thClass: \'text-center\', tdClass: \'align-middle text-center\', thStyle: { width: "12%" } },\r\n            ]\r\n        }\r\n    },\r\n    mounted(){\r\n    },\r\n    methods: {\r\n        OnAdd() {\r\n            let r = {\r\n                Id: 0,\r\n                Ten: \'Thức\',\r\n            }\r\n            this.items.unshift(r);\r\n            this.$refs.mytable.refresh();\r\n        },\r\n        doCancel(item) {\r\n            for (let key in item) {\r\n                if (item[key] != this.sel[key]) {\r\n                    item[key] = this.sel[key]\r\n                }\r\n            }\r\n        },\r\n        OnCancel(item) {\r\n            if (item[this.pri] == 0) {\r\n                let index = this.items.findIndex(x => x[this.pri] == item[this.pri]);\r\n                this.items.splice(index, 1);\r\n                this.adding = false;\r\n                this.$refs.mytable.refresh();\r\n            } else {\r\n                this.doCancel(item);\r\n                this.sel = {};\r\n            }\r\n        },\r\n        OnEdit(item) {\r\n            this.sel = JSON.parse(JSON.stringify(item));\r\n            //alert(JSON.stringify(item));\r\n        },\r\n        OnDel(item) {\r\n            alert(JSON.stringify(item));\r\n        },\r\n        OnSave(item) {\r\n            this.$validator.validateAll().then((result) => {\r\n                if (!result) {\r\n                    this.toast("Không hợp lệ");\r\n                    return;\r\n                }\r\n                let r = JSON.parse(JSON.stringify(item));\r\n                if (r[this.pri] == 0) {\r\n                    alert(`Add r ${JSON.stringify(r)}`);\r\n                    this.$refs.mytable.refresh();\r\n                } else {\r\n                    alert(`Update r ${JSON.stringify(r)}`);\r\n                    this.sel = {};\r\n                }\r\n            });\r\n        },\r\n        toast(msg, variant = null) {\r\n            this.$bvToast.toast(msg, {\r\n                title: `Information`,\r\n                variant: variant,\r\n                solid: true,\r\n            });\r\n        },\r\n    }\r\n}\r\n<\/script>\r\n  '}}]);
//# sourceMappingURL=7623.06a79332.js.map